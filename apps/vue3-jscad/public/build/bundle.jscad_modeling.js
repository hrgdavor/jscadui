var iq=Object.create;var ln=Object.defineProperty;var cq=Object.getOwnPropertyDescriptor;var aq=Object.getOwnPropertyNames;var lq=Object.getPrototypeOf,uq=Object.prototype.hasOwnProperty;var u=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var sr=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of aq(t))!uq.call(e,s)&&s!==r&&ln(e,s,{get:()=>t[s],enumerable:!(n=cq(t,s))||n.enumerable});return e},un=(e,t,r)=>(sr(e,t,"default"),r&&sr(r,t,"default")),fq=(e,t,r)=>(r=e!=null?iq(lq(e)):{},sr(t||!e||!e.__esModule?ln(r,"default",{value:e,enumerable:!0}):r,e)),hq=e=>sr(ln({},"__esModule",{value:!0}),e);var B=u((MT,Io)=>{var Go=e=>e.reduce((t,r)=>Array.isArray(r)?t.concat(Go(r)):t.concat(r),[]);Io.exports=Go});var $o=u((ST,Xo)=>{var pq=e=>Object.assign({},e);Xo.exports=pq});var Lo=u((TT,Yo)=>{var dq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e);Yo.exports=dq});var or=u((kT,Uo)=>{var gq=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Uo.exports=gq});var Wo=u((OT,Ho)=>{var mq=or(),qq=e=>{let t=mq();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Ho.exports=qq});var fn=u((VT,_o)=>{var xq=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e);_o.exports=xq});var Qo=u((FT,Ko)=>{var wq=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=t[3],i=t[4],c=t[5],a=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],m=t[12],g=t[13],q=t[14],w=t[15],v=r*c-n*i,E=r*a-s*i,x=r*l-o*i,P=n*a-s*c,y=n*l-o*c,A=s*l-o*a,b=f*g-h*m,M=f*q-p*m,T=f*w-d*m,S=h*q-p*g,O=h*w-d*g,G=p*w-d*q,R=v*G-E*O+x*S+P*T-y*M+A*b;return R?(R=1/R,e[0]=(c*G-a*O+l*S)*R,e[1]=(s*O-n*G-o*S)*R,e[2]=(g*A-q*y+w*P)*R,e[3]=(p*y-h*A-d*P)*R,e[4]=(a*T-i*G-l*M)*R,e[5]=(r*G-s*T+o*M)*R,e[6]=(q*x-m*A-w*E)*R,e[7]=(f*A-p*x+d*E)*R,e[8]=(i*O-c*T+l*b)*R,e[9]=(n*T-r*O-o*b)*R,e[10]=(m*y-g*x+w*v)*R,e[11]=(h*x-f*y-d*v)*R,e[12]=(c*M-i*S-a*b)*R,e[13]=(r*S-n*M+s*b)*R,e[14]=(g*E-m*P-q*v)*R,e[15]=(f*P-h*E+p*v)*R,e):null};Ko.exports=wq});var jo=u((NT,Jo)=>{var vq=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15];Jo.exports=vq});var I=u((RT,ei)=>{var yq=Math.PI*2;ei.exports={EPS:1e-5,NEPS:1e-13,TAU:yq,spatialResolution:1e5}});var J=u((BT,ri)=>{var{NEPS:Eq}=I(),ti=e=>Math.abs(e)<Eq?0:e,Pq=e=>ti(Math.sin(e)),Aq=e=>ti(Math.cos(e));ri.exports={sin:Pq,cos:Aq}});var hn=u((zT,ni)=>{var bq=e=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);ni.exports=bq});var pn=u((CT,si)=>{var{EPS:Mq}=I(),{sin:Sq,cos:Tq}=J(),kq=hn(),Oq=(e,t,r)=>{let[n,s,o]=r,i=n*n+s*s+o*o;if(Math.abs(i)<Mq)return kq(e);let c=1/Math.sqrt(i);n*=c,s*=c,o*=c;let a=Sq(t),l=Tq(t),f=1-l;return e[0]=n*n*f+l,e[1]=s*n*f+o*a,e[2]=o*n*f-s*a,e[3]=0,e[4]=n*s*f-o*a,e[5]=s*s*f+l,e[6]=o*s*f+n*a,e[7]=0,e[8]=n*o*f+s*a,e[9]=s*o*f-n*a,e[10]=o*o*f+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};si.exports=Oq});var ii=u((DT,oi)=>{var Vq=(e,t)=>(e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);oi.exports=Vq});var ai=u((ZT,ci)=>{var{sin:dn,cos:gn}=J(),Fq=(e,t,r,n)=>{let s=dn(t),o=gn(t),i=dn(r),c=gn(r),a=dn(n),l=gn(n);return e[0]=c*o,e[1]=c*s,e[2]=-i,e[3]=0,e[4]=a*i*o-l*s,e[5]=l*o+a*i*s,e[6]=a*c,e[7]=0,e[8]=a*s+l*i*o,e[9]=l*i*s-a*o,e[10]=l*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};ci.exports=Fq});var ui=u((GT,li)=>{var Nq=(e,t)=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e);li.exports=Nq});var hi=u((IT,fi)=>{var Rq=or(),Bq=(e,t,r,n,s,o,i,c,a,l,f,h,p,d,m,g)=>{let q=Rq();return q[0]=e,q[1]=t,q[2]=r,q[3]=n,q[4]=s,q[5]=o,q[6]=i,q[7]=c,q[8]=a,q[9]=l,q[10]=f,q[11]=h,q[12]=p,q[13]=d,q[14]=m,q[15]=g,q};fi.exports=Bq});var mn=u((XT,pi)=>{var zq=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e);pi.exports=zq});var qn=u(($T,di)=>{var Cq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e);di.exports=Cq});var vt=u((YT,gi)=>{var Dq=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2];gi.exports=Dq});var qi=u((LT,mi)=>{var Zq=vt(),Gq=(e,t)=>{let r=e[0],n=e[1],s=e[2],o=t[0],i=t[1],c=t[2],a=Math.sqrt(r*r+n*n+s*s),l=Math.sqrt(o*o+i*i+c*c),f=a*l,h=f&&Zq(e,t)/f;return Math.acos(Math.min(Math.max(h,-1),1))};mi.exports=Gq});var yt=u((UT,xi)=>{var Iq=()=>[0,0,0];xi.exports=Iq});var vi=u((HT,wi)=>{var Xq=yt(),$q=e=>{let t=Xq();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};wi.exports=$q});var xn=u((WT,yi)=>{var Yq=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);yi.exports=Yq});var He=u((_T,Ei)=>{var Lq=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[0],c=r[1],a=r[2];return e[0]=s*a-o*c,e[1]=o*i-n*a,e[2]=n*c-s*i,e};Ei.exports=Lq});var wn=u((KT,Pi)=>{var Uq=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+n*n+s*s)};Pi.exports=Uq});var bi=u((QT,Ai)=>{var Hq=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e);Ai.exports=Hq});var Si=u((JT,Mi)=>{var Wq=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];Mi.exports=Wq});var ki=u((jT,Ti)=>{var _q=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e);Ti.exports=_q});var Vi=u((ek,Oi)=>{var Kq=yt(),Qq=(e,t,r)=>{let n=Kq();return n[0]=e,n[1]=t,n[2]=r,n};Oi.exports=Qq});var Ni=u((tk,Fi)=>{var Jq=(e,t,r=0)=>(e[0]=t[0],e[1]=t[1],e[2]=r,e);Fi.exports=Jq});var vn=u((rk,Ri)=>{var jq=e=>{let t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)};Ri.exports=jq});var zi=u((nk,Bi)=>{var e3=(e,t,r,n)=>(e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e[2]=t[2]+n*(r[2]-t[2]),e);Bi.exports=e3});var yn=u((sk,Ci)=>{var t3=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e);Ci.exports=t3});var En=u((ok,Di)=>{var r3=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e);Di.exports=r3});var Gi=u((ik,Zi)=>{var n3=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e);Zi.exports=n3});var Xi=u((ck,Ii)=>{var s3=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e);Ii.exports=s3});var ir=u((ak,$i)=>{var o3=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=s*o,e};$i.exports=o3});var Li=u((lk,Yi)=>{var i3=mn(),c3=yt(),a3=He(),l3=(e,t)=>{let r=i3(c3(),t),n=0+(r[0]<r[1]&&r[0]<r[2]),s=0+(r[1]<=r[0]&&r[1]<r[2]),o=0+(r[2]<=r[0]&&r[2]<=r[1]);return a3(e,t,[n,s,o])};Yi.exports=l3});var Hi=u((uk,Ui)=>{var u3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0],o[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),o[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Ui.exports=u3});var _i=u((fk,Wi)=>{var f3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),o[1]=s[1],o[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Wi.exports=f3});var Qi=u((hk,Ki)=>{var h3=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],o[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),o[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=t[2],e};Ki.exports=h3});var Pn=u((pk,Ji)=>{var p3=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e);Ji.exports=p3});var ec=u((dk,ji)=>{var d3=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e[2]=Math.round(t[2]/r)*r+0,e);ji.exports=d3});var An=u((gk,tc)=>{var g3=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s};tc.exports=g3});var bn=u((mk,rc)=>{var m3=e=>{let t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n};rc.exports=m3});var Et=u((qk,nc)=>{var q3=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e);nc.exports=q3});var oc=u((xk,sc)=>{var x3=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}]`;sc.exports=x3});var cc=u((wk,ic)=>{var w3=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[3]*n+r[7]*s+r[11]*o+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*s+r[8]*o+r[12])/i,e[1]=(r[1]*n+r[5]*s+r[9]*o+r[13])/i,e[2]=(r[2]*n+r[6]*s+r[10]*o+r[14])/i,e};ic.exports=w3});var F=u((vk,ac)=>{ac.exports={abs:mn(),add:qn(),angle:qi(),clone:vi(),copy:xn(),create:yt(),cross:He(),distance:wn(),divide:bi(),dot:vt(),equals:Si(),fromScalar:ki(),fromValues:Vi(),fromVec2:Ni(),length:vn(),lerp:zi(),max:yn(),min:En(),multiply:Gi(),negate:Xi(),normalize:ir(),orthogonal:Li(),rotateX:Hi(),rotateY:_i(),rotateZ:Qi(),scale:Pn(),snap:ec(),squaredDistance:An(),squaredLength:bn(),subtract:Et(),toString:oc(),transform:cc()}});var uc=u((yk,lc)=>{var Ae=F(),v3=pn(),y3=(e,t,r)=>{let n=Ae.normalize(Ae.create(),t),s=Ae.normalize(Ae.create(),r),o=Ae.cross(Ae.create(),s,n),i=Ae.dot(s,n);if(i===-1)return v3(e,Math.PI,Ae.orthogonal(o,n));let c=1/(1+i);return e[0]=o[0]*o[0]*c+i,e[1]=o[1]*o[0]*c-o[2],e[2]=o[2]*o[0]*c+o[1],e[3]=0,e[4]=o[0]*o[1]*c+o[2],e[5]=o[1]*o[1]*c+i,e[6]=o[2]*o[1]*c-o[0],e[7]=0,e[8]=o[0]*o[2]*c-o[1],e[9]=o[1]*o[2]*c+o[0],e[10]=o[2]*o[2]*c+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};lc.exports=y3});var hc=u((Ek,fc)=>{var{sin:E3,cos:P3}=J(),A3=(e,t)=>{let r=E3(t),n=P3(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};fc.exports=A3});var dc=u((Pk,pc)=>{var{sin:b3,cos:M3}=J(),S3=(e,t)=>{let r=b3(t),n=M3(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};pc.exports=S3});var mc=u((Ak,gc)=>{var{sin:T3,cos:k3}=J(),O3=(e,t)=>{let r=T3(t),n=k3(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};gc.exports=O3});var xc=u((bk,qc)=>{var V3=e=>e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[12]===0&&e[13]===0&&e[14]===0&&e[15]===1;qc.exports=V3});var vc=u((Mk,wc)=>{var F3=e=>xe(e[1])&&xe(e[2])&&xe(e[3])&&xe(e[4])&&xe(e[6])&&xe(e[7])&&xe(e[8])&&xe(e[9])&&xe(e[11])&&e[15]===1,xe=e=>Math.abs(e)<Number.EPSILON;wc.exports=F3});var Ec=u((Sk,yc)=>{var N3=e=>{let t=e[4]*e[9]-e[8]*e[5],r=e[8]*e[1]-e[0]*e[9],n=e[0]*e[5]-e[4]*e[1];return t*e[2]+r*e[6]+n*e[10]<0};yc.exports=N3});var Ac=u((Tk,Pc)=>{var R3=(e,t)=>{let[r,n,s,o]=t;return e[0]=1-2*r*r,e[1]=-2*n*r,e[2]=-2*s*r,e[3]=0,e[4]=-2*r*n,e[5]=1-2*n*n,e[6]=-2*s*n,e[7]=0,e[8]=-2*r*s,e[9]=-2*n*s,e[10]=1-2*s*s,e[11]=0,e[12]=2*r*o,e[13]=2*n*o,e[14]=2*s*o,e[15]=1,e};Pc.exports=R3});var Mc=u((kk,bc)=>{var B3=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=t[3],c=t[4],a=t[5],l=t[6],f=t[7],h=t[8],p=t[9],d=t[10],m=t[11],g=t[12],q=t[13],w=t[14],v=t[15],E=r[0],x=r[1],P=r[2],y=r[3];return e[0]=E*n+x*c+P*h+y*g,e[1]=E*s+x*a+P*p+y*q,e[2]=E*o+x*l+P*d+y*w,e[3]=E*i+x*f+P*m+y*v,E=r[4],x=r[5],P=r[6],y=r[7],e[4]=E*n+x*c+P*h+y*g,e[5]=E*s+x*a+P*p+y*q,e[6]=E*o+x*l+P*d+y*w,e[7]=E*i+x*f+P*m+y*v,E=r[8],x=r[9],P=r[10],y=r[11],e[8]=E*n+x*c+P*h+y*g,e[9]=E*s+x*a+P*p+y*q,e[10]=E*o+x*l+P*d+y*w,e[11]=E*i+x*f+P*m+y*v,E=r[12],x=r[13],P=r[14],y=r[15],e[12]=E*n+x*c+P*h+y*g,e[13]=E*s+x*a+P*p+y*q,e[14]=E*o+x*l+P*d+y*w,e[15]=E*i+x*f+P*m+y*v,e};bc.exports=B3});var Tc=u((Ok,Sc)=>{var{EPS:z3}=I(),{sin:C3,cos:D3}=J(),Z3=fn(),G3=(e,t,r,n)=>{let[s,o,i]=n,c=s*s+o*o+i*i;if(Math.abs(c)<z3)return Z3(e,t);let a=1/Math.sqrt(c);s*=a,o*=a,i*=a;let l=C3(r),f=D3(r),h=1-f,p=t[0],d=t[1],m=t[2],g=t[3],q=t[4],w=t[5],v=t[6],E=t[7],x=t[8],P=t[9],y=t[10],A=t[11],b=s*s*h+f,M=o*s*h+i*l,T=i*s*h-o*l,S=s*o*h-i*l,O=o*o*h+f,G=i*o*h+s*l,R=s*i*h+o*l,D=o*i*h-s*l,V=i*i*h+f;return e[0]=p*b+q*M+x*T,e[1]=d*b+w*M+P*T,e[2]=m*b+v*M+y*T,e[3]=g*b+E*M+A*T,e[4]=p*S+q*O+x*G,e[5]=d*S+w*O+P*G,e[6]=m*S+v*O+y*G,e[7]=g*S+E*O+A*G,e[8]=p*R+q*D+x*V,e[9]=d*R+w*D+P*V,e[10]=m*R+v*D+y*V,e[11]=g*R+E*D+A*V,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e};Sc.exports=G3});var Oc=u((Vk,kc)=>{var{sin:I3,cos:X3}=J(),$3=(e,t,r)=>{let n=I3(r),s=X3(r),o=t[4],i=t[5],c=t[6],a=t[7],l=t[8],f=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+l*n,e[5]=i*s+f*n,e[6]=c*s+h*n,e[7]=a*s+p*n,e[8]=l*s-o*n,e[9]=f*s-i*n,e[10]=h*s-c*n,e[11]=p*s-a*n,e};kc.exports=$3});var Fc=u((Fk,Vc)=>{var{sin:Y3,cos:L3}=J(),U3=(e,t,r)=>{let n=Y3(r),s=L3(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[8],f=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-l*n,e[1]=i*s-f*n,e[2]=c*s-h*n,e[3]=a*s-p*n,e[8]=o*n+l*s,e[9]=i*n+f*s,e[10]=c*n+h*s,e[11]=a*n+p*s,e};Vc.exports=U3});var Rc=u((Nk,Nc)=>{var{sin:H3,cos:W3}=J(),_3=(e,t,r)=>{let n=H3(r),s=W3(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[4],f=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+l*n,e[1]=i*s+f*n,e[2]=c*s+h*n,e[3]=a*s+p*n,e[4]=l*s-o*n,e[5]=f*s-i*n,e[6]=h*s-c*n,e[7]=p*s-a*n,e};Nc.exports=_3});var zc=u((Rk,Bc)=>{var K3=(e,t,r)=>{let n=r[0],s=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};Bc.exports=K3});var Dc=u((Bk,Cc)=>{var Q3=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e);Cc.exports=Q3});var Gc=u((zk,Zc)=>{var J3=e=>e.map(t=>t.toFixed(7)).toString();Zc.exports=J3});var Xc=u((Ck,Ic)=>{var j3=(e,t,r)=>{let n=r[0],s=r[1],o=r[2],i,c,a,l,f,h,p,d,m,g,q,w;return t===e?(e[12]=t[0]*n+t[4]*s+t[8]*o+t[12],e[13]=t[1]*n+t[5]*s+t[9]*o+t[13],e[14]=t[2]*n+t[6]*s+t[10]*o+t[14],e[15]=t[3]*n+t[7]*s+t[11]*o+t[15]):(i=t[0],c=t[1],a=t[2],l=t[3],f=t[4],h=t[5],p=t[6],d=t[7],m=t[8],g=t[9],q=t[10],w=t[11],e[0]=i,e[1]=c,e[2]=a,e[3]=l,e[4]=f,e[5]=h,e[6]=p,e[7]=d,e[8]=m,e[9]=g,e[10]=q,e[11]=w,e[12]=i*n+f*s+m*o+t[12],e[13]=c*n+h*s+g*o+t[13],e[14]=a*n+p*s+q*o+t[14],e[15]=l*n+d*s+w*o+t[15]),e};Ic.exports=j3});var Y=u((Dk,$c)=>{$c.exports={add:Lo(),clone:Wo(),copy:fn(),create:or(),invert:Qo(),equals:jo(),fromRotation:pn(),fromScaling:ii(),fromTaitBryanRotation:ai(),fromTranslation:ui(),fromValues:hi(),fromVectorRotation:uc(),fromXRotation:hc(),fromYRotation:dc(),fromZRotation:mc(),identity:hn(),isIdentity:xc(),isOnlyTransformScale:vc(),isMirroring:Ec(),mirrorByPlane:Ac(),multiply:Mc(),rotate:Tc(),rotateX:Oc(),rotateY:Fc(),rotateZ:Rc(),scale:zc(),subtract:Dc(),toString:Gc(),translate:Xc()}});var Pt=u((Zk,Yc)=>{var ex=Y(),tx=e=>(e===void 0&&(e=[]),{sides:e,transforms:ex.create()});Yc.exports=tx});var Uc=u((Gk,Lc)=>{var rx=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e);Lc.exports=rx});var Wc=u((Ik,Hc)=>{var nx=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e);Hc.exports=nx});var cr=u((Xk,_c)=>{var sx=e=>Math.atan2(e[1],e[0]);_c.exports=sx});var Qc=u(($k,Kc)=>{Kc.exports=cr()});var jc=u((Yk,Jc)=>{var ox=cr(),ix=e=>ox(e)*57.29577951308232;Jc.exports=ix});var At=u((Lk,ea)=>{var cx=()=>[0,0];ea.exports=cx});var ra=u((Uk,ta)=>{var ax=At(),lx=e=>{let t=ax();return t[0]=e[0],t[1]=e[1],t};ta.exports=lx});var sa=u((Hk,na)=>{var ux=(e,t)=>(e[0]=t[0],e[1]=t[1],e);na.exports=ux});var ia=u((Wk,oa)=>{var fx=(e,t,r)=>(e[0]=0,e[1]=0,e[2]=t[0]*r[1]-t[1]*r[0],e);oa.exports=fx});var aa=u((_k,ca)=>{var hx=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)};ca.exports=hx});var ua=u((Kk,la)=>{var px=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e);la.exports=px});var ha=u((Qk,fa)=>{var dx=(e,t)=>e[0]*t[0]+e[1]*t[1];fa.exports=dx});var da=u((Jk,pa)=>{var gx=(e,t)=>e[0]===t[0]&&e[1]===t[1];pa.exports=gx});var Mn=u((jk,ga)=>{var{sin:mx,cos:qx}=J(),xx=(e,t)=>(e[0]=qx(t),e[1]=mx(t),e);ga.exports=xx});var qa=u((eO,ma)=>{var wx=Mn(),vx=(e,t)=>wx(e,t*.017453292519943295);ma.exports=vx});var wa=u((tO,xa)=>{var yx=(e,t)=>(e[0]=t,e[1]=t,e);xa.exports=yx});var ya=u((rO,va)=>{var Ex=At(),Px=(e,t)=>{let r=Ex();return r[0]=e,r[1]=t,r};va.exports=Px});var Pa=u((nO,Ea)=>{var Ax=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]);Ea.exports=Ax});var ba=u((sO,Aa)=>{var bx=(e,t,r,n)=>{let s=t[0],o=t[1];return e[0]=s+n*(r[0]-s),e[1]=o+n*(r[1]-o),e};Aa.exports=bx});var Sa=u((oO,Ma)=>{var Mx=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e);Ma.exports=Mx});var ka=u((iO,Ta)=>{var Sx=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e);Ta.exports=Sx});var Va=u((cO,Oa)=>{var Tx=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e);Oa.exports=Tx});var Na=u((aO,Fa)=>{var kx=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e);Fa.exports=kx});var Sn=u((lO,Ra)=>{var Ox=(e,t,r,n)=>{let s=t[0]-r[0],o=t[1]-r[1],i=Math.cos(n),c=Math.sin(n);return e[0]=s*i-o*c+r[0],e[1]=s*c+o*i+r[1],e};Ra.exports=Ox});var za=u((uO,Ba)=>{var{TAU:Vx}=I(),Fx=At(),Nx=Sn(),Rx=(e,t)=>Nx(e,t,Fx(),Vx/4);Ba.exports=Rx});var Da=u((fO,Ca)=>{var Bx=(e,t)=>{let r=t[0],n=t[1],s=r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e};Ca.exports=Bx});var Ga=u((hO,Za)=>{var zx=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e);Za.exports=zx});var Xa=u((pO,Ia)=>{var Cx=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e);Ia.exports=Cx});var Ya=u((dO,$a)=>{var Dx=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n};$a.exports=Dx});var Ua=u((gO,La)=>{var Zx=e=>{let t=e[0],r=e[1];return t*t+r*r};La.exports=Zx});var Wa=u((mO,Ha)=>{var Gx=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e);Ha.exports=Gx});var Ka=u((qO,_a)=>{var Ix=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}]`;_a.exports=Ix});var Ja=u((xO,Qa)=>{var Xx=(e,t,r)=>{let n=t[0],s=t[1];return e[0]=r[0]*n+r[4]*s+r[12],e[1]=r[1]*n+r[5]*s+r[13],e};Qa.exports=Xx});var Z=u((wO,ja)=>{ja.exports={abs:Uc(),add:Wc(),angle:Qc(),angleDegrees:jc(),angleRadians:cr(),clone:ra(),copy:sa(),create:At(),cross:ia(),distance:aa(),divide:ua(),dot:ha(),equals:da(),fromAngleDegrees:qa(),fromAngleRadians:Mn(),fromScalar:wa(),fromValues:ya(),length:Pa(),lerp:ba(),max:Sa(),min:ka(),multiply:Va(),negate:Na(),normal:za(),normalize:Da(),rotate:Sn(),scale:Ga(),snap:Xa(),squaredDistance:Ya(),squaredLength:Ua(),subtract:Wa(),toString:Ka(),transform:Ja()}});var tl=u((vO,el)=>{var Tn=Z(),$x=Pt(),Yx=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.length;if(t<3)throw new Error("the given points must define a closed geometry with three or more points");Tn.equals(e[0],e[t-1])&&--t;let r=[],n=e[t-1];for(let s=0;s<t;s++){let o=e[s];r.push([Tn.clone(n),Tn.clone(o)]),n=o}return $x(r)};el.exports=Yx});var sl=u((yO,nl)=>{var Lx=Y(),rl=Z(),Ux=Pt(),Hx=e=>{if(e[0]!==0)throw new Error("invalid compact binary data");let t=Ux();t.transforms=Lx.clone(e.slice(1,17));for(let r=21;r<e.length;r+=4){let n=rl.fromValues(e[r+0],e[r+1]),s=rl.fromValues(e[r+2],e[r+3]);t.sides.push([n,s])}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};nl.exports=Hx});var kn=u((EO,ol)=>{var Wx=e=>!!(e&&typeof e=="object"&&"sides"in e&&"transforms"in e&&Array.isArray(e.sides)&&"length"in e.transforms);ol.exports=Wx});var al=u((PO,cl)=>{var il=Y(),ar=Z(),_x=e=>(il.isIdentity(e.transforms)||(e.sides=e.sides.map(t=>{let r=ar.transform(ar.create(),t[0],e.transforms),n=ar.transform(ar.create(),t[1],e.transforms);return[r,n]}),e.transforms=il.create()),e);cl.exports=_x});var We=u((AO,ll)=>{var Kx=al(),Qx=e=>Kx(e).sides;ll.exports=Qx});var fl=u((bO,ul)=>{var Jx=Pt(),jx=We(),ew=e=>{let r=jx(e).map(n=>[n[1],n[0]]);return r.reverse(),Jx(r)};ul.exports=ew});var On=u((MO,hl)=>{var bt=Z(),tw=We(),rw=e=>{let t=new Map,r=n=>{let s=n.toString();return t.has(s)?t.get(s):(t.set(s,n),n)};return e.map(n=>n.map(r))},nw=e=>{let t=new Map;return rw(e).forEach(n=>{t.has(n[0])?t.get(n[0]).push(n):t.set(n[0],[n])}),t},sw=e=>{let t=nw(tw(e)),r=[];for(;;){let n;for(let[i,c]of t){if(n=c.shift(),!n){t.delete(i);continue}break}if(n===void 0)break;let s=[],o=n[0];for(;;){s.push(n[0]);let i=n[1];if(i===o)break;let c=t.get(i);if(!c)throw new Error(`geometry is not closed at vertex ${i}`);let a=ow(n,c);c.length===0&&t.delete(i),n=a}s.length>0&&s.push(s.shift()),r.push(s)}return t.clear(),r},ow=(e,t)=>{if(t.length===1)return t.pop();let r=bt.create(),n=bt.angleDegrees(bt.subtract(r,e[1],e[0])),s,o;t.forEach((c,a)=>{let f=bt.angleDegrees(bt.subtract(r,c[1],c[0]))-n;f<-180&&(f+=360),f>=180&&(f-=360),(o===void 0||f>s)&&(o=a,s=f)});let i=t[o];return t.splice(o,1),i};hl.exports=sw});var dl=u((SO,pl)=>{var iw=We(),cw=e=>{let r=iw(e).map(n=>n[0]);return r.length>0&&r.push(r.shift()),r};pl.exports=cw});var ql=u((TO,ml)=>{var gl=Z(),aw=We(),lw=e=>{let t=aw(e),r="geom2 ("+t.length+` sides):
[
`;return t.forEach(n=>{r+="  ["+gl.toString(n[0])+", "+gl.toString(n[1])+`]
`}),r+=`]
`,r};ml.exports=lw});var wl=u((kO,xl)=>{var uw=e=>{let t=e.sides,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(1+16+4+t.length*4);s[0]=0,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=n[0],s[18]=n[1],s[19]=n[2],s[20]=n[3];for(let o=0;o<t.length;o++){let i=o*4+21,c=t[o][0],a=t[o][1];s[i+0]=c[0],s[i+1]=c[1],s[i+2]=a[0],s[i+3]=a[1]}return s};xl.exports=uw});var El=u((OO,yl)=>{var vl=Y(),fw=(e,t)=>{let r=vl.multiply(vl.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};yl.exports=fw});var Al=u((VO,Pl)=>{var hw=Z(),pw=kn(),dw=On(),gw=e=>{if(!pw(e))throw new Error("invalid geom2 structure");if(dw(e),e.sides.forEach(t=>{if(hw.equals(t[0],t[1]))throw new Error(`geom2 self-edge ${t[0]}`)}),!e.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${e.transforms}`)};Pl.exports=gw});var z=u((FO,bl)=>{bl.exports={clone:$o(),create:Pt(),fromPoints:tl(),fromCompactBinary:sl(),isA:kn(),reverse:fl(),toOutlines:On(),toPoints:dl(),toSides:We(),toString:ql(),toCompactBinary:wl(),transform:El(),validate:Al()}});var Sl=u((NO,Ml)=>{var mw=e=>Object.assign({},e);Ml.exports=mw});var Mt=u((RO,Tl)=>{var qw=Y(),xw=e=>(e===void 0&&(e=[]),{polygons:e,transforms:qw.create()});Tl.exports=xw});var Be=u((BO,kl)=>{var ww=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});kl.exports=ww});var Vl=u((zO,Ol)=>{var vw=Be(),yw=F(),Ew=(...e)=>{let t,r;return e.length===1?(t=vw(),r=e[0]):(t=e[0],r=e[1]),t.vertices=r.vertices.map(n=>yw.clone(n)),t};Ol.exports=Ew});var Nl=u((CO,Fl)=>{var Pw=F(),Aw=Be(),bw=e=>{let t=e.map(r=>Pw.clone(r));return Aw(t)};Fl.exports=bw});var Bl=u((DO,Rl)=>{var Mw=Be(),Sw=(e,t)=>{let r=Mw(e);return r.plane=t,r};Rl.exports=Sw});var St=u((ZO,zl)=>{var Tw=()=>[0,0,0,0];zl.exports=Tw});var Vn=u((GO,Cl)=>{var kw=St(),Ow=e=>{let t=kw();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Cl.exports=Ow});var Fn=u((IO,Dl)=>{var Vw=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e);Dl.exports=Vw});var Nn=u((XO,Zl)=>{var Fw=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3];Zl.exports=Fw});var Rn=u(($O,Gl)=>{var Nw=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e);Gl.exports=Nw});var Xl=u((YO,Il)=>{var Bn=F(),Rw=(e,t,r)=>{let n=Bn.normalize(Bn.create(),t),s=Bn.dot(r,n);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=s,e};Il.exports=Rw});var zn=u((LO,$l)=>{var Bw=St(),zw=(e,t,r,n)=>{let s=Bw();return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s};$l.exports=zw});var Cn=u((UO,Yl)=>{var pe=F(),Cw=(e,...t)=>{let r=t.length,n=pe.create(),s=pe.create(),o=i=>{let c=t[i],a=t[(i+1)%r],l=t[(i+2)%r];return pe.subtract(n,a,c),pe.subtract(s,l,c),pe.cross(n,n,s),pe.normalize(n,n),n};return e[0]=0,e[1]=0,e[2]=0,r===3?pe.copy(e,o(0)):(t.forEach((i,c)=>{pe.add(e,e,o(c))}),pe.normalize(e,e)),e[3]=pe.dot(e,t[0]),e};Yl.exports=Cw});var Ul=u((HO,Ll)=>{var{EPS:Dn}=I(),se=F(),Dw=(e,t,r,n)=>{let s=se.subtract(se.create(),r,t),o=se.subtract(se.create(),n,t);se.length(s)<Dn&&(s=se.orthogonal(s,o)),se.length(o)<Dn&&(o=se.orthogonal(o,s));let i=se.cross(se.create(),s,o);se.length(i)<Dn&&(o=se.orthogonal(o,s),i=se.cross(i,s,o)),i=se.normalize(i,i);let c=se.dot(i,t);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=c,e};Ll.exports=Dw});var Wl=u((WO,Hl)=>{var Zw=F(),Gw=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]-e[3],n=t[0]-r*e[0],s=t[1]-r*e[1],o=t[2]-r*e[2];return Zw.fromValues(n,s,o)};Hl.exports=Gw});var Zn=u((_O,_l)=>{var Iw=F(),Xw=(e,t)=>Iw.dot(e,t)-e[3];_l.exports=Xw});var Gn=u((KO,Kl)=>{var $w=e=>`(${e[0].toFixed(9)}, ${e[1].toFixed(9)}, ${e[2].toFixed(9)}, ${e[3].toFixed(9)})`;Kl.exports=$w});var Jl=u((QO,Ql)=>{var Yw=Y(),oe=F(),Lw=Cn(),Uw=Rn(),Hw=(e,t,r)=>{let n=Yw.isMirroring(r),s=oe.orthogonal(oe.create(),t),o=oe.cross(s,t,s),i=oe.cross(oe.create(),t,o),c=oe.fromScalar(oe.create(),t[3]);oe.multiply(c,c,t);let a=oe.add(oe.create(),c,o),l=oe.add(oe.create(),c,i);return c=oe.transform(c,c,r),a=oe.transform(a,a,r),l=oe.transform(l,l,r),Lw(e,c,a,l),n&&Uw(e,e),e};Ql.exports=Hw});var fe=u((JO,jl)=>{jl.exports={clone:Vn(),copy:Fn(),create:St(),equals:Nn(),flip:Rn(),fromNormalAndPoint:Xl(),fromValues:zn(),fromPoints:Cn(),fromPointsRandom:Ul(),projectionOfPoint:Wl(),signedDistanceToPoint:Zn(),toString:Gn(),transform:Jl()}});var r1=u((jO,t1)=>{var e1=fe(),Ww=Be(),_w=e=>{let t=e.vertices.slice().reverse(),r=Ww(t);return e.plane&&(r.plane=e1.flip(e1.create(),e.plane)),r};t1.exports=_w});var In=u((eV,n1)=>{var Kw=e=>!!(e&&typeof e=="object"&&"vertices"in e&&Array.isArray(e.vertices));n1.exports=Kw});var Xn=u((tV,o1)=>{var s1=fe(),ze=F(),Qw=e=>Jw(e.vertices),Jw=e=>{let t=e.length;if(t>2){let r=s1.fromPoints(s1.create(),...e),n=e[t-2],s=e[t-1];for(let o=0;o<t;o++){let i=e[o];if(!jw(n,s,i,r))return!1;n=s,s=i}}return!0},jw=(e,t,r,n)=>{let s=ze.cross(ze.create(),ze.subtract(ze.create(),t,e),ze.subtract(ze.create(),r,t));return ze.dot(s,n)>=0};o1.exports=Qw});var lr=u((rV,c1)=>{var i1=fe(),ev=e=>(e.plane||(e.plane=i1.fromPoints(i1.create(),...e.vertices)),e.plane);c1.exports=ev});var $n=u((nV,a1)=>{var tv=lr(),rv=e=>{let t=e.vertices.length;if(t<3)return 0;let r=e.vertices,n=tv(e),s=Math.abs(n[0]),o=Math.abs(n[1]),i=Math.abs(n[2]);if(s+o+i===0)return 0;let c=3;s>o&&s>i?c=1:o>i&&(c=2);let a=0,l=0,f=1,h=2;switch(c){case 1:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][1]*(r[h][2]-r[l][2]);a+=r[0][1]*(r[1][2]-r[t-1][2]),a/=2*n[0];break;case 2:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][2]*(r[h][0]-r[l][0]);a+=r[0][2]*(r[1][0]-r[t-1][0]),a/=2*n[1];break;case 3:default:for(f=1;f<t;f++)l=f-1,h=(f+1)%t,a+=r[f][0]*(r[h][1]-r[l][1]);a+=r[0][0]*(r[1][1]-r[t-1][1]),a/=2*n[2];break}return a};a1.exports=rv});var u1=u((sV,l1)=>{var Tt=F(),nv=e=>{let t=e.vertices,r=t.length,n=r===0?Tt.create():Tt.clone(t[0]),s=Tt.clone(n);for(let o=1;o<r;o++)Tt.min(n,n,t[o]),Tt.max(s,s,t[o]);return[n,s]};l1.exports=nv});var h1=u((oV,f1)=>{var sv=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3];f1.exports=sv});var d1=u((iV,p1)=>{var ov=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e[3]=t,e);p1.exports=ov});var m1=u((cV,g1)=>{var iv=(e,t,r)=>{let[n,s,o,i]=t;return e[0]=r[0]*n+r[4]*s+r[8]*o+r[12]*i,e[1]=r[1]*n+r[5]*s+r[9]*o+r[13]*i,e[2]=r[2]*n+r[6]*s+r[10]*o+r[14]*i,e[3]=r[3]*n+r[7]*s+r[11]*o+r[15]*i,e};g1.exports=iv});var Yn=u((aV,q1)=>{q1.exports={clone:Vn(),copy:Fn(),create:St(),dot:h1(),equals:Nn(),fromScalar:d1(),fromValues:zn(),toString:Gn(),transform:m1()}});var v1=u((lV,w1)=>{var cv=Yn(),x1=new WeakMap,av=e=>{let t=x1.get(e);if(t)return t;let r=e.vertices,n=cv.create();if(r.length===0)return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n;let s=r[0],o=s,i=s,c=s,a=s,l=s;r.forEach(d=>{s[0]>d[0]&&(s=d),o[1]>d[1]&&(o=d),i[2]>d[2]&&(i=d),c[0]<d[0]&&(c=d),a[1]<d[1]&&(a=d),l[2]<d[2]&&(l=d)}),n[0]=(s[0]+c[0])*.5,n[1]=(o[1]+a[1])*.5,n[2]=(i[2]+l[2])*.5;let f=n[0]-c[0],h=n[1]-a[1],p=n[2]-l[2];return n[3]=Math.sqrt(f*f+h*h+p*p),x1.set(e,n),n};w1.exports=av});var E1=u((uV,y1)=>{var Ln=F(),lv=e=>{let t=0,r=e.vertices,n=Ln.create();for(let s=0;s<r.length-2;s++)Ln.cross(n,r[s+1],r[s+2]),t+=Ln.dot(r[0],n);return t/=6,t};y1.exports=lv});var A1=u((fV,P1)=>{var uv=e=>e.vertices;P1.exports=uv});var M1=u((hV,b1)=>{var fv=F(),hv=e=>{let t="poly3: vertices: [";return e.vertices.forEach(r=>{t+=`${fv.toString(r)}, `}),t+="]",t};b1.exports=hv});var k1=u((pV,T1)=>{var pv=Y(),S1=F(),dv=Be(),gv=(e,t)=>{let r=t.vertices.map(n=>S1.transform(S1.create(),n,e));return pv.isMirroring(e)&&r.reverse(),dv(r)};T1.exports=gv});var V1=u((dV,O1)=>{var mv=Zn(),{NEPS:qv}=I(),xv=F(),wv=In(),vv=Xn(),yv=$n(),Ev=lr(),Pv=e=>{if(!wv(e))throw new Error("invalid poly3 structure");if(e.vertices.length<3)throw new Error(`poly3 not enough vertices ${e.vertices.length}`);if(yv(e)<=0)throw new Error("poly3 area must be greater than zero");for(let t=0;t<e.vertices.length;t++)if(xv.equals(e.vertices[t],e.vertices[(t+1)%e.vertices.length]))throw new Error(`poly3 duplicate vertex ${e.vertices[t]}`);if(!vv(e))throw new Error("poly3 must be convex");if(e.vertices.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${t}`)}),e.vertices.length>3){let t=Ev(e);e.vertices.forEach(r=>{let n=Math.abs(mv(t,r));if(n>qv)throw new Error(`poly3 must be coplanar: vertex ${r} distance ${n}`)})}};O1.exports=Pv});var X=u((gV,F1)=>{F1.exports={clone:Vl(),create:Be(),fromPoints:Nl(),fromPointsAndPlane:Bl(),invert:r1(),isA:In(),isConvex:Xn(),measureArea:$n(),measureBoundingBox:u1(),measureBoundingSphere:v1(),measureSignedVolume:E1(),plane:lr(),toPoints:A1(),toString:M1(),transform:k1(),validate:V1()}});var R1=u((mV,N1)=>{var Av=X(),bv=Mt(),Mv=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.map((n,s)=>Av.create(n));return bv(t)};N1.exports=Mv});var z1=u((qV,B1)=>{var Sv=F(),Tv=Y(),kv=X(),Ov=Mt(),Vv=e=>{if(e[0]!==1)throw new Error("invalid compact binary data");let t=Ov();t.transforms=Tv.clone(e.slice(1,17));let r=e[21],n=22,s=e.length-r*3;for(;s<e.length;){let o=e[n];n++;let i=[];for(let c=0;c<o;c++)i.push(Sv.fromValues(e[s],e[s+1],e[s+2])),s+=3;t.polygons.push(kv.create(i))}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};B1.exports=Vv});var Z1=u((xV,D1)=>{var C1=Y(),Fv=X(),Nv=e=>(C1.isIdentity(e.transforms)||(e.polygons=e.polygons.map(t=>Fv.transform(e.transforms,t)),e.transforms=C1.create()),e);D1.exports=Nv});var kt=u((wV,G1)=>{var Rv=Z1(),Bv=e=>Rv(e).polygons;G1.exports=Bv});var X1=u((vV,I1)=>{var zv=X(),Cv=Mt(),Dv=kt(),Zv=e=>{let r=Dv(e).map(n=>zv.invert(n));return Cv(r)};I1.exports=Zv});var Un=u((yV,$1)=>{var Gv=e=>!!(e&&typeof e=="object"&&"polygons"in e&&"transforms"in e&&Array.isArray(e.polygons)&&"length"in e.transforms);$1.exports=Gv});var L1=u((EV,Y1)=>{var Iv=X(),Xv=kt(),$v=e=>Xv(e).map(n=>Iv.toPoints(n));Y1.exports=$v});var H1=u((PV,U1)=>{var Yv=X(),Lv=kt(),Uv=e=>{let t=Lv(e),r="geom3 ("+t.length+` polygons):
`;return t.forEach(n=>{r+="  "+Yv.toString(n)+`
`}),r};U1.exports=Uv});var _1=u((AV,W1)=>{var Hv=X(),Wv=e=>{let t=e.polygons,r=e.transforms,n=t.length,s=t.reduce((l,f)=>l+f.vertices.length,0),o=[-1,-1,-1,-1];e.color&&(o=e.color);let i=new Float32Array(1+16+4+1+n+s*3);i[0]=1,i[1]=r[0],i[2]=r[1],i[3]=r[2],i[4]=r[3],i[5]=r[4],i[6]=r[5],i[7]=r[6],i[8]=r[7],i[9]=r[8],i[10]=r[9],i[11]=r[10],i[12]=r[11],i[13]=r[12],i[14]=r[13],i[15]=r[14],i[16]=r[15],i[17]=o[0],i[18]=o[1],i[19]=o[2],i[20]=o[3],i[21]=s;let c=22,a=c+n;return t.forEach(l=>{let f=Hv.toPoints(l);i[c]=f.length,c++;for(let h=0;h<f.length;h++){let p=f[h];i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],a+=3}}),i};W1.exports=Wv});var J1=u((bV,Q1)=>{var K1=Y(),_v=(e,t)=>{let r=K1.multiply(K1.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};Q1.exports=_v});var eu=u((MV,j1)=>{var Kv=X(),Qv=Un(),Jv=e=>{if(!Qv(e))throw new Error("invalid geom3 structure");if(e.polygons.forEach(Kv.validate),jv(e),!e.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${e.transforms}`)},jv=e=>{let t=new Map;e.polygons.forEach(({vertices:n})=>{n.forEach((s,o)=>{let i=`${s}`,c=`${n[(o+1)%n.length]}`,a=`${i}/${c}`,l=t.has(a)?t.get(a):0;t.set(a,l+1)})});let r=[];if(t.forEach((n,s)=>{let o=s.split("/").reverse().join("/"),i=t.get(o);n!==i&&r.push(s.replace("/"," -> "))}),r.length>0)throw new Error(`non-manifold edges ${r.length}
${r.join(`
`)}`)};j1.exports=Jv});var C=u((SV,tu)=>{tu.exports={clone:Sl(),create:Mt(),fromPoints:R1(),fromCompactBinary:z1(),invert:X1(),isA:Un(),toPoints:L1(),toPolygons:kt(),toString:H1(),toCompactBinary:_1(),transform:J1(),validate:eu()}});var ur=u((TV,ru)=>{var ey=e=>Object.assign({},e);ru.exports=ey});var Hn=u((kV,su)=>{var{EPS:nu}=I(),ty=Z(),ry=ur(),ny=e=>{if(e.isClosed)return e;let t=ry(e);if(t.isClosed=!0,t.points.length>1){let r=t.points,n=r[0],s=r[r.length-1];for(;ty.distance(n,s)<nu*nu&&(r.pop(),r.length!==1);)s=r[r.length-1]}return t};su.exports=ny});var Ot=u((OV,ou)=>{var sy=Y(),oy=e=>(e===void 0&&(e=[]),{points:e,isClosed:!1,transforms:sy.create()});ou.exports=oy});var fr=u((VV,au)=>{var{EPS:iu}=I(),cu=Z(),iy=Hn(),cy=Ot(),ay=(e,t)=>{let r={closed:!1},{closed:n}=Object.assign({},r,e),s=cy();if(s.points=t.map(o=>cu.clone(o)),s.points.length>1){let o=s.points[0],i=s.points[s.points.length-1];cu.distance(o,i)<iu*iu&&(n=!0)}return n===!0&&(s=iy(s)),s};au.exports=ay});var hu=u((FV,fu)=>{var lu=Y(),uu=Z(),ly=e=>(lu.isIdentity(e.transforms)||(e.points=e.points.map(t=>uu.transform(uu.create(),t,e.transforms)),e.transforms=lu.create()),e);fu.exports=ly});var Ce=u((NV,pu)=>{var uy=hu(),fy=e=>uy(e).points;pu.exports=fy});var gu=u((RV,du)=>{var{TAU:hr}=I(),_=Z(),hy=fr(),py=Ce(),dy=(e,t)=>{let r={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16},{endpoint:n,radius:s,xaxisrotation:o,clockwise:i,large:c,segments:a}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=_.clone(n),!Array.isArray(s))throw new Error("radius must be an array of X and Y values");if(s.length<2)throw new Error("radius must contain X and Y values");if(a<4)throw new Error("segments must be four or more");let l=1e5;if(t.isClosed)throw new Error("the given path cannot be closed");let f=py(t);if(f.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let h=s[0],p=s[1],d=f[f.length-1];h=Math.round(h*l)/l,p=Math.round(p*l)/l,n=_.fromValues(Math.round(n[0]*l)/l,Math.round(n[1]*l)/l);let m=!i,g=[];if(h===0||p===0)g.push(n);else{h=Math.abs(h),p=Math.abs(p);let w=o,v=Math.cos(w),E=Math.sin(w),x=_.subtract(_.create(),d,n);_.scale(x,x,.5);let P=Math.round((v*x[0]+E*x[1])*l)/l,y=Math.round((-E*x[0]+v*x[1])*l)/l,A=_.fromValues(P,y),b=A[0]*A[0]/(h*h)+A[1]*A[1]/(p*p);if(b>1){let ne=Math.sqrt(b);h*=ne,p*=ne,h=Math.round(h*l)/l,p=Math.round(p*l)/l}let M=Math.sqrt((h*h*p*p-h*h*A[1]*A[1]-p*p*A[0]*A[0])/(h*h*A[1]*A[1]+p*p*A[0]*A[0]));m===c&&(M=-M);let T=_.fromValues(h*A[1]/p,-p*A[0]/h);_.scale(T,T,M);let S=_.fromValues(v*T[0]-E*T[1],E*T[0]+v*T[1]);S=_.add(S,S,_.scale(_.create(),_.add(_.create(),d,n),.5));let O=_.fromValues((A[0]-T[0])/h,(A[1]-T[1])/p),G=_.fromValues((-A[0]-T[0])/h,(-A[1]-T[1])/p),R=_.angleRadians(O),V=_.angleRadians(G)-R;V=V%hr,!m&&V>0?V-=hr:m&&V<0&&(V+=hr);let ee=Math.ceil(Math.abs(V)/hr*a)+1;ee<1&&(ee=1);for(let ne=1;ne<ee;ne++){let Pe=R+ne/ee*V,wt=Math.cos(Pe),rr=Math.sin(Pe),Ue=_.fromValues(v*h*wt-E*p*rr,E*h*wt+v*p*rr);_.add(Ue,Ue,S),g.push(Ue)}ee&&g.push(e.endpoint)}return g=f.concat(g),hy({},g)};du.exports=dy});var Wn=u((BV,mu)=>{var gy=fr(),my=Ce(),{equals:qy}=Z(),xy=(...e)=>{let t=!1,r=[];return e.forEach((n,s)=>{let o=my(n).slice();if(r.length>0&&o.length>0&&qy(o[0],r[r.length-1])&&o.shift(),o.length>0&&t)throw new Error(`Cannot concatenate to a closed path; check the ${s}th path`);t=n.isClosed,r=r.concat(o)}),gy({closed:t},r)};mu.exports=xy});var _n=u((zV,qu)=>{var wy=Wn(),vy=Ot(),yy=(e,t)=>wy(t,vy(e));qu.exports=yy});var wu=u((CV,xu)=>{var{TAU:Ey}=I(),le=Z(),Py=Z(),Ay=_n(),by=Ce(),My=(e,t)=>{let r={segments:16},{controlPoints:n,segments:s}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(s<4)throw new Error("segments must be four or more");if(t.isClosed)throw new Error("the given geometry cannot be closed");let o=by(t);if(o.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),n[0]===null){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let y=o[o.length-2];if("lastBezierControlPoint"in t&&(y=t.lastBezierControlPoint),!Array.isArray(y))throw new Error("the given path must contain TWO or more points if given a null control point");let A=le.scale(le.create(),o[o.length-1],2);le.subtract(A,A,y),n[0]=A}n.unshift(o[o.length-1]);let c=n.length-1,a=[],l=1;for(let y=0;y<=c;++y)y>0&&(l*=y),a.push(l);let f=[];for(let y=0;y<=c;++y){let A=a[c]/(a[y]*a[c-y]);f.push(A)}let h=le.create(),p=le.create(),d=Py.create(),m=y=>{let A=1,b=Math.pow(1-y,c),M=y!==1?1/(1-y):1,T=le.create();for(let S=0;S<=c;++S){S===c&&(b=1);let O=f[S]*A*b,G=le.scale(h,n[S],O);le.add(T,T,G),A*=y,b*=M}return T},g=[],q=[],w=c+1;for(let y=0;y<w;++y){let A=y/(w-1),b=m(A);g.push(b),q.push(A)}let v=1,E=Ey/s,x=Math.sin(E);for(;v<g.length-1;){let y=le.subtract(h,g[v],g[v-1]);le.normalize(y,y);let A=le.subtract(p,g[v+1],g[v]);le.normalize(A,A);let b=le.cross(d,y,A);if(Math.abs(b[2])>x){let M=q[v-1],T=q[v+1],S=M+(T-M)*1/3,O=M+(T-M)*2/3,G=m(S),R=m(O);g.splice(v,1,G,R),q.splice(v,1,S,O),v--,v<1&&(v=1)}else++v}g.shift();let P=Ay(g,t);return P.lastBezierControlPoint=n[n.length-2],P};xu.exports=My});var Eu=u((DV,yu)=>{var Sy=Z(),vu=Ce(),Ty=(e,t)=>{if(e.isClosed!==t.isClosed||e.points.length!==t.points.length)return!1;let r=vu(e),n=vu(t),s=r.length,o=0;do{let i=!1;for(let c=0;c<s;c++)if(!Sy.equals(r[c],n[(c+o)%s])){i=!0;break}if(i===!1)return!0;if(!e.isClosed)return!1}while(++o<s);return!1};yu.exports=Ty});var Au=u((ZV,Pu)=>{var ky=Y(),Oy=Z(),Vy=Ot(),Fy=e=>{if(e[0]!==2)throw new Error("invalid compact binary data");let t=Vy();t.transforms=ky.clone(e.slice(1,17)),t.isClosed=!!e[17];for(let r=22;r<e.length;r+=2){let n=Oy.fromValues(e[r],e[r+1]);t.points.push(n)}return e[18]>=0&&(t.color=[e[18],e[19],e[20],e[21]]),t};Pu.exports=Fy});var Kn=u((GV,bu)=>{var Ny=e=>!!(e&&typeof e=="object"&&"points"in e&&"transforms"in e&&"isClosed"in e&&Array.isArray(e.points)&&"length"in e.transforms);bu.exports=Ny});var Su=u((IV,Mu)=>{var Ry=ur(),By=e=>{let t=Ry(e);return t.points=e.points.slice().reverse(),t};Mu.exports=By});var ku=u((XV,Tu)=>{var zy=Z(),Cy=Ce(),Dy=e=>{let t=Cy(e),r="path ("+t.length+" points, "+e.isClosed+`):
[
`;return t.forEach(n=>{r+="  "+zy.toString(n)+`,
`}),r+=`]
`,r};Tu.exports=Dy});var Vu=u(($V,Ou)=>{var Zy=e=>{let t=e.points,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(1+16+1+4+t.length*2);s[0]=2,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=e.isClosed?1:0,s[18]=n[0],s[19]=n[1],s[20]=n[2],s[21]=n[3];for(let o=0;o<t.length;o++){let i=o*2+22,c=t[o];s[i]=c[0],s[i+1]=c[1]}return s};Ou.exports=Zy});var Ru=u((YV,Nu)=>{var Fu=Y(),Gy=(e,t)=>{let r=Fu.multiply(Fu.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};Nu.exports=Gy});var zu=u((LV,Bu)=>{var Iy=Z(),Xy=Kn(),$y=e=>{if(!Xy(e))throw new Error("invalid path2 structure");if(e.points.length>1){for(let t=0;t<e.points.length;t++)if(Iy.equals(e.points[t],e.points[(t+1)%e.points.length]))throw new Error(`path2 duplicate points ${e.points[t]}`)}if(e.points.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`path2 invalid point ${t}`)}),!e.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${e.transforms}`)};Bu.exports=$y});var $=u((UV,Cu)=>{Cu.exports={appendArc:gu(),appendBezier:wu(),appendPoints:_n(),clone:ur(),close:Hn(),concat:Wn(),create:Ot(),equals:Eu(),fromPoints:fr(),fromCompactBinary:Au(),isA:Kn(),reverse:Su(),toPoints:Ce(),toString:ku(),toCompactBinary:Vu(),transform:Ru(),validate:zu()}});var $u=u((HV,Xu)=>{var Yy=B(),Du=z(),Zu=C(),Gu=$(),Iu=X(),Ly=(e,t)=>{let r=Du.clone(t);return r.color=e,r},Uy=(e,t)=>{let r=Zu.clone(t);return r.color=e,r},Hy=(e,t)=>{let r=Gu.clone(t);return r.color=e,r},Wy=(e,t)=>{let r=Iu.clone(t);return r.color=e,r},_y=(e,...t)=>{if(!Array.isArray(e))throw new Error("color must be an array");if(e.length<3)throw new Error("color must contain R, G and B values");if(e.length===3&&(e=[e[0],e[1],e[2],1]),t=Yy(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>Du.isA(n)?Ly(e,n):Zu.isA(n)?Uy(e,n):Gu.isA(n)?Hy(e,n):Iu.isA(n)?Wy(e,n):(n.color=e,n));return r.length===1?r[0]:r};Xu.exports=_y});var Qn=u((WV,Yu)=>{var Ky={black:[0,0,0],silver:[.7529411764705882,.7529411764705882,.7529411764705882],gray:[.5019607843137255,.5019607843137255,.5019607843137255],white:[1,1,1],maroon:[.5019607843137255,0,0],red:[1,0,0],purple:[.5019607843137255,0,.5019607843137255],fuchsia:[1,0,1],green:[0,.5019607843137255,0],lime:[0,1,0],olive:[.5019607843137255,.5019607843137255,0],yellow:[1,1,0],navy:[0,0,.5019607843137255],blue:[0,0,1],teal:[0,.5019607843137255,.5019607843137255],aqua:[0,1,1],aliceblue:[.9411764705882353,.9725490196078431,1],antiquewhite:[.9803921568627451,.9215686274509803,.8431372549019608],aquamarine:[.4980392156862745,1,.8313725490196079],azure:[.9411764705882353,1,1],beige:[.9607843137254902,.9607843137254902,.8627450980392157],bisque:[1,.8941176470588236,.7686274509803922],blanchedalmond:[1,.9215686274509803,.803921568627451],blueviolet:[.5411764705882353,.16862745098039217,.8862745098039215],brown:[.6470588235294118,.16470588235294117,.16470588235294117],burlywood:[.8705882352941177,.7215686274509804,.5294117647058824],cadetblue:[.37254901960784315,.6196078431372549,.6274509803921569],chartreuse:[.4980392156862745,1,0],chocolate:[.8235294117647058,.4117647058823529,.11764705882352941],coral:[1,.4980392156862745,.3137254901960784],cornflowerblue:[.39215686274509803,.5843137254901961,.9294117647058824],cornsilk:[1,.9725490196078431,.8627450980392157],crimson:[.8627450980392157,.0784313725490196,.23529411764705882],cyan:[0,1,1],darkblue:[0,0,.5450980392156862],darkcyan:[0,.5450980392156862,.5450980392156862],darkgoldenrod:[.7215686274509804,.5254901960784314,.043137254901960784],darkgray:[.6627450980392157,.6627450980392157,.6627450980392157],darkgreen:[0,.39215686274509803,0],darkgrey:[.6627450980392157,.6627450980392157,.6627450980392157],darkkhaki:[.7411764705882353,.7176470588235294,.4196078431372549],darkmagenta:[.5450980392156862,0,.5450980392156862],darkolivegreen:[.3333333333333333,.4196078431372549,.1843137254901961],darkorange:[1,.5490196078431373,0],darkorchid:[.6,.19607843137254902,.8],darkred:[.5450980392156862,0,0],darksalmon:[.9137254901960784,.5882352941176471,.47843137254901963],darkseagreen:[.5607843137254902,.7372549019607844,.5607843137254902],darkslateblue:[.2823529411764706,.23921568627450981,.5450980392156862],darkslategray:[.1843137254901961,.30980392156862746,.30980392156862746],darkslategrey:[.1843137254901961,.30980392156862746,.30980392156862746],darkturquoise:[0,.807843137254902,.8196078431372549],darkviolet:[.5803921568627451,0,.8274509803921568],deeppink:[1,.0784313725490196,.5764705882352941],deepskyblue:[0,.7490196078431373,1],dimgray:[.4117647058823529,.4117647058823529,.4117647058823529],dimgrey:[.4117647058823529,.4117647058823529,.4117647058823529],dodgerblue:[.11764705882352941,.5647058823529412,1],firebrick:[.6980392156862745,.13333333333333333,.13333333333333333],floralwhite:[1,.9803921568627451,.9411764705882353],forestgreen:[.13333333333333333,.5450980392156862,.13333333333333333],gainsboro:[.8627450980392157,.8627450980392157,.8627450980392157],ghostwhite:[.9725490196078431,.9725490196078431,1],gold:[1,.8431372549019608,0],goldenrod:[.8549019607843137,.6470588235294118,.12549019607843137],greenyellow:[.6784313725490196,1,.1843137254901961],grey:[.5019607843137255,.5019607843137255,.5019607843137255],honeydew:[.9411764705882353,1,.9411764705882353],hotpink:[1,.4117647058823529,.7058823529411765],indianred:[.803921568627451,.3607843137254902,.3607843137254902],indigo:[.29411764705882354,0,.5098039215686274],ivory:[1,1,.9411764705882353],khaki:[.9411764705882353,.9019607843137255,.5490196078431373],lavender:[.9019607843137255,.9019607843137255,.9803921568627451],lavenderblush:[1,.9411764705882353,.9607843137254902],lawngreen:[.48627450980392156,.9882352941176471,0],lemonchiffon:[1,.9803921568627451,.803921568627451],lightblue:[.6784313725490196,.8470588235294118,.9019607843137255],lightcoral:[.9411764705882353,.5019607843137255,.5019607843137255],lightcyan:[.8784313725490196,1,1],lightgoldenrodyellow:[.9803921568627451,.9803921568627451,.8235294117647058],lightgray:[.8274509803921568,.8274509803921568,.8274509803921568],lightgreen:[.5647058823529412,.9333333333333333,.5647058823529412],lightgrey:[.8274509803921568,.8274509803921568,.8274509803921568],lightpink:[1,.7137254901960784,.7568627450980392],lightsalmon:[1,.6274509803921569,.47843137254901963],lightseagreen:[.12549019607843137,.6980392156862745,.6666666666666666],lightskyblue:[.5294117647058824,.807843137254902,.9803921568627451],lightslategray:[.4666666666666667,.5333333333333333,.6],lightslategrey:[.4666666666666667,.5333333333333333,.6],lightsteelblue:[.6901960784313725,.7686274509803922,.8705882352941177],lightyellow:[1,1,.8784313725490196],limegreen:[.19607843137254902,.803921568627451,.19607843137254902],linen:[.9803921568627451,.9411764705882353,.9019607843137255],magenta:[1,0,1],mediumaquamarine:[.4,.803921568627451,.6666666666666666],mediumblue:[0,0,.803921568627451],mediumorchid:[.7294117647058823,.3333333333333333,.8274509803921568],mediumpurple:[.5764705882352941,.4392156862745098,.8588235294117647],mediumseagreen:[.23529411764705882,.7019607843137254,.44313725490196076],mediumslateblue:[.4823529411764706,.40784313725490196,.9333333333333333],mediumspringgreen:[0,.9803921568627451,.6039215686274509],mediumturquoise:[.2823529411764706,.8196078431372549,.8],mediumvioletred:[.7803921568627451,.08235294117647059,.5215686274509804],midnightblue:[.09803921568627451,.09803921568627451,.4392156862745098],mintcream:[.9607843137254902,1,.9803921568627451],mistyrose:[1,.8941176470588236,.8823529411764706],moccasin:[1,.8941176470588236,.7098039215686275],navajowhite:[1,.8705882352941177,.6784313725490196],oldlace:[.9921568627450981,.9607843137254902,.9019607843137255],olivedrab:[.4196078431372549,.5568627450980392,.13725490196078433],orange:[1,.6470588235294118,0],orangered:[1,.27058823529411763,0],orchid:[.8549019607843137,.4392156862745098,.8392156862745098],palegoldenrod:[.9333333333333333,.9098039215686274,.6666666666666666],palegreen:[.596078431372549,.984313725490196,.596078431372549],paleturquoise:[.6862745098039216,.9333333333333333,.9333333333333333],palevioletred:[.8588235294117647,.4392156862745098,.5764705882352941],papayawhip:[1,.9372549019607843,.8352941176470589],peachpuff:[1,.8549019607843137,.7254901960784313],peru:[.803921568627451,.5215686274509804,.24705882352941178],pink:[1,.7529411764705882,.796078431372549],plum:[.8666666666666667,.6274509803921569,.8666666666666667],powderblue:[.6901960784313725,.8784313725490196,.9019607843137255],rosybrown:[.7372549019607844,.5607843137254902,.5607843137254902],royalblue:[.2549019607843137,.4117647058823529,.8823529411764706],saddlebrown:[.5450980392156862,.27058823529411763,.07450980392156863],salmon:[.9803921568627451,.5019607843137255,.4470588235294118],sandybrown:[.9568627450980393,.6431372549019608,.3764705882352941],seagreen:[.1803921568627451,.5450980392156862,.3411764705882353],seashell:[1,.9607843137254902,.9333333333333333],sienna:[.6274509803921569,.3215686274509804,.17647058823529413],skyblue:[.5294117647058824,.807843137254902,.9215686274509803],slateblue:[.41568627450980394,.35294117647058826,.803921568627451],slategray:[.4392156862745098,.5019607843137255,.5647058823529412],slategrey:[.4392156862745098,.5019607843137255,.5647058823529412],snow:[1,.9803921568627451,.9803921568627451],springgreen:[0,1,.4980392156862745],steelblue:[.27450980392156865,.5098039215686274,.7058823529411765],tan:[.8235294117647058,.7058823529411765,.5490196078431373],thistle:[.8470588235294118,.7490196078431373,.8470588235294118],tomato:[1,.38823529411764707,.2784313725490196],turquoise:[.25098039215686274,.8784313725490196,.8156862745098039],violet:[.9333333333333333,.5098039215686274,.9333333333333333],wheat:[.9607843137254902,.8705882352941177,.7019607843137254],whitesmoke:[.9607843137254902,.9607843137254902,.9607843137254902],yellowgreen:[.6039215686274509,.803921568627451,.19607843137254902]};Yu.exports=Ky});var Uu=u((_V,Lu)=>{var Qy=Qn(),Jy=e=>Qy[e.toLowerCase()];Lu.exports=Jy});var Wu=u((KV,Hu)=>{var jy=e=>{if(e=e.replace("#",""),e.length<6)throw new Error("the given notation must contain 3 or more hex values");let t=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,n=parseInt(e.substring(4,6),16)/255;if(e.length>=8){let s=parseInt(e.substring(6,8),16)/255;return[t,r,n,s]}return[t,r,n]};Hu.exports=jy});var Jn=u((QV,_u)=>{var e4=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(t-e)*6*r:r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e);_u.exports=e4});var Qu=u((JV,Ku)=>{var t4=B(),jn=Jn(),r4=(...e)=>{if(e=t4(e),e.length<3)throw new Error("values must contain H, S and L values");let t=e[0],r=e[1],n=e[2],s=n,o=n,i=n;if(r!==0){let c=n<.5?n*(1+r):n+r-n*r,a=2*n-c;s=jn(a,c,t+1/3),o=jn(a,c,t),i=jn(a,c,t-1/3)}if(e.length>3){let c=e[3];return[s,o,i,c]}return[s,o,i]};Ku.exports=r4});var ju=u((jV,Ju)=>{var n4=B(),s4=(...e)=>{if(e=n4(e),e.length<3)throw new Error("values must contain H, S and V values");let t=e[0],r=e[1],n=e[2],s=0,o=0,i=0,c=Math.floor(t*6),a=t*6-c,l=n*(1-r),f=n*(1-a*r),h=n*(1-(1-a)*r);switch(c%6){case 0:s=n,o=h,i=l;break;case 1:s=f,o=n,i=l;break;case 2:s=l,o=n,i=h;break;case 3:s=l,o=f,i=n;break;case 4:s=h,o=l,i=n;break;case 5:s=n,o=l,i=f;break}if(e.length>3){let p=e[3];return[s,o,i,p]}return[s,o,i]};Ju.exports=s4});var t0=u((eF,e0)=>{var o4=B(),i4=(...e)=>{if(e=o4(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0]*255,r=e[1]*255,n=e[2]*255,s=`#${Number(16777216+t*65536+r*256+n).toString(16).substring(1,7)}`;return e.length>3&&(s=s+Number(e[3]*255).toString(16)),s};e0.exports=i4});var n0=u((tF,r0)=>{var c4=B(),a4=(...e)=>{if(e=c4(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c,a=(s+o)/2;if(s===o)i=c=0;else{let l=s-o;switch(c=a>.5?l/(2-s-o):l/(s+o),s){case t:i=(r-n)/l+(r<n?6:0);break;case r:i=(n-t)/l+2;break;case n:i=(t-r)/l+4;break}i/=6}if(e.length>3){let l=e[3];return[i,c,a,l]}return[i,c,a]};r0.exports=a4});var o0=u((rF,s0)=>{var l4=B(),u4=(...e)=>{if(e=l4(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c=s,a=s-o,l=s===0?0:a/s;if(s===o)i=0;else{switch(s){case t:i=(r-n)/a+(r<n?6:0);break;case r:i=(n-t)/a+2;break;case n:i=(t-r)/a+4;break}i/=6}if(e.length>3){let f=e[3];return[i,l,c,f]}return[i,l,c]};s0.exports=u4});var c0=u((nF,i0)=>{i0.exports={colorize:$u(),colorNameToRgb:Uu(),cssColors:Qn(),hexToRgb:Wu(),hslToRgb:Qu(),hsvToRgb:ju(),hueToColorComponent:Jn(),rgbToHex:t0(),rgbToHsl:n0(),rgbToHsv:o0()}});var u0=u((sF,l0)=>{var f4=e=>{if(!Array.isArray(e))throw new Error("Bezier points must be a valid array/");if(e.length<2)throw new Error("Bezier points must contain at least 2 values.");let t=h4(e);return{points:e,pointType:t,dimensions:t==="float_single"?0:e[0].length,permutations:a0(e.length-1),tangentPermutations:a0(e.length-2)}},h4=function(e){let t=null;return e.forEach(r=>{let n="";if(Number.isFinite(r))n="float_single";else if(Array.isArray(r))r.forEach(s=>{if(!Number.isFinite(s))throw new Error("Bezier point values must all be numbers.")}),n="float_"+r.length;else throw new Error("Bezier points must all be numbers or arrays of number.");if(t==null)t=n;else if(t!==n)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")}),t},a0=function(e){let t=[];for(let r=0;r<=e;r++)t.push(es(e)/(es(r)*es(e-r)));return t},es=function(e){let t=1;for(let r=2;r<=e;r++)t*=r;return t};l0.exports=f4});var ts=u((oF,h0)=>{var p4=(e,t)=>{if(e<0||e>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if(t.pointType==="float_single")return f0(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(f0(t,s,e))}return r}},f0=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<=n;o++)s+=e.permutations[o]*Math.pow(1-r,n-o)*Math.pow(r,o)*t[o];return s};h0.exports=p4});var g0=u((iF,d0)=>{var d4=(e,t)=>{if(e<0||e>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if(t.pointType==="float_single")return p0(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(p0(t,s,e))}return r}},p0=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<n;o++){let i=n*(t[o+1]-t[o]);s+=e.tangentPermutations[o]*Math.pow(1-r,n-1-o)*Math.pow(r,o)*i}return s};d0.exports=d4});var pr=u((cF,q0)=>{var m0=ts(),g4=(e,t)=>{let r=0,n=[0],s=m0(0,t);for(let o=1;o<=e;o++){let i=m0(o/e,t);r+=m4(i,s),n.push(r),s=i}return n},m4=(e,t)=>{if(Number.isFinite(e)&&Number.isFinite(t))return Math.abs(e-t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)throw new Error("The operands must have the same number of dimensions.");let r=0;for(let n=0;n<e.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)}else throw new Error("The operands must be of the same type, either number or array.")};q0.exports=g4});var w0=u((aF,x0)=>{var q4=pr(),x4=(e,t)=>q4(e,t)[e];x0.exports=x4});var y0=u((lF,v0)=>{var w4=pr(),v4=(e,t)=>{let r={distance:0,segments:100},{distance:n,segments:s}=Object.assign({},r,e),o=w4(s,t),i=0,c=s;for(;i<=c;){let d=Math.floor(i+(c-i)/2),m=o[d]-n;if(m<0)i=d+1;else if(m>0)c=d-1;else{c=d;break}}let a=c;if(o[a]===n)return a/s;let l=o[a],h=o[a+1]-l,p=(n-l)/h;return(a+p)/s};v0.exports=v4});var P0=u((uF,E0)=>{E0.exports={create:u0(),valueAt:ts(),tangentAt:g0(),lengths:pr(),length:w0(),arcLengthToT:y0()}});var b0=u((fF,A0)=>{A0.exports={bezier:P0()}});var Vt=u((hF,M0)=>{var y4=e=>{let t=0;for(let r=0;r<e.length;r++){let n=(r+1)%e.length;t+=e[r][0]*e[n][1],t-=e[n][0]*e[r][1]}return t/2};M0.exports=y4});var rs=u((pF,S0)=>{var E4=Vt(),P4=e=>E4(e.vertices);S0.exports=P4});var ns=u((dF,T0)=>{var A4=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});T0.exports=A4});var ss=u((gF,k0)=>{var b4=ns(),M4=e=>{let t=e.vertices.slice().reverse();return b4(t)};k0.exports=M4});var V0=u((mF,O0)=>{var S4=rs(),T4=ss(),k4=(e,t)=>{if(e.length===0)return 0;let r=t.vertices;return r.length<3?0:(S4(t)<0&&(t=T4(t)),e.reduce((s,o)=>s+O4(o,r),0)===e.length?1:0)},O4=(e,t)=>{let r=t.length,n=e[0],s=e[1],o=t[r-1],i=t[0],c=o[1]>s,a=0,l=0;for(let f=r+1;--f;){let h=i[1]>s;if(c!==h){let p=o[0]>n,d=i[0]>n;(p&&d||i[0]-(i[1]-s)*(o[0]-i[0])/(o[1]-i[1])>=n)&&(a=!a)}c=h,o=i,i=t[++l]}return a};O0.exports=k4});var dr=u((qF,F0)=>{F0.exports={arePointsInside:V0(),create:ns(),flip:ss(),measureArea:rs()}});var gr=u((xF,N0)=>{N0.exports={geom2:z(),geom3:C(),path2:$(),poly2:dr(),poly3:X()}});var mr=u((wF,R0)=>{var V4=()=>[0,1,0];R0.exports=V4});var z0=u((vF,B0)=>{var F4=mr(),N4=e=>{let t=F4();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};B0.exports=N4});var qr=u((yF,C0)=>{var os=Z(),R4=e=>{let t=os.normal(os.create(),e);return os.negate(t,t),t};C0.exports=R4});var Ft=u((EF,Z0)=>{var D0=Z(),B4=e=>D0.scale(D0.create(),e,e[2]);Z0.exports=B4});var I0=u((PF,G0)=>{var Nt=Z(),z4=qr(),C4=Ft(),D4=(e,t)=>{let r=C4(e),n=z4(e),s=Nt.subtract(Nt.create(),t,r),o=Nt.dot(s,n);return Nt.scale(s,n,o),Nt.add(s,s,r),s};G0.exports=D4});var is=u((AF,X0)=>{var Z4=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);X0.exports=Z4});var Y0=u((bF,$0)=>{var G4=Z(),I4=(e,t)=>{let r=G4.dot(t,e);return r=Math.abs(r-e[2]),r};$0.exports=I4});var U0=u((MF,L0)=>{var X4=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];L0.exports=X4});var cs=u((SF,H0)=>{var Rt=Z(),$4=(e,t,r)=>{let n=Rt.subtract(Rt.create(),r,t);Rt.normal(n,n),Rt.normalize(n,n);let s=Rt.dot(t,n);return e[0]=n[0],e[1]=n[1],e[2]=s,e};H0.exports=$4});var as=u((TF,W0)=>{var Y4=mr(),L4=(e,t,r)=>{let n=Y4();return n[0]=e,n[1]=t,n[2]=r,n};W0.exports=L4});var xr=u((kF,_0)=>{var{NEPS:ls}=I(),U4=(e,t)=>Math.abs(e[0]-t[0])<=ls&&Math.abs(e[1]-t[1])<=ls&&Math.abs(e[2]-t[2])<=ls;_0.exports=U4});var us=u((OF,K0)=>{var H4=(e,t,r)=>{let n=r-e[1],s=t[1]-e[1];s<0&&(n=-n,s=-s);let o;return n<=0?o=0:n>=s?o=1:s<1e-10?o=.5:o=n/s,e[0]+o*(t[0]-e[0])};K0.exports=H4});var fs=u((VF,Q0)=>{var W4=(e,t,r,n)=>{if(e[0]===t[0]&&e[1]===t[1]||r[0]===n[0]&&r[1]===n[1])return;let s=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(Math.abs(s)<Number.MIN_VALUE)return;let o=((n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]))/s,i=((t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]))/s;if(o<0||o>1||i<0||i>1)return;let c=e[0]+o*(t[0]-e[0]),a=e[1]+o*(t[1]-e[1]);return[c,a]};Q0.exports=W4});var j0=u((FF,J0)=>{var _4=(e,t,r,n,s,o)=>{let c=1/(e*n-t*r),a=s*n-t*o,l=-s*r+e*o;return a*=c,l*=c,[a,l]};J0.exports=_4});var _e=u((NF,ef)=>{ef.exports={aboutEqualNormals:xr(),area:Vt(),cos:J().cos,interpolateBetween2DPointsForY:us(),intersect:fs(),sin:J().sin,solve2Linear:j0()}});var rf=u((RF,tf)=>{var K4=Z(),{solve2Linear:Q4}=_e(),J4=(e,t)=>{let r=Q4(e[0],e[1],t[0],t[1],e[2],t[2]);return K4.clone(r)};tf.exports=J4});var of=u((BF,sf)=>{var nf=Z(),j4=is(),eE=as(),tE=(e,t)=>{let r=nf.negate(nf.create(),t),n=-t[2];return j4(e,eE(r[0],r[1],n))};sf.exports=tE});var af=u((zF,cf)=>{var rE=e=>`line2: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)})`;cf.exports=rE});var ff=u((CF,uf)=>{var lf=Z(),nE=cs(),sE=Ft(),oE=qr(),iE=(e,t,r)=>{let n=sE(t),s=oE(t);return lf.transform(n,n,r),lf.transform(s,s,r),nE(e,n,s)};uf.exports=iE});var pf=u((DF,hf)=>{var cE=Ft(),aE=(e,t)=>{let r=(e[2]-e[1]*t)/e[0];return Number.isNaN(r)&&(r=cE(e)[0]),r};hf.exports=aE});var wr=u((ZF,df)=>{df.exports={clone:z0(),closestPoint:I0(),copy:is(),create:mr(),direction:qr(),distanceToPoint:Y0(),equals:U0(),fromPoints:cs(),fromValues:as(),intersectPointOfLines:rf(),origin:Ft(),reverse:of(),toString:af(),transform:ff(),xAtY:pf()}});var hs=u((GF,mf)=>{var gf=F(),lE=()=>[gf.fromValues(0,0,0),gf.fromValues(0,0,1)];mf.exports=lE});var wf=u((IF,xf)=>{var qf=F(),uE=hs(),fE=e=>{let t=uE();return qf.copy(t[0],e[0]),qf.copy(t[1],e[1]),t};xf.exports=fE});var ps=u((XF,vf)=>{var De=F(),hE=(e,t)=>{let r=e[0],n=e[1],s=De.dot(De.subtract(De.create(),t,r),n),o=De.dot(n,n),i=s/o,c=De.scale(De.create(),n,i);return De.add(c,c,r),c};vf.exports=hE});var Pf=u(($F,Ef)=>{var yf=F(),pE=(e,t)=>(yf.copy(e[0],t[0]),yf.copy(e[1],t[1]),e);Ef.exports=pE});var bf=u((YF,Af)=>{var dE=e=>e[1];Af.exports=dE});var Sf=u((LF,Mf)=>{var ds=F(),gE=ps(),mE=(e,t)=>{let r=gE(e,t),n=ds.subtract(ds.create(),t,r);return ds.length(n)};Mf.exports=mE});var Of=u((UF,kf)=>{var Tf=F(),qE=(e,t)=>!(!Tf.equals(e[1],t[1])||!Tf.equals(e[0],t[0]));kf.exports=qE});var Ke=u((HF,Vf)=>{var vr=F(),xE=(e,t,r)=>{let n=vr.normalize(vr.create(),r);return vr.copy(e[0],t),vr.copy(e[1],n),e};Vf.exports=xE});var Nf=u((WF,Ff)=>{var Ze=F(),{solve2Linear:gs}=_e(),{EPS:wE}=I(),vE=Ke(),yE=(e,t,r)=>{let n=Ze.cross(Ze.create(),t,r),s=Ze.length(n);if(s<wE)throw new Error("parallel planes do not intersect");s=1/s,n=Ze.scale(n,n,s);let o=Math.abs(n[0]),i=Math.abs(n[1]),c=Math.abs(n[2]),a,l;return o>=i&&o>=c?(l=gs(t[1],t[2],r[1],r[2],t[3],r[3]),a=Ze.fromValues(0,l[0],l[1])):i>=o&&i>=c?(l=gs(t[0],t[2],r[0],r[2],t[3],r[3]),a=Ze.fromValues(l[0],0,l[1])):(l=gs(t[0],t[1],r[0],r[1],t[3],r[3]),a=Ze.fromValues(l[0],l[1],0)),vE(e,a,n)};Ff.exports=yE});var zf=u((_F,Bf)=>{var Rf=F(),EE=Ke(),PE=(e,t,r)=>{let n=Rf.subtract(Rf.create(),r,t);return EE(e,t,n)};Bf.exports=PE});var Df=u((KF,Cf)=>{var Qe=F(),AE=(e,t)=>{let r=t,n=t[3],s=e[0],o=e[1],i=(n-Qe.dot(r,s))/Qe.dot(r,o);return Qe.add(Qe.create(),s,Qe.scale(Qe.create(),o,i))};Cf.exports=AE});var Gf=u((QF,Zf)=>{var bE=e=>e[0];Zf.exports=bE});var Xf=u((JF,If)=>{var ms=F(),ME=Ke(),SE=(e,t)=>{let r=ms.clone(t[0]),n=ms.negate(ms.create(),t[1]);return ME(e,r,n)};If.exports=SE});var Yf=u((jF,$f)=>{var TE=e=>{let t=e[0],r=e[1];return`line3: point: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}) direction: (${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)})`};$f.exports=TE});var Uf=u((eN,Lf)=>{var Je=F(),kE=Ke(),OE=(e,t,r)=>{let n=t[0],s=t[1],o=Je.add(Je.create(),n,s),i=Je.transform(Je.create(),n,r),c=Je.transform(o,o,r),a=Je.subtract(c,c,i);return kE(e,i,a)};Lf.exports=OE});var Wf=u((tN,Hf)=>{Hf.exports={clone:wf(),closestPoint:ps(),copy:Pf(),create:hs(),direction:bf(),distanceToPoint:Sf(),equals:Of(),fromPlanes:Nf(),fromPointAndDirection:Ke(),fromPoints:zf(),intersectPointOfLineAndPlane:Df(),origin:Gf(),reverse:Xf(),toString:Yf(),transform:Uf()}});var Kf=u((rN,_f)=>{_f.exports={constants:I(),line2:wr(),line3:Wf(),mat4:Y(),plane:fe(),utils:_e(),vec2:Z(),vec3:F(),vec4:Yn()}});var qs=u((nN,jf)=>{var VE=B(),Qf=z(),Jf=C(),FE=$(),NE=X(),yr=new WeakMap,RE=()=>0,BE=e=>{let t=yr.get(e);return t||(t=Qf.toSides(e).reduce((n,s)=>n+(s[0][0]*s[1][1]-s[0][1]*s[1][0]),0),t*=.5,yr.set(e,t),t)},zE=e=>{let t=yr.get(e);return t||(t=Jf.toPolygons(e).reduce((n,s)=>n+NE.measureArea(s),0),yr.set(e,t),t)},CE=(...e)=>{if(e=VE(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>FE.isA(r)?RE(r):Qf.isA(r)?BE(r):Jf.isA(r)?zE(r):0);return t.length===1?t[0]:t};jf.exports=CE});var th=u((sN,eh)=>{var DE=B(),ZE=qs(),GE=(...e)=>{if(e=DE(e),e.length===0)throw new Error("measureAggregateArea: no geometries supplied");let t=ZE(e);if(e.length===1)return t;let r=0;return t.reduce((n,s)=>n+s,r)};eh.exports=GE});var be=u((oN,ih)=>{var IE=B(),de=Z(),Bt=F(),nh=z(),sh=C(),oh=$(),rh=X(),je=new WeakMap,XE=e=>{let t=je.get(e);if(t)return t;let r=oh.toPoints(e),n;r.length===0?n=de.create():n=de.clone(r[0]);let s=de.clone(n);return r.forEach(o=>{de.min(n,n,o),de.max(s,s,o)}),n=[n[0],n[1],0],s=[s[0],s[1],0],t=[n,s],je.set(e,t),t},$E=e=>{let t=je.get(e);if(t)return t;let r=nh.toPoints(e),n;r.length===0?n=de.create():n=de.clone(r[0]);let s=de.clone(n);return r.forEach(o=>{de.min(n,n,o),de.max(s,s,o)}),n=[n[0],n[1],0],s=[s[0],s[1],0],t=[n,s],je.set(e,t),t},YE=e=>{let t=je.get(e);if(t)return t;let r=sh.toPolygons(e),n=Bt.create();if(r.length>0){let o=rh.toPoints(r[0]);Bt.copy(n,o[0])}let s=Bt.clone(n);return r.forEach(o=>{rh.toPoints(o).forEach(i=>{Bt.min(n,n,i),Bt.max(s,s,i)})}),n=[n[0],n[1],n[2]],s=[s[0],s[1],s[2]],t=[n,s],je.set(e,t),t},LE=(...e)=>{if(e=IE(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>oh.isA(r)?XE(r):nh.isA(r)?$E(r):sh.isA(r)?YE(r):[[0,0,0],[0,0,0]]);return t.length===1?t[0]:t};ih.exports=LE});var Er=u((iN,ch)=>{var UE=B(),HE=En(),WE=yn(),_E=be(),KE=(...e)=>{if(e=UE(e),e.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");let t=_E(e);if(e.length===1)return t;let r=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return t.reduce((n,s)=>(n=[HE(n[0],n[0],s[0]),WE(n[1],n[1],s[1])],n),r)};ch.exports=KE});var xs=u((cN,ah)=>{var{EPS:QE}=I(),JE=(e,t)=>{let r=0;for(let n=0;n<t;n++)r+=e[1][n]-e[0][n];return QE*r/t};ah.exports=JE});var uh=u((aN,lh)=>{var jE=B(),eP=Er(),tP=xs(),{geom2:rP,geom3:nP,path2:sP}=gr(),oP=(...e)=>{if(e=jE(e),e.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");let t=eP(e),r=0;return r=e.reduce((n,s)=>sP.isA(s)||rP.isA(s)?Math.max(n,2):nP.isA(s)?Math.max(n,3):0,r),tP(t,r)};lh.exports=oP});var ws=u((lN,ph)=>{var iP=B(),cP=z(),hh=C(),aP=$(),lP=X(),fh=new WeakMap,uP=()=>0,fP=()=>0,hP=e=>{let t=fh.get(e);return t||(t=hh.toPolygons(e).reduce((n,s)=>n+lP.measureSignedVolume(s),0),fh.set(e,t),t)},pP=(...e)=>{if(e=iP(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>aP.isA(r)?uP(r):cP.isA(r)?fP(r):hh.isA(r)?hP(r):0);return t.length===1?t[0]:t};ph.exports=pP});var gh=u((uN,dh)=>{var dP=B(),gP=ws(),mP=(...e)=>{if(e=dP(e),e.length===0)throw new Error("measureAggregateVolume: no geometries supplied");let t=gP(e);if(e.length===1)return t;let r=0;return t.reduce((n,s)=>n+s,r)};dh.exports=mP});var Eh=u((fN,yh)=>{var qP=B(),qh=Z(),ie=F(),xh=z(),wh=C(),vh=$(),mh=X(),et=new WeakMap,xP=e=>{let t=et.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=vh.toPoints(e);if(s.length>0){let o=0,i=ie.create();s.forEach(c=>{ie.add(r,r,ie.fromVec2(i,c,0)),o++}),ie.scale(r,r,1/o),s.forEach(c=>{n=Math.max(n,qh.squaredDistance(r,c))}),n=Math.sqrt(n)}return t=[r,n],et.set(e,t),t},wP=e=>{let t=et.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=xh.toSides(e);if(s.length>0){let o=0,i=ie.create();s.forEach(c=>{ie.add(r,r,ie.fromVec2(i,c[0],0)),o++}),ie.scale(r,r,1/o),s.forEach(c=>{n=Math.max(n,qh.squaredDistance(r,c[0]))}),n=Math.sqrt(n)}return t=[r,n],et.set(e,t),t},vP=e=>{let t=et.get(e);if(t!==void 0)return t;let r=ie.create(),n=0,s=wh.toPolygons(e);if(s.length>0){let o=0;s.forEach(i=>{mh.toPoints(i).forEach(c=>{ie.add(r,r,c),o++})}),ie.scale(r,r,1/o),s.forEach(i=>{mh.toPoints(i).forEach(c=>{n=Math.max(n,ie.squaredDistance(r,c))})}),n=Math.sqrt(n)}return t=[r,n],et.set(e,t),t},yP=(...e)=>{e=qP(e);let t=e.map(r=>vh.isA(r)?xP(r):xh.isA(r)?wP(r):wh.isA(r)?vP(r):[[0,0,0],0]);return t.length===1?t[0]:t};yh.exports=yP});var Ah=u((hN,Ph)=>{var EP=B(),PP=be(),AP=(...e)=>{e=EP(e);let t=e.map(r=>{let n=PP(r);return[n[0][0]+(n[1][0]-n[0][0])/2,n[0][1]+(n[1][1]-n[0][1])/2,n[0][2]+(n[1][2]-n[0][2])/2]});return t.length===1?t[0]:t};Ph.exports=AP});var Th=u((pN,Sh)=>{var bP=B(),ge=F(),bh=z(),Mh=C(),Pr=new WeakMap,MP=e=>{let t=Pr.get(e);if(t!==void 0)return t;let r=bh.toSides(e),n=0,s=0,o=0;if(r.length>0){for(let c=0;c<r.length;c++){let a=r[c][0],l=r[c][1],f=a[0]*l[1]-a[1]*l[0];n+=f,s+=(a[0]+l[0])*f,o+=(a[1]+l[1])*f}n/=2;let i=1/(n*6);s*=i,o*=i}return t=ge.fromValues(s,o,0),Pr.set(e,t),t},SP=e=>{let t=Pr.get(e);if(t!==void 0)return t;t=ge.create();let r=Mh.toPolygons(e);if(r.length===0)return t;let n=0,s=ge.create();return r.forEach(o=>{let i=o.vertices;for(let c=0;c<i.length-2;c++){ge.cross(s,i[c+1],i[c+2]);let a=ge.dot(i[0],s)/6;n+=a,ge.add(s,i[0],i[c+1]),ge.add(s,s,i[c+2]);let l=ge.scale(s,s,1/4*a);ge.add(t,t,l)}}),ge.scale(t,t,1/n),Pr.set(e,t),t},TP=(...e)=>{e=bP(e);let t=e.map(r=>bh.isA(r)?MP(r):Mh.isA(r)?SP(r):[0,0,0]);return t.length===1?t[0]:t};Sh.exports=TP});var Oh=u((dN,kh)=>{var kP=B(),OP=be(),VP=(...e)=>{e=kP(e);let t=e.map(r=>{let n=OP(r);return[n[1][0]-n[0][0],n[1][1]-n[0][1],n[1][2]-n[0][2]]});return t.length===1?t[0]:t};kh.exports=VP});var we=u((gN,Vh)=>{var FP=B(),{geom2:NP,geom3:RP,path2:BP}=gr(),vs=xs(),ys=be(),zP=e=>vs(ys(e),2),CP=e=>vs(ys(e),2),DP=e=>vs(ys(e),3),ZP=(...e)=>{if(e=FP(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>BP.isA(r)?zP(r):NP.isA(r)?CP(r):RP.isA(r)?DP(r):0);return t.length===1?t[0]:t};Vh.exports=ZP});var Nh=u((mN,Fh)=>{Fh.exports={measureAggregateArea:th(),measureAggregateBoundingBox:Er(),measureAggregateEpsilon:uh(),measureAggregateVolume:gh(),measureArea:qs(),measureBoundingBox:be(),measureBoundingSphere:Eh(),measureCenter:Ah(),measureCenterOfMass:Th(),measureDimensions:Oh(),measureEpsilon:we(),measureVolume:ws()}});var K=u((qN,Rh)=>{var GP=(e,t)=>Array.isArray(e)&&e.length>=t?e.every(r=>Number.isFinite(r)):!1,IP=(e,t)=>Number.isFinite(e)&&e>t,XP=(e,t)=>Number.isFinite(e)&&e>=t;Rh.exports={isNumberArray:GP,isGT:IP,isGTE:XP}});var Ch=u((xN,zh)=>{var{EPS:Bh,TAU:tt}=I(),ve=Z(),$P=$(),{isGT:YP,isGTE:Es,isNumberArray:LP}=K(),UP=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:tt,makeTangent:!1,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,makeTangent:i,segments:c}=Object.assign({},t,e);if(!LP(r,2))throw new Error("center must be an array of X and Y values");if(!YP(n,0))throw new Error("radius must be greater than zero");if(!Es(s,0))throw new Error("startAngle must be positive");if(!Es(o,0))throw new Error("endAngle must be positive");if(!Es(c,4))throw new Error("segments must be four or more");s=s%tt,o=o%tt;let a=tt;s<o&&(a=o-s),s>o&&(a=o+(tt-s));let l=Math.acos((n*n+n*n-Bh*Bh)/(2*n*n)),f=ve.clone(r),h,p=[];if(a<l)h=ve.fromAngleRadians(ve.create(),s),ve.scale(h,h,n),ve.add(h,h,f),p.push(h);else{let d=Math.max(1,Math.floor(c*(a/tt)))+1,m=d*.5/a;m>.25&&(m=.25);let g=i?d+2:d;for(let q=0;q<=g;q++){let w=q;i&&(w=(q-1)*(d-2*m)/d+m,w<0&&(w=0),w>d&&(w=d));let v=s+w*(a/d);h=ve.fromAngleRadians(ve.create(),v),ve.scale(h,h,n),ve.add(h,h,f),p.push(h)}}return $P.fromPoints({closed:!1},p)};zh.exports=UP});var bs=u((wN,Ih)=>{var{EPS:Dh,TAU:Me}=I(),Ps=Z(),Zh=z(),{sin:HP,cos:WP}=J(),{isGTE:As,isNumberArray:Gh}=K(),_P=e=>{let t={center:[0,0],radius:[1,1],startAngle:0,endAngle:Me,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!Gh(r,2))throw new Error("center must be an array of X and Y values");if(!Gh(n,2))throw new Error("radius must be an array of X and Y values");if(!n.every(d=>d>=0))throw new Error("radius values must be positive");if(!As(s,0))throw new Error("startAngle must be positive");if(!As(o,0))throw new Error("endAngle must be positive");if(!As(i,3))throw new Error("segments must be three or more");if(n[0]===0||n[1]===0)return Zh.create();s=s%Me,o=o%Me;let c=Me;s<o&&(c=o-s),s>o&&(c=o+(Me-s));let a=Math.min(n[0],n[1]),l=Math.acos((a*a+a*a-Dh*Dh)/(2*a*a));if(c<l)throw new Error("startAngle and endAngle do not define a significant rotation");i=Math.floor(i*(c/Me));let f=Ps.clone(r),h=c/i,p=[];i=c<Me?i+1:i;for(let d=0;d<i;d++){let m=h*d+s,g=Ps.fromValues(n[0]*WP(m),n[1]*HP(m));Ps.add(g,f,g),p.push(g)}return c<Me&&p.push(f),Zh.fromPoints(p)};Ih.exports=_P});var Ms=u((vN,Xh)=>{var{TAU:KP}=I(),QP=bs(),{isGTE:JP}=K(),jP=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:KP,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!JP(n,0))throw new Error("radius must be positive");return n=[n,n],QP({center:r,radius:n,startAngle:s,endAngle:o,segments:i})};Xh.exports=jP});var Ar=u((yN,Lh)=>{var $h=C(),eA=X(),{isNumberArray:Yh}=K(),tA=e=>{let t={center:[0,0,0],size:[2,2,2]},{center:r,size:n}=Object.assign({},t,e);if(!Yh(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Yh(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every(o=>o>=0))throw new Error("size values must be positive");return n[0]===0||n[1]===0||n[2]===0?$h.create():$h.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(o=>{let i=o[0].map(c=>[r[0]+n[0]/2*(2*!!(c&1)-1),r[1]+n[1]/2*(2*!!(c&2)-1),r[2]+n[2]/2*(2*!!(c&4)-1)]);return eA.create(i)}))};Lh.exports=tA});var Hh=u((EN,Uh)=>{var rA=Ar(),{isGTE:nA}=K(),sA=e=>{let t={center:[0,0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!nA(n,0))throw new Error("size must be positive");return n=[n,n,n],rA({center:r,size:n})};Uh.exports=sA});var ks=u((PN,_h)=>{var{EPS:Wh,TAU:Se}=I(),j=F(),oA=C(),iA=X(),{sin:cA,cos:aA}=J(),{isGT:lA,isGTE:Ss,isNumberArray:Ts}=K(),uA=e=>{let t={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Se,segments:32},{center:r,height:n,startRadius:s,startAngle:o,endRadius:i,endAngle:c,segments:a}=Object.assign({},t,e);if(!Ts(r,3))throw new Error("center must be an array of X, Y and Z values");if(!lA(n,0))throw new Error("height must be greater then zero");if(!Ts(s,2))throw new Error("startRadius must be an array of X and Y values");if(!s.every(M=>M>=0))throw new Error("startRadius values must be positive");if(!Ts(i,2))throw new Error("endRadius must be an array of X and Y values");if(!i.every(M=>M>=0))throw new Error("endRadius values must be positive");if(i.every(M=>M===0)&&s.every(M=>M===0))throw new Error("at least one radius must be positive");if(!Ss(o,0))throw new Error("startAngle must be positive");if(!Ss(c,0))throw new Error("endAngle must be positive");if(!Ss(a,4))throw new Error("segments must be four or more");o=o%Se,c=c%Se;let l=Se;o<c&&(l=c-o),o>c&&(l=c+(Se-o));let f=Math.min(s[0],s[1],i[0],i[1]),h=Math.acos((f*f+f*f-Wh*Wh)/(2*f*f));if(l<h)throw new Error("startAngle and endAngle do not define a significant rotation");let p=Math.floor(a*(l/Se)),d=j.fromValues(0,0,-(n/2)),m=j.fromValues(0,0,n/2),g=j.subtract(j.create(),m,d),q=j.fromValues(1,0,0),w=j.fromValues(0,1,0),v=j.create(),E=j.create(),x=j.create(),P=(M,T,S)=>{let O=T*l+o;return j.scale(v,q,S[0]*aA(O)),j.scale(E,w,S[1]*cA(O)),j.add(v,v,E),j.scale(x,g,M),j.add(x,x,d),j.add(j.create(),v,x)},y=(...M)=>{let T=M.map(S=>j.add(j.create(),S,r));return iA.create(T)},A=[];for(let M=0;M<p;M++){let T=M/p,S=(M+1)/p;l===Se&&M===p-1&&(S=0),i[0]===s[0]&&i[1]===s[1]?(A.push(y(d,P(0,S,i),P(0,T,i))),A.push(y(P(0,S,i),P(1,S,i),P(1,T,i),P(0,T,i))),A.push(y(m,P(1,T,i),P(1,S,i)))):(s[0]>0&&s[1]>0&&A.push(y(d,P(0,S,s),P(0,T,s))),(s[0]>0||s[1]>0)&&A.push(y(P(0,T,s),P(0,S,s),P(1,T,i))),i[0]>0&&i[1]>0&&A.push(y(m,P(1,T,i),P(1,S,i))),(i[0]>0||i[1]>0)&&A.push(y(P(1,T,i),P(0,S,s),P(1,S,i))))}return l<Se&&(A.push(y(d,P(0,0,s),m)),A.push(y(P(0,0,s),P(1,0,i),m)),A.push(y(d,m,P(0,1,s))),A.push(y(P(0,1,s),m,P(1,1,i)))),oA.create(A)};_h.exports=uA});var Os=u((AN,Kh)=>{var fA=C(),hA=ks(),{isGTE:pA}=K(),dA=e=>{let t={center:[0,0,0],height:2,radius:1,segments:32},{center:r,height:n,radius:s,segments:o}=Object.assign({},t,e);if(!pA(s,0))throw new Error("radius must be positive");return n===0||s===0?fA.create():hA({center:r,height:n,startRadius:[s,s],endRadius:[s,s],segments:o})};Kh.exports=dA});var Vs=u((bN,n2)=>{var{TAU:Qh}=I(),N=F(),Jh=C(),jh=X(),{sin:e2,cos:t2}=J(),{isGTE:gA,isNumberArray:r2}=K(),mA=e=>{let t={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:r,radius:n,segments:s,axes:o}=Object.assign({},t,e);if(!r2(r,3))throw new Error("center must be an array of X, Y and Z values");if(!r2(n,3))throw new Error("radius must be an array of X, Y and Z values");if(!n.every(m=>m>=0))throw new Error("radius values must be positive");if(!gA(s,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0||n[2]===0)return Jh.create();let i=N.scale(N.create(),N.normalize(N.create(),o[0]),n[0]),c=N.scale(N.create(),N.normalize(N.create(),o[1]),n[1]),a=N.scale(N.create(),N.normalize(N.create(),o[2]),n[2]),l=Math.round(s/4),f,h=[],p=N.create(),d=N.create();for(let m=0;m<=s;m++){let g=Qh*m/s,q=N.add(N.create(),N.scale(p,i,t2(g)),N.scale(d,c,e2(g)));if(m>0){let w,v;for(let E=0;E<=l;E++){let x=Qh/4*E/l,P=t2(x),y=e2(x);if(E>0){let A=[],b;b=N.subtract(N.create(),N.scale(p,f,w),N.scale(d,a,v)),A.push(N.add(b,b,r)),b=N.subtract(N.create(),N.scale(p,q,w),N.scale(d,a,v)),A.push(N.add(b,b,r)),E<l&&(b=N.subtract(N.create(),N.scale(p,q,P),N.scale(d,a,y)),A.push(N.add(b,b,r))),b=N.subtract(N.create(),N.scale(p,f,P),N.scale(d,a,y)),A.push(N.add(b,b,r)),h.push(jh.create(A)),A=[],b=N.add(N.create(),N.scale(p,f,w),N.scale(d,a,v)),A.push(N.add(N.create(),r,b)),b=N.add(b,N.scale(p,q,w),N.scale(d,a,v)),A.push(N.add(N.create(),r,b)),E<l&&(b=N.add(b,N.scale(p,q,P),N.scale(d,a,y)),A.push(N.add(N.create(),r,b))),b=N.add(b,N.scale(p,f,P),N.scale(d,a,y)),A.push(N.add(N.create(),r,b)),A.reverse(),h.push(jh.create(A))}w=P,v=y}}f=q}return Jh.create(h)};n2.exports=mA});var Fs=u((MN,o2)=>{var qA=C(),xA=X(),{isNumberArray:s2}=K(),wA=e=>{let t={points:[],faces:[],colors:void 0,orientation:"outward"},{points:r,faces:n,colors:s,orientation:o}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and faces must be arrays");if(r.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(s){if(!Array.isArray(s))throw new Error("colors must be an array");if(s.length!==n.length)throw new Error("faces and colors must have the same length")}r.forEach((c,a)=>{if(!s2(c,3))throw new Error(`point ${a} must be an array of X, Y, Z values`)}),n.forEach((c,a)=>{if(c.length<3)throw new Error(`face ${a} must contain 3 or more indexes`);if(!s2(c,c.length))throw new Error(`face ${a} must be an array of numbers`)}),o!=="outward"&&n.forEach(c=>c.reverse());let i=n.map((c,a)=>{let l=xA.create(c.map(f=>r[f]));return s&&s[a]&&(l.color=s[a]),l});return qA.create(i)};o2.exports=wA});var f2=u((SN,u2)=>{var i2=Y(),c2=F(),a2=C(),vA=Fs(),{isGTE:l2}=K(),yA=e=>{let t={radius:1,frequency:6},{radius:r,frequency:n}=Object.assign({},t,e);if(!l2(r,0))throw new Error("radius must be positive");if(!l2(n,6))throw new Error("frequency must be six or more");if(r===0)return a2.create();n=Math.floor(n/6);let s=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],o=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],i=(p,d,m)=>{let g=p[0],q=p[1],w=p[2],v=m,E=[],x=[];for(let P=0;P<d;P++)for(let y=0;y<d-P;y++){let A=P/d,b=(P+1)/d,M=y/(d-P),T=(y+1)/(d-P),S=d-P-1?y/(d-P-1):1,O=[];O[0]=c(c(g,q,M),w,A),O[1]=c(c(g,q,T),w,A),O[2]=c(c(g,q,S),w,b);for(let G=0;G<3;G++){let R=c2.length(O[G]);for(let D=0;D<3;D++)O[G][D]/=R}if(E.push(O[0],O[1],O[2]),x.push([v,v+1,v+2]),v+=3,y<d-P-1){let G=d-P-1?(y+1)/(d-P-1):1;O[0]=c(c(g,q,T),w,A),O[1]=c(c(g,q,G),w,b),O[2]=c(c(g,q,S),w,b);for(let R=0;R<3;R++){let D=c2.length(O[R]);for(let V=0;V<3;V++)O[R][V]/=D}E.push(O[0],O[1],O[2]),x.push([v,v+1,v+2]),v+=3}}return{points:E,triangles:x,offset:v}},c=(p,d,m)=>{let g=1-m,q=[];for(let w=0;w<3;w++)q[w]=p[w]*g+d[w]*m;return q},a=[],l=[],f=0;for(let p=0;p<o.length;p++){let d=i([s[o[p][0]],s[o[p][1]],s[o[p][2]]],n,f);a=a.concat(d.points),l=l.concat(d.triangles),f=d.offset}let h=vA({points:a,faces:l,orientation:"inward"});return r!==1&&(h=a2.transform(i2.fromScaling(i2.create(),[r,r,r]),h)),h};u2.exports=yA});var p2=u((TN,h2)=>{var EA=$(),PA=e=>{if(!Array.isArray(e))throw new Error("points must be an array");return EA.fromPoints({},e)};h2.exports=PA});var g2=u((kN,d2)=>{var Ns=z(),AA=e=>{let t={points:[],paths:[]},{points:r,paths:n}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and paths must be arrays");let s=r;Array.isArray(r[0])&&(Array.isArray(r[0][0])||(s=[r])),s.forEach((a,l)=>{if(!Array.isArray(a))throw new Error("list of points "+l+" must be an array");if(a.length<3)throw new Error("list of points "+l+" must contain three or more points");a.forEach((f,h)=>{if(!Array.isArray(f))throw new Error("list of points "+l+", point "+h+" must be an array");if(f.length<2)throw new Error("list of points "+l+", point "+h+" must contain by X and Y values")})});let o=n;if(n.length===0){let a=0;o=s.map(l=>l.map(f=>a++))}let i=[];s.forEach(a=>a.forEach(l=>i.push(l)));let c=[];return o.forEach(a=>{let l=a.map(h=>i[h]),f=Ns.fromPoints(l);c=c.concat(Ns.toSides(f))}),Ns.create(c)};d2.exports=AA});var br=u((ON,x2)=>{var Te=Z(),m2=z(),{isNumberArray:q2}=K(),bA=e=>{let t={center:[0,0],size:[2,2]},{center:r,size:n}=Object.assign({},t,e);if(!q2(r,2))throw new Error("center must be an array of X and Y values");if(!q2(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(c=>c>=0))throw new Error("size values must be positive");if(n[0]===0||n[1]===0)return m2.create();let s=[n[0]/2,n[1]/2],o=[s[0],-s[1]],i=[Te.subtract(Te.create(),r,s),Te.add(Te.create(),r,o),Te.add(Te.create(),r,s),Te.subtract(Te.create(),r,o)];return m2.fromPoints(i)};x2.exports=bA});var M2=u((VN,b2)=>{var{EPS:Mr,TAU:zt}=I(),Rs=Z(),W=F(),w2=C(),rt=X(),{sin:MA,cos:SA}=J(),{isGTE:v2,isNumberArray:y2}=K(),TA=Ar(),E2=(e,t,r,n,s,o)=>{let i=zt/4*s/n,c=SA(i),a=MA(i),l=n-s,f=r*c,h=t[2]-(r-r*a);o||(h=r-r*a-t[2]),f=f>Mr?f:0;let p=W.add(W.create(),e,[t[0]-r,t[1]-r,h]),d=W.add(W.create(),e,[r-t[0],t[1]-r,h]),m=W.add(W.create(),e,[r-t[0],r-t[1],h]),g=W.add(W.create(),e,[t[0]-r,r-t[1],h]),q=[],w=[],v=[],E=[];for(let x=0;x<=l;x++){let P=l>0?zt/4*x/l:0,y=Rs.fromAngleRadians(Rs.create(),P);Rs.scale(y,y,f);let A=W.fromVec2(W.create(),y);q.push(W.add(W.create(),p,A)),W.rotateZ(A,A,[0,0,0],zt/4),w.push(W.add(W.create(),d,A)),W.rotateZ(A,A,[0,0,0],zt/4),v.push(W.add(W.create(),m,A)),W.rotateZ(A,A,[0,0,0],zt/4),E.push(W.add(W.create(),g,A))}return o?[q,w,v,E]:(q.reverse(),w.reverse(),v.reverse(),E.reverse(),[E,v,w,q])},P2=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n];for(let i=0;i<s.length-1;i++)r.push(rt.create([s[i],s[i+1],o[i]])),i<o.length-1&&r.push(rt.create([o[i],s[i+1],o[i+1]]))}return r},A2=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n],i=s[s.length-1],c=o[o.length-1],a=(n+1)%e.length;s=e[a],o=t[a];let l=s[0],f=o[0];r.push(rt.create([i,l,f,c]))}return r},kA=(e,t)=>{e=[e[3],e[2],e[1],e[0]],e=e.map(o=>o.slice().reverse());let r=[];e.forEach(o=>{o.forEach(i=>r.push(i))});let n=[];t.forEach(o=>{o.forEach(i=>n.push(i))});let s=[];for(let o=0;o<n.length;o++){let i=(o+1)%n.length;s.push(rt.create([r[o],r[i],n[i],n[o]]))}return s},OA=e=>{let t={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!y2(r,3))throw new Error("center must be an array of X, Y and Z values");if(!y2(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every(l=>l>=0))throw new Error("size values must be positive");if(!v2(s,0))throw new Error("roundRadius must be positive");if(!v2(o,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0||n[2]===0)return w2.create();if(s===0)return TA({center:r,size:n});if(n=n.map(l=>l/2),s>n[0]-Mr||s>n[1]-Mr||s>n[2]-Mr)throw new Error("roundRadius must be smaller then the radius of all dimensions");o=Math.floor(o/4);let i=null,c=null,a=[];for(let l=0;l<=o;l++){let f=E2(r,n,s,o,l,!0),h=E2(r,n,s,o,l,!1);if(l===0&&(a=a.concat(kA(h,f))),i&&(a=a.concat(P2(i,f),A2(i,f))),c&&(a=a.concat(P2(c,h),A2(c,h))),l===o){let p=f.map(d=>d[0]);a.push(rt.create(p)),p=h.map(d=>d[0]),a.push(rt.create(p))}i=f,c=h}return w2.create(a)};b2.exports=OA});var F2=u((FN,V2)=>{var{EPS:VA,TAU:S2}=I(),k=F(),T2=C(),FA=X(),{sin:k2,cos:O2}=J(),{isGTE:Sr,isNumberArray:NA}=K(),RA=Os(),BA=e=>{let t={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:r,height:n,radius:s,roundRadius:o,segments:i}=Object.assign({},t,e);if(!NA(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Sr(n,0))throw new Error("height must be positive");if(!Sr(s,0))throw new Error("radius must be positive");if(!Sr(o,0))throw new Error("roundRadius must be positive");if(o>s)throw new Error("roundRadius must be smaller then the radius");if(!Sr(i,4))throw new Error("segments must be four or more");if(n===0||s===0)return T2.create();if(o===0)return RA({center:r,height:n,radius:s});let c=[0,0,-(n/2)],a=[0,0,n/2],l=k.subtract(k.create(),a,c),f=k.length(l);if(2*o>f-VA)throw new Error("height must be larger than twice roundRadius");let h;Math.abs(l[0])>Math.abs(l[1])?h=k.fromValues(0,1,0):h=k.fromValues(1,0,0);let p=k.scale(k.create(),k.normalize(k.create(),l),o),d=k.scale(k.create(),k.normalize(k.create(),k.cross(k.create(),p,h)),s),m=k.scale(k.create(),k.normalize(k.create(),k.cross(k.create(),d,p)),s);k.add(c,c,p),k.subtract(a,a,p);let g=Math.floor(.25*i),q=y=>{let A=y.map(b=>k.add(b,b,r));return FA.create(A)},w=[],v=k.create(),E=k.create(),x;for(let y=0;y<=i;y++){let A=S2*y/i,b=k.add(k.create(),k.scale(v,d,O2(A)),k.scale(E,m,k2(A)));if(y>0){let M=[];M.push(k.add(k.create(),c,b)),M.push(k.add(k.create(),c,x)),M.push(k.add(k.create(),a,x)),M.push(k.add(k.create(),a,b)),w.push(q(M));let T,S;for(let O=0;O<=g;O++){let G=S2/4*O/g,R=O2(G),D=k2(G);if(O>0){M=[];let V;V=k.add(k.create(),c,k.subtract(v,k.scale(v,x,T),k.scale(E,p,S))),M.push(V),V=k.add(k.create(),c,k.subtract(v,k.scale(v,b,T),k.scale(E,p,S))),M.push(V),O<g&&(V=k.add(k.create(),c,k.subtract(v,k.scale(v,b,R),k.scale(E,p,D))),M.push(V)),V=k.add(k.create(),c,k.subtract(v,k.scale(v,x,R),k.scale(E,p,D))),M.push(V),w.push(q(M)),M=[],V=k.add(k.create(),k.scale(v,x,T),k.scale(E,p,S)),k.add(V,V,a),M.push(V),V=k.add(k.create(),k.scale(v,b,T),k.scale(E,p,S)),k.add(V,V,a),M.push(V),O<g&&(V=k.add(k.create(),k.scale(v,b,R),k.scale(E,p,D)),k.add(V,V,a),M.push(V)),V=k.add(k.create(),k.scale(v,x,R),k.scale(E,p,D)),k.add(V,V,a),M.push(V),M.reverse(),w.push(q(M))}T=R,S=D}}x=b}return T2.create(w)};V2.exports=BA});var D2=u((NN,C2)=>{var{EPS:N2,TAU:Tr}=I(),U=Z(),R2=z(),{isGTE:B2,isNumberArray:z2}=K(),zA=br(),CA=e=>{let t={center:[0,0],size:[2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!z2(r,2))throw new Error("center must be an array of X and Y values");if(!z2(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(g=>g>=0))throw new Error("size values must be positive");if(!B2(s,0))throw new Error("roundRadius must be positive");if(!B2(o,4))throw new Error("segments must be four or more");if(n[0]===0||n[1]===0)return R2.create();if(s===0)return zA({center:r,size:n});if(n=n.map(g=>g/2),s>n[0]-N2||s>n[1]-N2)throw new Error("roundRadius must be smaller then the radius of all dimensions");let i=Math.floor(o/4),c=U.add(U.create(),r,[n[0]-s,n[1]-s]),a=U.add(U.create(),r,[s-n[0],n[1]-s]),l=U.add(U.create(),r,[s-n[0],s-n[1]]),f=U.add(U.create(),r,[n[0]-s,s-n[1]]),h=[],p=[],d=[],m=[];for(let g=0;g<=i;g++){let q=Tr/4*g/i,w=U.fromAngleRadians(U.create(),q);U.scale(w,w,s),h.push(U.add(U.create(),c,w)),U.rotate(w,w,U.create(),Tr/4),p.push(U.add(U.create(),a,w)),U.rotate(w,w,U.create(),Tr/4),d.push(U.add(U.create(),l,w)),U.rotate(w,w,U.create(),Tr/4),m.push(U.add(U.create(),f,w))}return R2.fromPoints(h.concat(p,d,m))};C2.exports=CA});var Bs=u((RN,Z2)=>{var DA=Vs(),{isGTE:ZA}=K(),GA=e=>{let t={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:r,radius:n,segments:s,axes:o}=Object.assign({},t,e);if(!ZA(n,0))throw new Error("radius must be positive");return n=[n,n,n],DA({center:r,radius:n,segments:s,axes:o})};Z2.exports=GA});var I2=u((BN,G2)=>{var IA=br(),{isGTE:XA}=K(),$A=e=>{let t={center:[0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!XA(n,0))throw new Error("size must be positive");return n=[n,n],IA({center:r,size:n})};G2.exports=$A});var L2=u((zN,Y2)=>{var{TAU:$2}=I(),Ct=Z(),YA=z(),{isGT:LA,isGTE:kr,isNumberArray:UA}=K(),HA=(e,t)=>e>0&&t>1&&t<e/2?Math.cos(Math.PI*t/e)/Math.cos(Math.PI*(t-1)/e):0,X2=(e,t,r,n)=>{let s=$2/e,o=[];for(let i=0;i<e;i++){let c=Ct.fromAngleRadians(Ct.create(),s*i+r);Ct.scale(c,c,t),Ct.add(c,n,c),o.push(c)}return o},WA=e=>{let t={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0},{center:r,vertices:n,outerRadius:s,innerRadius:o,density:i,startAngle:c}=Object.assign({},t,e);if(!UA(r,2))throw new Error("center must be an array of X and Y values");if(!kr(n,2))throw new Error("vertices must be two or more");if(!LA(s,0))throw new Error("outerRadius must be greater than zero");if(!kr(o,0))throw new Error("innerRadius must be greater than zero");if(!kr(c,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),i=Math.floor(i),c=c%$2,o===0){if(!kr(i,2))throw new Error("density must be two or more");o=s*HA(n,i)}let a=Ct.clone(r),l=X2(n,s,c,a),f=X2(n,o,c+Math.PI/n,a),h=[];for(let p=0;p<n;p++)h.push(l[p]),h.push(f[p]);return YA.fromPoints(h)};Y2.exports=WA});var nt=u((CN,Q2)=>{var _A=B(),U2=Y(),H2=fe(),W2=z(),_2=C(),K2=$(),Or=(e,...t)=>{let r={origin:[0,0,0],normal:[0,0,1]},{origin:n,normal:s}=Object.assign({},r,e);if(t=_A(t),t.length===0)throw new Error("wrong number of arguments");let o=H2.fromNormalAndPoint(H2.create(),s,n);if(Number.isNaN(o[0]))throw new Error("the given origin and normal do not define a proper plane");let i=U2.mirrorByPlane(U2.create(),o),c=t.map(a=>K2.isA(a)?K2.transform(i,a):W2.isA(a)?W2.transform(i,a):_2.isA(a)?_2.transform(i,a):a);return c.length===1?c[0]:c},KA=(...e)=>Or({normal:[1,0,0]},e),QA=(...e)=>Or({normal:[0,1,0]},e),JA=(...e)=>Or({normal:[0,0,1]},e);Q2.exports={mirror:Or,mirrorX:KA,mirrorY:QA,mirrorZ:JA}});var zs=u((DN,j2)=>{var J2=fe(),Ge=F(),jA=e=>{let t=e.edges;if(t.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");let r=t.reduce((i,c)=>Ge.add(Ge.create(),i,c[0]),Ge.create());Ge.scale(r,r,1/t.length);let n,s=0;t.forEach(i=>{if(!Ge.equals(i[0],i[1])){let c=Ge.squaredDistance(r,i[0]);c>s&&(n=i,s=c)}});let o=t.find(i=>Ge.equals(i[1],n[0]));return J2.fromPoints(J2.create(),o[0],n[0],n[1])};j2.exports=jA});var ke=u((ZN,ep)=>{var eb=e=>(e||(e=[]),{edges:e});ep.exports=eb});var np=u((GN,rp)=>{var tb=ke(),tp=F(),rb=(...e)=>{let t,r;return e.length===1?(t=tb(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[tp.clone(n[0]),tp.clone(n[1])]),t};rp.exports=rb});var op=u((IN,sp)=>{var nb=F(),sb=(e,t)=>{let r=e.edges,n=t.edges;return r.length!==n.length?!1:r.reduce((o,i,c)=>{let a=n[c],l=nb.squaredDistance(i[0],a[0]);return o&&l<Number.EPSILON},!0)};sp.exports=sb});var cp=u((XN,ip)=>{var Vr=F(),ob=ke(),ib=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");if(e.length<3)throw new Error("the given points must contain THREE or more points");let t=[],r=e[e.length-1];return e.forEach(n=>{n.length===2&&t.push([Vr.fromVec2(Vr.create(),r),Vr.fromVec2(Vr.create(),n)]),n.length===3&&t.push([r,n]),r=n}),ob(t)};ip.exports=ib});var lp=u(($N,ap)=>{var Fr=F(),cb=ke(),ab=e=>{if(!Array.isArray(e))throw new Error("the given sides must be an array");let t=[];return e.forEach(r=>{t.push([Fr.fromVec2(Fr.create(),r[0]),Fr.fromVec2(Fr.create(),r[1])])}),cb(t)};ap.exports=ab});var fp=u((YN,up)=>{var lb=e=>!!(e&&typeof e=="object"&&"edges"in e&&Array.isArray(e.edges));up.exports=lb});var pp=u((LN,hp)=>{var ub=ke(),fb=(...e)=>{let t,r;return e.length===1?(t=ub(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[n[1],n[0]]),t};hp.exports=fb});var gp=u((UN,dp)=>{var hb=e=>e.edges;dp.exports=hb});var qp=u((HN,mp)=>{var pb=(e,t)=>{let r,n,s,o,i,c=1;do{n=e,e=null;let a=null;for(i=0;n;){i++,s=n;let l=0;for(r=0;r<c&&(l++,s=s.nextZ,!!s);r++);let f=c;for(;l>0||f>0&&s;)l!==0&&(f===0||!s||t(n)<=t(s))?(o=n,n=n.nextZ,l--):(o=s,s=s.nextZ,f--),a?a.nextZ=o:e=o,o.prevZ=a,a=o;n=s}a.nextZ=null,c*=2}while(i>1);return e};mp.exports=pb});var Cs=u((WN,xp)=>{var db=qp(),Nr=class{constructor(t,r,n){this.i=t,this.x=r,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}},gb=(e,t,r,n)=>{let s=new Nr(e,t,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s},mb=e=>{e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)};xp.exports={Node:Nr,insertNode:gb,removeNode:mb,sortLinked:db}});var Rr=u((_N,wp)=>{var qb=(e,t,r,n,s,o,i,c)=>(s-i)*(t-c)-(e-i)*(o-c)>=0&&(e-i)*(n-c)-(r-i)*(t-c)>=0&&(r-i)*(o-c)-(s-i)*(n-c)>=0,xb=(e,t,r)=>(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y);wp.exports={area:xb,pointInTriangle:qb}});var Ds=u((KN,Ap)=>{var{Node:vp,insertNode:yp,removeNode:zr}=Cs(),{area:ce}=Rr(),wb=(e,t,r,n,s)=>{let o;if(s===bb(e,t,r,n)>0)for(let i=t;i<r;i+=n)o=yp(i,e[i],e[i+1],o);else for(let i=r-n;i>=t;i-=n)o=yp(i,e[i],e[i+1],o);return o&&Cr(o,o.next)&&(zr(o),o=o.next),o},Ep=(e,t)=>{if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(Cr(r,r.next)||ce(r.prev,r,r.next)===0)){if(zr(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t},vb=(e,t,r)=>{let n=e;do{let s=n.prev,o=n.next.next;!Cr(s,o)&&Pp(s,n,n.next,o)&&Dt(s,o)&&Dt(o,s)&&(t.push(s.i/r),t.push(n.i/r),t.push(o.i/r),zr(n),zr(n.next),n=e=o),n=n.next}while(n!==e);return Ep(n)},yb=(e,t)=>{let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Pp(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1},Dt=(e,t)=>ce(e.prev,e,e.next)<0?ce(e,t,e.next)>=0&&ce(e,e.prev,t)>=0:ce(e,t,e.prev)<0||ce(e,e.next,t)<0,Eb=(e,t)=>{let r=e,n=!1,s=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&s<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n},Pb=(e,t)=>{let r=new vp(e.i,e.x,e.y),n=new vp(t.i,t.x,t.y),s=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n},Ab=(e,t)=>e.next.i!==t.i&&e.prev.i!==t.i&&!yb(e,t)&&(Dt(e,t)&&Dt(t,e)&&Eb(e,t)&&(ce(e.prev,e,t.prev)||ce(e,t.prev,t))||Cr(e,t)&&ce(e.prev,e,e.next)>0&&ce(t.prev,t,t.next)>0),Pp=(e,t,r,n)=>{let s=Math.sign(ce(e,t,r)),o=Math.sign(ce(e,t,n)),i=Math.sign(ce(r,n,e)),c=Math.sign(ce(r,n,t));return!!(s!==o&&i!==c||s===0&&Br(e,r,t)||o===0&&Br(e,n,t)||i===0&&Br(r,e,n)||c===0&&Br(r,t,n))},Br=(e,t,r)=>t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y),bb=(e,t,r,n)=>{let s=0;for(let o=t,i=r-n;o<r;o+=n)s+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return s},Cr=(e,t)=>e.x===t.x&&e.y===t.y;Ap.exports={cureLocalIntersections:vb,filterPoints:Ep,isValidDiagonal:Ab,linkedPolygon:wb,locallyInside:Dt,splitPolygon:Pb}});var Sp=u((QN,Mp)=>{var{filterPoints:Zs,linkedPolygon:Mb,locallyInside:Sb,splitPolygon:Tb}=Ds(),{area:bp,pointInTriangle:kb}=Rr(),Ob=(e,t,r,n)=>{let s=[];for(let o=0,i=t.length;o<i;o++){let c=t[o]*n,a=o<i-1?t[o+1]*n:e.length,l=Mb(e,c,a,n,!1);l===l.next&&(l.steiner=!0),s.push(Rb(l))}s.sort((o,i)=>o.x-i.x);for(let o=0;o<s.length;o++)r=Vb(s[o],r),r=Zs(r,r.next);return r},Vb=(e,t)=>{let r=Fb(e,t);if(!r)return t;let n=Tb(r,e),s=Zs(r,r.next);return Zs(n,n.next),t===r?s:t},Fb=(e,t)=>{let r=t,n=e.x,s=e.y,o=-1/0,i;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){let h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=n&&h>o){if(o=h,h===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===o)return i;let c=i,a=i.x,l=i.y,f=1/0;r=i;do{if(n>=r.x&&r.x>=a&&n!==r.x&&kb(s<l?n:o,s,a,l,s<l?o:n,s,r.x,r.y)){let h=Math.abs(s-r.y)/(n-r.x);Sb(r,e)&&(h<f||h===f&&(r.x>i.x||r.x===i.x&&Nb(i,r)))&&(i=r,f=h)}r=r.next}while(r!==c);return i},Nb=(e,t)=>bp(e.prev,e,t.prev)<0&&bp(t.next,e,e.next)<0,Rb=e=>{let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r};Mp.exports=Ob});var kp=u((JN,Tp)=>{var Bb=Sp(),{removeNode:zb,sortLinked:Cb}=Cs(),{cureLocalIntersections:Db,filterPoints:Dr,isValidDiagonal:Zb,linkedPolygon:Gb,splitPolygon:Ib}=Ds(),{area:Ie,pointInTriangle:Zt}=Rr(),Xb=(e,t,r=2)=>{let n=t&&t.length,s=n?t[0]*r:e.length,o=Gb(e,0,s,r,!0),i=[];if(!o||o.next===o.prev)return i;let c,a,l,f,h;if(n&&(o=Bb(e,t,o,r)),e.length>80*r){c=l=e[0],a=f=e[1];for(let p=r;p<s;p+=r){let d=e[p],m=e[p+1];d<c&&(c=d),m<a&&(a=m),d>l&&(l=d),m>f&&(f=m)}h=Math.max(l-c,f-a),h=h!==0?1/h:0}return Gt(o,i,r,c,a,h),i},Gt=(e,t,r,n,s,o,i)=>{if(!e)return;!i&&o&&Ub(e,n,s,o);let c=e,a,l;for(;e.prev!==e.next;){if(a=e.prev,l=e.next,o?Yb(e,n,s,o):$b(e)){t.push(a.i/r),t.push(e.i/r),t.push(l.i/r),zb(e),e=l.next,c=l.next;continue}if(e=l,e===c){i?i===1?(e=Db(Dr(e),t,r),Gt(e,t,r,n,s,o,2)):i===2&&Lb(e,t,r,n,s,o):Gt(Dr(e),t,r,n,s,o,1);break}}},$b=e=>{let t=e.prev,r=e,n=e.next;if(Ie(t,r,n)>=0)return!1;let s=e.next.next;for(;s!==e.prev;){if(Zt(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&Ie(s.prev,s,s.next)>=0)return!1;s=s.next}return!0},Yb=(e,t,r,n)=>{let s=e.prev,o=e,i=e.next;if(Ie(s,o,i)>=0)return!1;let c=s.x<o.x?s.x<i.x?s.x:i.x:o.x<i.x?o.x:i.x,a=s.y<o.y?s.y<i.y?s.y:i.y:o.y<i.y?o.y:i.y,l=s.x>o.x?s.x>i.x?s.x:i.x:o.x>i.x?o.x:i.x,f=s.y>o.y?s.y>i.y?s.y:i.y:o.y>i.y?o.y:i.y,h=Gs(c,a,t,r,n),p=Gs(l,f,t,r,n),d=e.prevZ,m=e.nextZ;for(;d&&d.z>=h&&m&&m.z<=p;){if(d!==e.prev&&d!==e.next&&Zt(s.x,s.y,o.x,o.y,i.x,i.y,d.x,d.y)&&Ie(d.prev,d,d.next)>=0||(d=d.prevZ,m!==e.prev&&m!==e.next&&Zt(s.x,s.y,o.x,o.y,i.x,i.y,m.x,m.y)&&Ie(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&Zt(s.x,s.y,o.x,o.y,i.x,i.y,d.x,d.y)&&Ie(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==e.prev&&m!==e.next&&Zt(s.x,s.y,o.x,o.y,i.x,i.y,m.x,m.y)&&Ie(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0},Lb=(e,t,r,n,s,o)=>{let i=e;do{let c=i.next.next;for(;c!==i.prev;){if(i.i!==c.i&&Zb(i,c)){let a=Ib(i,c);i=Dr(i,i.next),a=Dr(a,a.next),Gt(i,t,r,n,s,o),Gt(a,t,r,n,s,o);return}c=c.next}i=i.next}while(i!==e)},Ub=(e,t,r,n)=>{let s=e;do s.z===null&&(s.z=Gs(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,Cb(s,o=>o.z)},Gs=(e,t,r,n,s)=>(e=32767*(e-r)*s,t=32767*(t-n)*s,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1);Tp.exports=Xb});var Vp=u((jN,Op)=>{var{area:Hb}=_e(),{toOutlines:Wb}=z(),{arePointsInside:_b}=dr(),Kb=e=>{let t=Wb(e),r=[],n=[];t.forEach((i,c)=>{let a=Hb(i);a<0?n.push(c):a>0&&r.push(c)});let s=[],o=[];return r.forEach((i,c)=>{let a=t[i];s[c]=[],n.forEach((l,f)=>{let h=t[l];_b([h[0]],{vertices:a})&&(s[c].push(l),o[f]||(o[f]=[]),o[f].push(c))})}),n.forEach((i,c)=>{if(o[c]&&o[c].length>1){let a=Qb(o[c],l=>s[l].length);o[c].forEach((l,f)=>{f!==a&&(s[l]=s[l].filter(h=>h!==i))})}}),s.map((i,c)=>({solid:t[r[c]],holes:i.map(a=>t[a])}))},Qb=(e,t)=>{let r,n;return e.forEach((s,o)=>{let i=t(s);(n===void 0||i<n)&&(r=o,n=i)}),r};Op.exports=Kb});var Rp=u((eR,Np)=>{var Jb=z(),Fp=fe(),jb=Z(),te=F(),e8=zs(),t8=Vp(),Is=class{constructor(t){this.plane=e8(t);let r=te.orthogonal(te.create(),this.plane),n=te.cross(te.create(),this.plane,r);this.v=te.normalize(n,n),this.u=te.cross(te.create(),this.v,this.plane),this.basisMap=new Map;let s=t.edges.map(i=>i.map(c=>this.to2D(c))),o=Jb.create(s);this.roots=t8(o)}to2D(t){let r=jb.fromValues(te.dot(t,this.u),te.dot(t,this.v));return this.basisMap.set(r,t),r}to3D(t){let r=this.basisMap.get(t);if(r)return r;{console.log("Warning: point not in original slice");let n=te.scale(te.create(),this.u,t[0]),s=te.scale(te.create(),this.v,t[1]),o=te.scale(te.create(),Fp,Fp[3]),i=te.add(n,n,o);return te.add(s,s,i)}}};Np.exports=Is});var zp=u((tR,Bp)=>{var r8=X(),n8=kp(),s8=Rp(),o8=e=>{let t=new s8(e),r=[];return t.roots.forEach(({solid:n,holes:s})=>{let o=n.length,i=[];s.forEach((h,p)=>{i.push(o),o+=h.length});let c=[n,...s].flat(),a=c.flat(),l=h=>t.to3D(c[h]),f=n8(a,i);for(let h=0;h<f.length;h+=3){let p=f.slice(h,h+3).map(l);r.push(r8.fromPointsAndPlane(p,t.plane))}}),r};Bp.exports=o8});var Zp=u((rR,Dp)=>{var Cp=F(),i8=e=>e.reduce((t,r)=>t+=`[${Cp.toString(r[0])}, ${Cp.toString(r[1])}], `,""),c8=e=>`[${i8(e.edges)}]`;Dp.exports=c8});var Ip=u((nR,Gp)=>{var Zr=F(),a8=ke(),l8=(e,t)=>{let r=t.edges.map(n=>[Zr.transform(Zr.create(),n[0],e),Zr.transform(Zr.create(),n[1],e)]);return a8(r)};Gp.exports=l8});var Xe=u((sR,Xp)=>{Xp.exports={calculatePlane:zs(),clone:np(),create:ke(),equals:op(),fromPoints:cp(),fromSides:lp(),isA:fp(),reverse:pp(),toEdges:gp(),toPolygons:zp(),toString:Zp(),transform:Ip()}});var Lp=u((oR,Yp)=>{var $p=F(),u8=ke(),f8=e=>{if(!e.edges)return e;let t=e.edges,r=new Map,n=new Map;t=t.filter(i=>!$p.equals(i[0],i[1])),t.forEach(i=>{let c=i[0].toString(),a=i[1].toString();r.set(c,i[0]),r.set(a,i[1]),n.set(c,(n.get(c)||0)+1),n.set(a,(n.get(a)||0)-1)});let s=[],o=[];return n.forEach((i,c)=>{i<0&&s.push(c),i>0&&o.push(c)}),s.forEach(i=>{let c=r.get(i),a=1/0,l;o.forEach(f=>{let h=r.get(f),p=$p.distance(c,h);p<a&&(a=p,l=h)}),console.warn(`slice.repair: repairing vertex gap ${c} to ${l} distance ${a}`),t=t.map(f=>f[0].toString()===i?[l,f[1]]:f[1].toString()===i?[f[0],l]:f)}),u8(t)};Yp.exports=f8});var Qp=u((iR,Kp)=>{var{EPS:Up}=I(),st=F(),Gr=X(),Hp=Xe(),Xs=(e,t)=>e===t?e:e<t?Xs(t,e):t===1?1:t===0?e:Xs(t,e%t),h8=(e,t)=>e*t/Xs(e,t),Wp=(e,t)=>{let r=e/t.length;if(r===1)return t;let n=st.fromValues(r,r,r),s=[];return t.forEach(o=>{let i=st.subtract(st.create(),o[1],o[0]);st.divide(i,i,n);let c=o[0];for(let a=1;a<=r;++a){let l=st.add(st.create(),c,i);s.push([c,l]),c=l}}),s},_p=Up*Up/2*Math.sin(Math.PI/3),p8=(e,t)=>{let r=Hp.toEdges(e),n=Hp.toEdges(t);if(r.length!==n.length){let o=h8(r.length,n.length);o!==r.length&&(r=Wp(o,r)),o!==n.length&&(n=Wp(o,n))}let s=[];return r.forEach((o,i)=>{let c=n[i],a=Gr.create([o[0],o[1],c[1]]),l=Gr.measureArea(a);Number.isFinite(l)&&l>_p&&s.push(a);let f=Gr.create([o[0],c[1],c[0]]),h=Gr.measureArea(f);Number.isFinite(h)&&h>_p&&s.push(f)}),s};Kp.exports=p8});var It=u((cR,td)=>{var Jp=Y(),jp=z(),d8=C(),$s=X(),Oe=Xe(),g8=Lp(),ed=Qp(),m8=(e,t,r)=>{let n=null;return jp.isA(r)&&(n=Oe.fromSides(jp.toSides(r))),$s.isA(r)&&(n=Oe.fromPoints($s.toPoints(r))),e===0||e===1?Oe.transform(Jp.fromTranslation(Jp.create(),[0,0,e]),n):null},q8=(e,t)=>{let r={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:m8},{numberOfSlices:n,capStart:s,capEnd:o,close:i,repair:c,callback:a}=Object.assign({},r,e);if(n<2)throw new Error("numberOfSlices must be 2 or more");c&&(t=g8(t));let l=n-1,f=null,h=null,p=null,d=[];for(let m=0;m<n;m++){let g=a(m/l,m,t);if(g){if(!Oe.isA(g))throw new Error("the callback function must return slice objects");if(Oe.toEdges(g).length===0)throw new Error("the callback function must return slices with one or more edges");p&&(d=d.concat(ed(p,g))),m===0&&(f=g),m===n-1&&(h=g),p=g}}if(o){let m=Oe.toPolygons(h);d=d.concat(m)}if(s){let m=Oe.toPolygons(f).map($s.invert);d=d.concat(m)}return!s&&!o&&i&&!Oe.equals(h,f)&&(d=d.concat(ed(h,f))),d8.create(d)};td.exports=q8});var Ls=u((aR,rd)=>{var{TAU:ue}=I(),Xt=Y(),{mirrorX:x8}=nt(),$t=z(),Ys=Xe(),w8=It(),v8=(e,t)=>{let r={segments:12,startAngle:0,angle:ue,overflow:"cap"},{segments:n,startAngle:s,angle:o,overflow:i}=Object.assign({},r,e);if(n<3)throw new Error("segments must be greater then 3");s=Math.abs(s)>ue?s%ue:s,o=Math.abs(o)>ue?o%ue:o;let c=s+o;if(c=Math.abs(c)>ue?c%ue:c,c<s){let v=s;s=c,c=v}let a=c-s;if(a<=0&&(a=ue),Math.abs(a)<ue){let v=ue/n;n=Math.floor(Math.abs(a)/v),Math.abs(a)>n*v&&n++}let l=$t.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let f=l.filter(v=>v[0][0]<0),h=l.filter(v=>v[0][0]>=0);f.length>0&&h.length>0&&i==="cap"&&(f.length>h.length?(l=l.map(v=>{let E=v[0],x=v[1];return E=[Math.min(E[0],0),E[1]],x=[Math.min(x[0],0),x[1]],[E,x]}),t=$t.reverse($t.create(l)),t=x8(t)):h.length>=f.length&&(l=l.map(v=>{let E=v[0],x=v[1];return E=[Math.max(E[0],0),E[1]],x=[Math.max(x[0],0),x[1]],[E,x]}),t=$t.create(l)));let d=a/n,m=Math.abs(a)<ue,g=Ys.fromSides($t.toSides(t));Ys.reverse(g,g);let q=Xt.create(),w=(v,E,x)=>{let P=d*E+s;return a===ue&&E===n&&(P=s),Xt.multiply(q,Xt.fromZRotation(q,P),Xt.fromXRotation(Xt.create(),ue/4)),Ys.transform(q,x)};return e={numberOfSlices:n+1,capStart:m,capEnd:m,close:!m,callback:w},w8(e,g)};rd.exports=v8});var ot=u((lR,cd)=>{var y8=B(),nd=Y(),sd=z(),od=C(),id=$(),Ir=(e,...t)=>{if(!Array.isArray(e))throw new Error("angles must be an array");if(t=y8(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=e[2],n=e[1],s=e[0],o=nd.fromTaitBryanRotation(nd.create(),r,n,s),i=t.map(c=>id.isA(c)?id.transform(o,c):sd.isA(c)?sd.transform(o,c):od.isA(c)?od.transform(o,c):c);return i.length===1?i[0]:i},E8=(e,...t)=>Ir([e,0,0],t),P8=(e,...t)=>Ir([0,e,0],t),A8=(e,...t)=>Ir([0,0,e],t);cd.exports={rotate:Ir,rotateX:E8,rotateY:P8,rotateZ:A8}});var Ve=u((uR,hd)=>{var b8=B(),ad=Y(),ld=z(),ud=C(),fd=$(),Xr=(e,...t)=>{if(!Array.isArray(e))throw new Error("offset must be an array");if(t=b8(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=ad.fromTranslation(ad.create(),e),n=t.map(s=>fd.isA(s)?fd.transform(r,s):ld.isA(s)?ld.transform(r,s):ud.isA(s)?ud.transform(r,s):s);return n.length===1?n[0]:n},M8=(e,...t)=>Xr([e,0,0],t),S8=(e,...t)=>Xr([0,e,0],t),T8=(e,...t)=>Xr([0,0,e],t);hd.exports={translate:Xr,translateX:M8,translateY:S8,translateZ:T8}});var dd=u((fR,pd)=>{var{TAU:k8}=I(),O8=Ls(),{rotate:V8}=ot(),{translate:F8}=Ve(),N8=Ms(),{isGT:Us,isGTE:Hs}=K(),R8=e=>{let t={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:k8},{innerRadius:r,innerSegments:n,outerRadius:s,outerSegments:o,innerRotation:i,startAngle:c,outerRotation:a}=Object.assign({},t,e);if(!Us(r,0))throw new Error("innerRadius must be greater than zero");if(!Hs(n,3))throw new Error("innerSegments must be three or more");if(!Us(s,0))throw new Error("outerRadius must be greater than zero");if(!Hs(o,3))throw new Error("outerSegments must be three or more");if(!Hs(c,0))throw new Error("startAngle must be positive");if(!Us(a,0))throw new Error("outerRotation must be greater than zero");if(r>=s)throw new Error("inner circle is two large to rotate about the outer circle");let l=N8({radius:r,segments:n});return i!==0&&(l=V8([0,0,i],l)),l=F8([s,0],l),O8({startAngle:c,angle:a,segments:o},l)};pd.exports=R8});var md=u((hR,gd)=>{var{NEPS:it}=I(),Yt=Z(),B8=z(),{isNumberArray:z8}=K(),Ws=(e,t,r)=>Math.acos((e*e+t*t-r*r)/(2*e*t)),C8=(e,t,r)=>t>it?Math.sqrt(e*e+r*r-2*e*r*Math.cos(t)):Math.sqrt((e-r)*(e-r)+e*r*t*t*(1-t*t/12)),D8=e=>{if(Math.abs(e[0]+e[1]+e[2]-Math.PI)>it)throw new Error("AAA triangles require angles that sum to PI");let r=e[0],n=e[1],s=Math.PI-r-n,o=1,i=o/Math.sin(s)*Math.sin(r),c=o/Math.sin(s)*Math.sin(n);return ct(r,n,s,i,c,o)},Z8=e=>{let t=e[0],r=e[1],n=Math.PI+it-t-r;if(n<it)throw new Error("AAS triangles require angles that sum to PI");let s=e[2],o=s/Math.sin(t)*Math.sin(r),i=s/Math.sin(t)*Math.sin(n);return ct(t,r,n,s,o,i)},G8=e=>{let t=e[0],r=e[2],n=Math.PI+it-t-r;if(n<it)throw new Error("ASA triangles require angles that sum to PI");let s=e[1],o=s/Math.sin(n)*Math.sin(t),i=s/Math.sin(n)*Math.sin(r);return ct(t,r,n,o,i,s)},I8=e=>{let t=e[0],r=e[1],n=e[2],s=C8(t,r,n),o=Ws(s,t,n),i=Math.PI-o-r;return ct(o,r,i,n,s,t)},X8=e=>{let t=e[0],r=e[1],n=e[2],s=Math.asin(r*Math.sin(n)/t),o=Math.PI-s-n,i=t/Math.sin(n)*Math.sin(o);return ct(s,o,n,r,i,t)},$8=e=>{let t=e[1],r=e[2],n=e[0];if(t+r<=n||r+n<=t||n+t<=r)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");let s=Ws(r,n,t),o=Ws(n,t,r),i=Math.PI-s-o;return ct(s,o,i,t,r,n)},ct=(e,t,r,n,s,o)=>{let i=Yt.fromValues(0,0),c=Yt.fromValues(o,0),a=Yt.fromValues(n,0);return Yt.add(a,Yt.rotate(a,a,[0,0],Math.PI-t),c),B8.fromPoints([i,c,a])},Y8=e=>{let t={type:"SSS",values:[1,1,1]},{type:r,values:n}=Object.assign({},t,e);if(typeof r!="string")throw new Error("triangle type must be a string");if(r=r.toUpperCase(),!((r[0]==="A"||r[0]==="S")&&(r[1]==="A"||r[1]==="S")&&(r[2]==="A"||r[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!z8(n,3))throw new Error("triangle values must contain three values");if(!n.every(s=>s>0))throw new Error("triangle values must be greater than zero");switch(r){case"AAA":return D8(n);case"AAS":return Z8(n);case"ASA":return G8(n);case"SAS":return I8(n);case"SSA":return X8(n);case"SSS":return $8(n);default:throw new Error("invalid triangle type, try again")}};gd.exports=Y8});var xd=u((pR,qd)=>{qd.exports={arc:Ch(),circle:Ms(),cube:Hh(),cuboid:Ar(),cylinder:Os(),cylinderElliptic:ks(),ellipse:bs(),ellipsoid:Vs(),geodesicSphere:f2(),line:p2(),polygon:g2(),polyhedron:Fs(),rectangle:br(),roundedCuboid:M2(),roundedCylinder:F2(),roundedRectangle:D2(),sphere:Bs(),square:I2(),star:L2(),torus:dd(),triangle:md()}});var vd=u((dR,wd)=>{wd.exports={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}});var _s=u((gR,yd)=>{var L8=vd(),U8={xOffset:0,yOffset:0,input:"?",align:"left",font:L8,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},H8=(e,t)=>{!t&&typeof e=="string"&&(e={input:e}),e=e||{};let r=Object.assign({},U8,e);return r.input=t||r.input,r};yd.exports=H8});var Ks=u((mR,Ed)=>{var W8=_s(),_8=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,extrudeOffset:c}=W8(e,t),a=s.charCodeAt(0);(!a||!o[a])&&(a=63);let l=[].concat(o[a]),f=(i-c)/o.height,h=c/2,p=l.shift()*f,d=[],m=[];for(let g=0,q=l.length;g<q;g+=2){let w=f*l[g]+r,v=f*l[g+1]+n+h;if(l[g]!==void 0){m.push([w,v]);continue}d.push(m),m=[],g--}return m.length&&d.push(m),{width:p,height:i,segments:d}};Ed.exports=_8});var bd=u((qR,Ad)=>{var K8=Ks(),Q8=_s(),Pd=(e,t)=>{let{x:r,y:n}=Object.assign({x:0,y:0},e||{}),s=t.segments,o=null,i=null;for(let c=0,a=s.length;c<a;c++){o=s[c];for(let l=0,f=o.length;l<f;l++)i=o[l],o[l]=[i[0]+r,i[1]+n]}return t},J8=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,align:c,extrudeOffset:a,lineSpacing:l,letterSpacing:f}=Q8(e,t),[h,p]=[r,n],d,m,g,q,w,v,E={width:0,segments:[]},x=[],P=[],y=0,A=h,b=()=>{x.push(E),y=Math.max(y,E.width),E={width:0,segments:[]}};for(d=0,m=s.length;d<m;d++){if(g=s[d],q=K8({xOffset:h,yOffset:p,font:o,height:i,extrudeOffset:a},g),g===`
`){h=A,p-=q.height*l,b();continue}w=q.width*f,E.width+=w,h+=w,g!==" "&&(E.segments=E.segments.concat(q.segments))}for(E.segments.length&&b(),d=0,m=x.length;d<m;d++)E=x[d],y>E.width&&(v=y-E.width,c==="right"?E=Pd({x:v},E):c==="center"&&(E=Pd({x:v/2},E))),P=P.concat(E.segments);return P};Ad.exports=J8});var Sd=u((xR,Md)=>{Md.exports={vectorChar:Ks(),vectorText:bd()}});var at=u((wR,Td)=>{var j8=z(),e6=C(),t6=$(),r6=e=>{let t;for(let r of e){let n=0;if(j8.isA(r)&&(n=1),e6.isA(r)&&(n=2),t6.isA(r)&&(n=3),t&&n!==t)return!1;t=n}return!0};Td.exports=r6});var Od=u((vR,kd)=>{var n6=e=>e*.017453292519943295;kd.exports=n6});var Qs=u((yR,Vd)=>{var s6=(e,t)=>e-t;Vd.exports=s6});var Nd=u((ER,Fd)=>{var o6=(e,t,r)=>{let n=0,s=e.length;for(;s>n;){let o=Math.floor((n+s)/2),i=e[o];r(t,i)>0?n=o+1:s=o}e.splice(n,0,t)};Fd.exports=o6});var zd=u((PR,Bd)=>{var{TAU:Rd}=I(),i6=(e,t,r)=>{let n=t>0?e*Rd/t:0,s=r>0?Rd/r:0;return Math.ceil(Math.max(n,s,4))};Bd.exports=i6});var Dd=u((AR,Cd)=>{var c6=e=>e*57.29577951308232;Cd.exports=c6});var Js=u((bR,Zd)=>{Zd.exports={areAllShapesTheSameType:at(),degToRad:Od(),flatten:B(),fnNumberSort:Qs(),insertSorted:Nd(),radiusToSegments:zd(),radToDeg:Dd()}});var $r=u((MR,Id)=>{var Gd=Z(),a6=z(),l6=(e,t)=>{if(t.vertices.length<4)return null;let r=[],n=t.vertices.filter((i,c)=>i[2]>0?(r.push(c),!0):!1);if(n.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");let s=n.map(i=>{let c=Math.round(i[0]/e)*e+0,a=Math.round(i[1]/e)*e+0;return Gd.fromValues(c,a)});if(Gd.equals(s[0],s[1]))return null;let o=r[1]-r[0];if(o===1||o===3)o===1&&s.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return s},u6=(e,t)=>{let r=t.map(n=>l6(e,n)).filter(n=>n!==null);return a6.create(r)};Id.exports=u6});var Yr=u((SR,Xd)=>{var Fe=F(),f6=z(),h6=C(),p6=X(),d6=(e,t,r)=>{let n=[Fe.fromVec2(Fe.create(),r[0],e),Fe.fromVec2(Fe.create(),r[1],e),Fe.fromVec2(Fe.create(),r[1],t),Fe.fromVec2(Fe.create(),r[0],t)];return p6.create(n)},g6=(e,t)=>{let n=f6.toSides(t).map(o=>d6(e.z0,e.z1,o));return h6.create(n)};Xd.exports=g6});var Ld=u((TR,Yd)=>{var $d=Y(),m6=Z(),Q=F(),$e=function(e,t){arguments.length<2&&(t=Q.orthogonal(Q.create(),e)),this.v=Q.normalize(Q.create(),Q.cross(Q.create(),e,t)),this.u=Q.cross(Q.create(),this.v,e),this.plane=e,this.planeorigin=Q.scale(Q.create(),e,e[3])};$e.GetCartesian=function(e,t){let r=e+"/"+t,n,s;if(r==="X/Y")n=[0,0,1],s=[1,0,0];else if(r==="Y/-X")n=[0,0,1],s=[0,1,0];else if(r==="-X/-Y")n=[0,0,1],s=[-1,0,0];else if(r==="-Y/X")n=[0,0,1],s=[0,-1,0];else if(r==="-X/Y")n=[0,0,-1],s=[-1,0,0];else if(r==="-Y/-X")n=[0,0,-1],s=[0,-1,0];else if(r==="X/-Y")n=[0,0,-1],s=[1,0,0];else if(r==="Y/X")n=[0,0,-1],s=[0,1,0];else if(r==="X/Z")n=[0,-1,0],s=[1,0,0];else if(r==="Z/-X")n=[0,-1,0],s=[0,0,1];else if(r==="-X/-Z")n=[0,-1,0],s=[-1,0,0];else if(r==="-Z/X")n=[0,-1,0],s=[0,0,-1];else if(r==="-X/Z")n=[0,1,0],s=[-1,0,0];else if(r==="-Z/-X")n=[0,1,0],s=[0,0,-1];else if(r==="X/-Z")n=[0,1,0],s=[1,0,0];else if(r==="Z/X")n=[0,1,0],s=[0,0,1];else if(r==="Y/Z")n=[1,0,0],s=[0,1,0];else if(r==="Z/-Y")n=[1,0,0],s=[0,0,1];else if(r==="-Y/-Z")n=[1,0,0],s=[0,-1,0];else if(r==="-Z/Y")n=[1,0,0],s=[0,0,-1];else if(r==="-Y/Z")n=[-1,0,0],s=[0,-1,0];else if(r==="-Z/-Y")n=[-1,0,0],s=[0,0,-1];else if(r==="Y/-Z")n=[-1,0,0],s=[0,1,0];else if(r==="Z/Y")n=[-1,0,0],s=[0,0,1];else throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");return new $e(new Plane(new Vector3D(n),0),new Vector3D(s))};$e.Z0Plane=function(){let e=new Plane(new Vector3D([0,0,1]),0);return new $e(e,new Vector3D([1,0,0]))};$e.prototype={getProjectionMatrix:function(){return $d.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){let e=Q.scale(Q.create(),this.plane,this.plane[3]);return $d.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,e[0],e[1],e[2],1)},to2D:function(e){return m6.fromValues(Q.dot(e,this.u),Q.dot(e,this.v))},to3D:function(e){let t=Q.scale(Q.create(),this.u,e[0]),r=Q.scale(Q.create(),this.v,e[1]),n=Q.add(t,t,this.planeorigin);return Q.add(r,r,n)},line3Dto2D:function(e){let t=e.point,r=e.direction.plus(t),n=this.to2D(t),s=this.to2D(r);return Line2D.fromPoints(n,s)},line2Dto3D:function(e){let t=e.origin(),r=e.direction().plus(t),n=this.to3D(t),s=this.to3D(r);return Line3D.fromPoints(n,s)},transform:function(e){let t=this.plane.transform(e),r=this.u.transform(e),n=new Vector3D(0,0,0).transform(e),s=r.minus(n);return new $e(t,s)}};Yd.exports=$e});var Wd=u((kR,Hd)=>{var{EPS:ye}=I(),Ne=wr(),he=Z(),q6=Ld(),lt=us(),{insertSorted:x6,fnNumberSort:w6}=Js(),Ud=X(),v6=e=>{if(e.length<2)return e;let t=[],r=e.length,n=Ud.plane(e[0]),s=new q6(n),o=[],i=[],c=new Map,a=new Map,l=new Map,f=10/ye;for(let m=0;m<r;m++){let g=e[m],q=[],w=g.vertices.length,v=-1;if(w>0){let E,x;for(let P=0;P<w;P++){let y=s.to2D(g.vertices[P]),A=Math.floor(y[1]*f),b;l.has(A)?b=l.get(A):l.has(A+1)?b=l.get(A+1):l.has(A-1)?b=l.get(A-1):(b=y[1],l.set(A,y[1])),y=he.fromValues(y[0],b),q.push(y);let M=y[1];(P===0||M<E)&&(E=M,v=P),(P===0||M>x)&&(x=M);let T=a.get(M);T||(T={},a.set(M,T)),T[m]=!0}if(E>=x)q=[],w=0,v=-1;else{let P=c.get(E);P||(P=[],c.set(E,P)),P.push(m)}}q.reverse(),v=w-v-1,o.push(q),i.push(v)}let h=[];a.forEach((m,g)=>h.push(g)),h.sort(w6);let p=[],d=[];for(let m=0;m<h.length;m++){let g=[],q=h[m],w=a.get(q);for(let E=0;E<p.length;++E){let x=p[E],P=x.polygonindex;if(w[P]){let y=o[P],A=y.length,b=x.leftvertexindex,M=x.rightvertexindex;for(;;){let S=b+1;if(S>=A&&(S=0),y[S][1]!==q)break;b=S}let T=M-1;if(T<0&&(T=A-1),y[T][1]===q&&(M=T),b!==x.leftvertexindex&&b===M)p.splice(E,1),--E;else{x.leftvertexindex=b,x.rightvertexindex=M,x.topleft=y[b],x.topright=y[M];let S=b+1;S>=A&&(S=0),x.bottomleft=y[S];let O=M-1;O<0&&(O=A-1),x.bottomright=y[O]}}}let v;if(m>=h.length-1)p=[],v=null;else{v=Number(h[m+1]);let E=.5*(q+v),x=c.get(q);for(let P in x){let y=x[P],A=o[y],b=A.length,M=i[y],T=M;for(;;){let D=T+1;if(D>=b&&(D=0),A[D][1]!==q||D===M)break;T=D}let S=M;for(;;){let D=S-1;if(D<0&&(D=b-1),A[D][1]!==q||D===T)break;S=D}let O=T+1;O>=b&&(O=0);let G=S-1;G<0&&(G=b-1);let R={polygonindex:y,leftvertexindex:T,rightvertexindex:S,topleft:A[T],topright:A[S],bottomleft:A[O],bottomright:A[G]};x6(p,R,(D,V)=>{let ee=lt(D.topleft,D.bottomleft,E),ne=lt(V.topleft,V.bottomleft,E);return ee>ne?1:ee<ne?-1:0})}}for(let E in p){let x=p[E],P=lt(x.topleft,x.bottomleft,q),y=he.fromValues(P,q);P=lt(x.topright,x.bottomright,q);let A=he.fromValues(P,q);P=lt(x.topleft,x.bottomleft,v);let b=he.fromValues(P,v);P=lt(x.topright,x.bottomright,v);let M=he.fromValues(P,v),T={topleft:y,topright:A,bottomleft:b,bottomright:M,leftline:Ne.fromPoints(Ne.create(),y,b),rightline:Ne.fromPoints(Ne.create(),M,A)};if(g.length>0){let S=g[g.length-1],O=he.distance(T.topleft,S.topright),G=he.distance(T.bottomleft,S.bottomright);O<ye&&G<ye&&(T.topleft=S.topleft,T.leftline=S.leftline,T.bottomleft=S.bottomleft,g.splice(g.length-1,1))}g.push(T)}if(m>0){let E=new Set,x=new Set;for(let P=0;P<g.length;P++){let y=g[P];for(let A=0;A<d.length;A++)if(!x.has(A)){let b=d[A];if(he.distance(b.bottomleft,y.topleft)<ye&&he.distance(b.bottomright,y.topright)<ye){x.add(A);let M=Ne.direction(y.leftline),T=Ne.direction(b.leftline),S=M[0]-T[0],O=Ne.direction(y.rightline),G=Ne.direction(b.rightline),R=O[0]-G[0],D=Math.abs(S)<ye,V=Math.abs(R)<ye,ee=D||S>=0,ne=V||R>=0;ee&&ne&&(y.outpolygon=b.outpolygon,y.leftlinecontinues=D,y.rightlinecontinues=V,E.add(A));break}}}for(let P=0;P<d.length;P++)if(!E.has(P)){let y=d[P];y.outpolygon.rightpoints.push(y.bottomright),he.distance(y.bottomright,y.bottomleft)>ye&&y.outpolygon.leftpoints.push(y.bottomleft),y.outpolygon.leftpoints.reverse();let b=y.outpolygon.rightpoints.concat(y.outpolygon.leftpoints).map(T=>s.to3D(T)),M=Ud.fromPointsAndPlane(b,n);M.vertices.length&&t.push(M)}}for(let E=0;E<g.length;E++){let x=g[E];x.outpolygon?(x.leftlinecontinues||x.outpolygon.leftpoints.push(x.topleft),x.rightlinecontinues||x.outpolygon.rightpoints.push(x.topright)):(x.outpolygon={leftpoints:[],rightpoints:[]},x.outpolygon.leftpoints.push(x.topleft),he.distance(x.topleft,x.topright)>ye&&x.outpolygon.rightpoints.push(x.topright))}d=g}return t};Hd.exports=v6});var ut=u((OR,Kd)=>{var _d=C(),y6=X(),{NEPS:E6}=I(),P6=Wd(),A6=e=>{if(e.isRetesselated)return e;let t=_d.toPolygons(e).map((o,i)=>({vertices:o.vertices,plane:y6.plane(o),index:i})),r=b6(t),n=[];r.forEach(o=>{if(Array.isArray(o)){let i=P6(o);n.push(...i)}else n.push(o)});let s=_d.create(n);return s.isRetesselated=!0,s},b6=e=>{let t=[e],r=[];for(let s=3;s>=0;s--){let o=[],i=s===3?15e-9:E6;t.forEach(c=>{c.sort(M6(s,i));let a=0;for(let l=1;l<c.length;l++)c[l].plane[s]-c[a].plane[s]>i&&(l-a===1?r.push(c[a]):o.push(c.slice(a,l)),a=l);c.length-a===1?r.push(c[a]):o.push(c.slice(a))}),t=o}let n=[];return t.forEach(s=>{s[0]&&(n[s[0].index]=s)}),r.forEach(s=>{n[s.index]=s}),n},M6=(e,t)=>(r,n)=>r.plane[e]-n.plane[e]>t?1:n.plane[e]-r.plane[e]>t?-1:0;Kd.exports=A6});var Lr=u((VR,Jd)=>{var{EPS:ft}=I(),Qd=be(),S6=(e,t)=>{if(e.polygons.length===0||t.polygons.length===0)return!1;let r=Qd(e),n=r[0],s=r[1],o=Qd(t),i=o[0],c=o[1];return!(i[0]-s[0]>ft||n[0]-c[0]>ft||i[1]-s[1]>ft||n[1]-c[1]>ft||i[2]-s[2]>ft||n[2]-c[2]>ft)};Jd.exports=S6});var t5=u((FR,e5)=>{var jd=fe(),T6=X(),ht=class{constructor(t){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=t}invert(){let t=[this],r;for(let n=0;n<t.length;n++){r=t[n],r.plane&&(r.plane=jd.flip(jd.create(),r.plane)),r.front&&t.push(r.front),r.back&&t.push(r.back);let s=r.front;r.front=r.back,r.back=s}}clipPolygons(t,r){let n={node:this,polygontreenodes:t},s,o=[];do{if(s=n.node,t=n.polygontreenodes,s.plane){let i=s.plane,c=[],a=[],l=r?c:a,f=t.length;for(let p=0;p<f;p++){let d=t[p];d.isRemoved()||d.splitByPlane(i,l,c,a,c)}s.front&&a.length>0&&o.push({node:s.front,polygontreenodes:a});let h=c.length;if(s.back&&h>0)o.push({node:s.back,polygontreenodes:c});else for(let p=0;p<h;p++)c[p].remove()}n=o.pop()}while(n!==void 0)}clipTo(t,r){let n=this,s=[];do n.polygontreenodes.length>0&&t.rootnode.clipPolygons(n.polygontreenodes,r),n.front&&s.push(n.front),n.back&&s.push(n.back),n=s.pop();while(n!==void 0)}addPolygonTreeNodes(t){let r={node:this,polygontreenodes:t},n=[];do{let s=r.node,o=r.polygontreenodes;if(o.length===0){r=n.pop();continue}if(!s.plane){let l=0;l=Math.floor(o.length/2);let f=o[l].getPolygon();s.plane=T6.plane(f)}let i=[],c=[],a=o.length;for(let l=0;l<a;++l)o[l].splitByPlane(s.plane,s.polygontreenodes,c,i,c);i.length>0&&(s.front||(s.front=new ht(s)),a===i.length&&c.length===0?s.front.polygontreenodes=i:n.push({node:s.front,polygontreenodes:i})),c.length>0&&(s.back||(s.back=new ht(s)),a===c.length&&i.length===0?s.back.polygontreenodes=c:n.push({node:s.back,polygontreenodes:c})),r=n.pop()}while(r!==void 0)}};e5.exports=ht});var n5=u((NR,r5)=>{var pt=F(),k6=(e,t,r)=>{let n=pt.subtract(pt.create(),r,t),s=(e[3]-pt.dot(e,t))/pt.dot(e,n);return Number.isNaN(s)&&(s=0),s>1&&(s=1),s<0&&(s=0),pt.scale(n,n,s),pt.add(n,t,n),n};r5.exports=k6});var o5=u((RR,s5)=>{var{EPS:Ur}=I(),O6=fe(),Hr=F(),js=X(),V6=n5(),F6=(e,t)=>{let r={type:null,front:null,back:null},n=t.vertices,s=n.length,o=js.plane(t);if(O6.equals(o,e))r.type=0;else{let i=!1,c=!1,a=[],l=-Ur;for(let f=0;f<s;f++){let h=Hr.dot(e,n[f])-e[3],p=h<l;a.push(p),h>Ur&&(i=!0),h<l&&(c=!0)}if(!i&&!c){let f=Hr.dot(e,o);r.type=f>=0?0:1}else if(!c)r.type=2;else if(!i)r.type=3;else{r.type=4;let f=[],h=[],p=a[0];for(let m=0;m<s;m++){let g=n[m],q=m+1;q>=s&&(q=0);let w=a[q];if(p===w)p?h.push(g):f.push(g);else{let v=n[q],E=V6(e,g,v);p?(h.push(g),h.push(E),f.push(E)):(f.push(g),f.push(E),h.push(E))}p=w}let d=Ur*Ur;if(h.length>=3){let m=h[h.length-1];for(let g=0;g<h.length;g++){let q=h[g];Hr.squaredDistance(q,m)<d&&(h.splice(g,1),g--),m=q}}if(f.length>=3){let m=f[f.length-1];for(let g=0;g<f.length;g++){let q=f[g];Hr.squaredDistance(q,m)<d&&(f.splice(g,1),g--),m=q}}f.length>=3&&(r.front=js.fromPointsAndPlane(f,o)),h.length>=3&&(r.back=js.fromPointsAndPlane(h,o))}}return r};s5.exports=F6});var a5=u((BR,c5)=>{var{EPS:N6}=I(),R6=F(),i5=X(),B6=o5(),Lt=class{constructor(t,r){this.parent=t,this.children=[],this.polygon=r,this.removed=!1}addPolygons(t){if(!this.isRootNode())throw new Error("Assertion failed");let r=this;t.forEach(n=>{r.addChild(n)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;let t=this.parent.children,r=t.indexOf(this);if(r<0)throw new Error("Assertion failed");t.splice(r,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(t){let r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s)for(r=n[s],o=0,i=r.length;o<i;o++)c=r[o],c.polygon?t.push(c.polygon):c.children.length>0&&n.push(c.children)}splitByPlane(t,r,n,s,o){if(this.children.length){let i=[this.children],c,a,l,f,h;for(c=0;c<i.length;c++)for(h=i[c],a=0,l=h.length;a<l;a++)f=h[a],f.children.length>0?i.push(f.children):f._splitByPlane(t,r,n,s,o)}else this._splitByPlane(t,r,n,s,o)}_splitByPlane(t,r,n,s,o){let i=this.polygon;if(i){let c=i5.measureBoundingSphere(i),a=c[3]+N6,l=c,f=R6.dot(t,l)-t[3];if(f>a)s.push(this);else if(f<-a)o.push(this);else{let h=B6(t,i);switch(h.type){case 0:r.push(this);break;case 1:n.push(this);break;case 2:s.push(this);break;case 3:o.push(this);break;case 4:if(h.front){let p=this.addChild(h.front);s.push(p)}if(h.back){let p=this.addChild(h.back);o.push(p)}break}}}}addChild(t){let r=new Lt(this,t);return this.children.push(r),r}invertSub(){let t=[this],r=[t],n,s,o,i;for(n=0;n<r.length;n++)for(t=r[n],s=0,o=t.length;s<o;s++)i=t[s],i.polygon&&(i.polygon=i5.invert(i.polygon)),i.children.length>0&&r.push(i.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let t=[this],r=[t];for(let n=0;n<r.length;++n){t=r[n];let s=t.length;for(let o=0;o<s;o++){let i=t[o];i.polygon&&(i.polygon=null),i.parent&&(i.parent=null),i.children.length>0&&r.push(i.children),i.children=[]}}}toString(){let t="",r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s){r=n[s];let a=" ".repeat(s);for(o=0,i=r.length;o<i;o++)c=r[o],t+=`${a}PolygonTreeNode (${c.isRootNode()}): ${c.children.length}`,c.polygon?t+=`
 ${a}polygon: ${c.polygon.vertices}
`:t+=`
`,c.children.length>0&&n.push(c.children)}return t}};c5.exports=Lt});var u5=u((zR,l5)=>{var z6=t5(),C6=a5(),eo=class{constructor(t){this.polygonTree=new C6,this.rootnode=new z6(null),t&&this.addPolygons(t)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(t,r=!1){this.rootnode.clipTo(t,r)}allPolygons(){let t=[];return this.polygonTree.getPolygons(t),t}addPolygons(t){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=this.polygonTree.addChild(t[n]);this.rootnode.addPolygonTreeNodes(r)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};l5.exports=eo});var Wr=u((CR,f5)=>{f5.exports={Tree:u5()}});var d5=u((DR,p5)=>{var _r=C(),D6=Lr(),{Tree:h5}=Wr(),Z6=(e,t)=>{if(!D6(e,t))return _r.create();let r=new h5(_r.toPolygons(e)),n=new h5(_r.toPolygons(t));r.invert(),n.clipTo(r),n.invert(),r.clipTo(n),n.clipTo(r),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return _r.create(s)};p5.exports=Z6});var to=u((ZR,g5)=>{var G6=B(),I6=ut(),X6=d5(),$6=(...e)=>{e=G6(e);let t=e.shift();return e.forEach(r=>{t=X6(t,r)}),t=I6(t),t};g5.exports=$6});var q5=u((GR,m5)=>{var Y6=B(),L6=C(),U6=we(),H6=$r(),W6=Yr(),_6=to(),K6=(...e)=>{e=Y6(e);let t=e.map(s=>W6({z0:-1,z1:1},s)),r=_6(t),n=U6(r);return H6(n,L6.toPolygons(r))};m5.exports=K6});var w5=u((IR,x5)=>{var Q6=B(),J6=at(),j6=z(),e7=C(),t7=q5(),r7=to(),n7=(...e)=>{if(e=Q6(e),e.length===0)throw new Error("wrong number of arguments");if(!J6(e))throw new Error("only intersect of the types are supported");let t=e[0];return j6.isA(t)?t7(e):e7.isA(t)?r7(e):t};x5.exports=n7});var E5=u((XR,y5)=>{var ro=F(),s7=we(),v5=C(),o7=e=>e.sort((t,r)=>t-r).filter((t,r,n)=>!r||t!==n[r-1]),i7=(e,t,r)=>{let n=`${t}`,s=e.get(n);s===void 0?e.set(n,[r]):s.push(r)},c7=(e,t)=>{let r=`${t}`;return e.get(r)},a7=e=>{let t=s7(e),r=v5.toPolygons(e),n=r.length,s=new Map,o=ro.create();r.forEach((f,h)=>{f.vertices.forEach(p=>{i7(s,ro.snap(o,p,t),h)})});let i=r.map(f=>{let h=[];return f.vertices.forEach(p=>{h=h.concat(c7(s,ro.snap(o,p,t)))}),{e:1,d:o7(h)}});s.clear();let c=0,a=i.length;for(let f=0;f<a;f++){let h=i[f];if(h.e>0){let p=new Array(n);p[f]=!0;do c=0,p.forEach((d,m)=>{let g=i[m];if(g.e>0){g.e=-1;for(let q=0;q<g.d.length;q++)p[g.d[q]]=!0;c++}});while(c>0);h.indexes=p}}let l=[];for(let f=0;f<a;f++)if(i[f].indexes){let h=[];i[f].indexes.forEach((p,d)=>h.push(r[d])),l.push(v5.create(h))}return l};y5.exports=a7});var A5=u(($R,P5)=>{var l7=B(),u7=C(),f7=E5(),h7=(...e)=>{if(e=l7(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>u7.isA(r)?f7(r):r);return t.length===1?t[0]:t};P5.exports=h7});var S5=u((YR,M5)=>{var Kr=C(),p7=Lr(),{Tree:b5}=Wr(),d7=(e,t)=>{if(!p7(e,t))return Kr.clone(e);let r=new b5(Kr.toPolygons(e)),n=new b5(Kr.toPolygons(t));r.invert(),r.clipTo(n),n.clipTo(r,!0),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return Kr.create(s)};M5.exports=d7});var no=u((LR,T5)=>{var g7=B(),m7=ut(),q7=S5(),x7=(...e)=>{e=g7(e);let t=e.shift();return e.forEach(r=>{t=q7(t,r)}),t=m7(t),t};T5.exports=x7});var O5=u((UR,k5)=>{var w7=B(),v7=C(),y7=we(),E7=$r(),P7=Yr(),A7=no(),b7=(...e)=>{e=w7(e);let t=e.map(s=>P7({z0:-1,z1:1},s)),r=A7(t),n=y7(r);return E7(n,v7.toPolygons(r))};k5.exports=b7});var F5=u((HR,V5)=>{var M7=B(),S7=at(),T7=z(),k7=C(),O7=O5(),V7=no(),F7=(...e)=>{if(e=M7(e),e.length===0)throw new Error("wrong number of arguments");if(!S7(e))throw new Error("only subtract of the types are supported");let t=e[0];return T7.isA(t)?O7(e):k7.isA(t)?V7(e):t};V5.exports=F7});var so=u((WR,R5)=>{var dt=C(),N7=Lr(),{Tree:N5}=Wr(),R7=(e,t)=>{if(!N7(e,t))return B7(e,t);let r=new N5(dt.toPolygons(e)),n=new N5(dt.toPolygons(t));r.clipTo(n,!1),n.clipTo(r),n.invert(),n.clipTo(r),n.invert();let s=r.allPolygons().concat(n.allPolygons());return dt.create(s)},B7=(e,t)=>{let r=dt.toPolygons(e);return r=r.concat(dt.toPolygons(t)),dt.create(r)};R5.exports=R7});var oo=u((_R,B5)=>{var z7=B(),C7=ut(),D7=so(),Z7=(...e)=>{e=z7(e);let t;for(t=1;t<e.length;t+=2)e.push(D7(e[t-1],e[t]));let r=e[t-1];return r=C7(r),r};B5.exports=Z7});var io=u((KR,z5)=>{var G7=B(),I7=C(),X7=we(),$7=$r(),Y7=Yr(),L7=oo(),U7=(...e)=>{e=G7(e);let t=e.map(s=>Y7({z0:-1,z1:1},s)),r=L7(t),n=X7(r);return $7(n,I7.toPolygons(r))};z5.exports=U7});var Qr=u((QR,C5)=>{var H7=B(),W7=at(),_7=z(),K7=C(),Q7=io(),J7=oo(),j7=(...e)=>{if(e=H7(e),e.length===0)throw new Error("wrong number of arguments");if(!W7(e))throw new Error("only unions of the same type are supported");let t=e[0];return _7.isA(t)?Q7(e):K7.isA(t)?J7(e):t};C5.exports=j7});var Z5=u((JR,D5)=>{D5.exports={intersect:w5(),scission:A5(),subtract:F5(),union:Qr()}});var Ht=u((jR,I5)=>{var{EPS:eM,TAU:tM}=I(),G5=fs(),Ut=wr(),H=Z(),rM=Vt(),nM=(e,t)=>{let r={delta:1,corners:"edge",closed:!1,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(Math.abs(n)<eM)return t;let c=e.closed?rM(t):1;c===0&&(c=1);let a=c>0&&n>=0||c<0&&n<0;n=Math.abs(n);let l=null,f=[],h=[],p=H.create(),d=t.length;for(let m=0;m<d;m++){let g=(m+1)%d,q=t[m],w=t[g];a?H.subtract(p,q,w):H.subtract(p,w,q),H.normal(p,p),H.normalize(p,p),H.scale(p,p,n);let v=H.add(H.create(),q,p),E=H.add(H.create(),w,p),x=[v,E];if(l!=null&&(o||!o&&g!==0)){let P=G5(l[0],l[1],x[0],x[1]);P?(f.pop(),x[0]=P):h.push({c:q,s0:l,s1:x})}l=[v,E],!(g===0&&!o)&&(f.push(x[0]),f.push(x[1]))}if(o&&l!=null){let m=f[0],g=f[1],q=G5(l[0],l[1],m,g);if(q)f[0]=q,f.pop();else{let w=t[0],v=[m,g];h.push({c:w,s0:l,s1:v})}}if(s==="edge"){let m=new Map;f.forEach((w,v)=>m.set(w,v));let g=Ut.create(),q=Ut.create();h.forEach(w=>{Ut.fromPoints(g,w.s0[0],w.s0[1]),Ut.fromPoints(q,w.s1[0],w.s1[1]);let v=Ut.intersectPointOfLines(g,q);if(Number.isFinite(v[0])&&Number.isFinite(v[1])){let E=w.s0[1],x=m.get(E);f[x]=v,f[(x+1)%f.length]=void 0}else{let E=w.s1[0],x=m.get(E);f[x]=void 0}}),f=f.filter(w=>w!==void 0)}if(s==="round"){let m=Math.floor(i/4),g=H.create();h.forEach(q=>{let w=H.angle(H.subtract(g,q.s1[0],q.c));if(w-=H.angle(H.subtract(g,q.s0[1],q.c)),a&&w<0&&(w=w+Math.PI,w<0&&(w=w+Math.PI)),!a&&w>0&&(w=w-Math.PI,w>0&&(w=w-Math.PI)),w!==0){m=Math.floor(i*(Math.abs(w)/tM));let v=w/m,E=H.angle(H.subtract(g,q.s0[1],q.c)),x=[];for(let P=1;P<m;P++){let y=E+v*P,A=H.fromAngleRadians(H.create(),y);H.scale(A,A,n),H.add(A,A,q.c),x.push(A)}if(x.length>0){let P=q.s0[1],y=f.findIndex(A=>H.equals(P,A));y=(y+1)%f.length,f.splice(y,0,...x)}}else{let v=q.s1[0],E=f.findIndex(x=>H.equals(v,x));f.splice(E,1)}})}return f};I5.exports=nM});var $5=u((eB,X5)=>{var Jr=z(),sM=Ht(),oM=(e,t)=>{let r={delta:1,corners:"edge",segments:16},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let a=Jr.toOutlines(t).map(l=>(e={delta:n,corners:s,closed:!0,segments:o},sM(e,l))).reduce((l,f)=>l.concat(Jr.toSides(Jr.fromPoints(f))),[]);return Jr.create(a)};X5.exports=oM});var U5=u((tB,L5)=>{var Y5=Y(),iM=F(),cM=C(),Wt=X(),aM=(e,t)=>{iM.dot(Wt.plane(t),e)>0&&(t=Wt.invert(t));let n=[t],s=Wt.transform(Y5.fromTranslation(Y5.create(),e),t),o=t.vertices.length;for(let i=0;i<o;i++){let c=i<o-1?i+1:0,a=Wt.create([t.vertices[i],s.vertices[i],s.vertices[c],t.vertices[c]]);n.push(a)}return n.push(Wt.invert(s)),cM.create(n)};L5.exports=aM});var _5=u((rB,W5)=>{var{EPS:lM,TAU:co}=I(),H5=Y(),L=F(),uM=Qs(),ao=C(),Ye=X(),fM=Bs(),hM=ut(),lo=so(),pM=U5(),dM=(e,t,r)=>{let n=t.toString();if(e.has(n))e.get(n)[1].push(r);else{let s=[t,[r]];e.set(n,s)}},gM=(e,t,r)=>{let n=t[0].toString(),s=t[1].toString(),o=n<s?`${n},${s}`:`${s},${n}`;if(e.has(o))e.get(o)[1].push(r);else{let i=[t,[r]];e.set(o,i)}},uo=(e,t)=>{e.findIndex(n=>n===t)<0&&e.push(t)},mM=(e,t)=>{let r={delta:1,segments:12},{delta:n,segments:s}=Object.assign({},r,e),o=ao.create(),i=new Map,c=new Map,a=L.create(),l=L.create();return ao.toPolygons(t).forEach((h,p)=>{let d=L.scale(L.create(),Ye.plane(h),2*n),m=Ye.transform(H5.fromTranslation(H5.create(),L.scale(L.create(),d,-.5)),h),g=pM(d,m);o=lo(o,g);let q=h.vertices;for(let w=0;w<q.length;w++){dM(i,q[w],Ye.plane(h));let v=(w+1)%q.length,E=[q[w],q[v]];gM(c,E,Ye.plane(h))}}),c.forEach(h=>{let p=h[0],d=h[1],m=p[0],g=p[1],q=L.subtract(L.create(),g,m);L.normalize(q,q);let w=d[0],v=L.cross(L.create(),w,q),E=[];for(let S=0;S<s;S++)uo(E,S*co/s);for(let S=0,O=d.length;S<O;S++){let G=d[S],R=L.dot(v,G),D=L.dot(w,G),V=Math.atan2(R,D);V<0&&(V+=co),uo(E,V),V=Math.atan2(-R,-D),V<0&&(V+=co),uo(E,V)}E=E.sort(uM);let x=E.length,P,y,A=[],b=[],M=[];for(let S=-1;S<x;S++){let O=E[S<0?S+x:S],G=Math.sin(O),R=Math.cos(O);L.scale(a,w,R*n),L.scale(l,v,G*n),L.add(a,a,l);let D=L.add(L.create(),m,a),V=L.add(L.create(),g,a),ee=!1;if(S>=0&&L.distance(D,P)<lM&&(ee=!0),!ee){if(S>=0){A.push(D),b.push(V);let ne=[y,V,D,P],Pe=Ye.create(ne);M.push(Pe)}P=D,y=V}}b.reverse(),M.push(Ye.create(A)),M.push(Ye.create(b));let T=ao.create(M);o=lo(o,T)}),i.forEach(h=>{let p=h[0],d=h[1],m=d[0],g=null,q=0;for(let x=1;x<d.length;x++){let P=d[x],y=L.cross(a,m,P),A=L.length(y);A>.05&&A>q&&(q=A,g=P)}g||(g=L.orthogonal(a,m));let w=L.cross(a,m,g);L.normalize(w,w);let v=L.cross(l,w,m),E=fM({center:[p[0],p[1],p[2]],radius:n,segments:s,axes:[m,w,v]});o=lo(o,E)}),hM(o)};W5.exports=mM});var Q5=u((nB,K5)=>{var qM=C(),xM=Qr(),wM=_5(),vM=(e,t)=>{let r={delta:1,corners:"round",segments:12},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(s!=="round")throw new Error('corners must be "round" for 3D geometries');if(qM.toPolygons(t).length===0)throw new Error("the given geometry cannot be empty");e={delta:n,corners:s,segments:o};let c=wM(e,t);return xM(t,c)};K5.exports=vM});var eg=u((sB,j5)=>{var yM=Vt(),ae=Z(),gt=z(),_t=$(),J5=Ht(),EM=e=>{let{external:t,internal:r}=e;yM(t)<0?t=t.reverse():r=r.reverse();let n=_t.fromPoints({closed:!0},t),s=_t.fromPoints({closed:!0},r),o=gt.toSides(gt.fromPoints(_t.toPoints(n))),i=gt.toSides(gt.fromPoints(_t.toPoints(s)));return o.push(...i),gt.create(o)},PM=(e,t,r,n)=>{let{points:s,external:o,internal:i}=e,c=Math.floor(t/2),a=[],l=[];if(r==="round"&&c>0){let h=Math.PI/c,p=s[s.length-1],d=ae.angle(ae.subtract(ae.create(),o[o.length-1],p)),m=s[0],g=ae.angle(ae.subtract(ae.create(),i[0],m));for(let q=1;q<c;q++){let w=d+h*q,v=ae.fromAngleRadians(ae.create(),w);ae.scale(v,v,n),ae.add(v,v,p),a.push(v),w=g+h*q,v=ae.fromAngleRadians(ae.create(),w),ae.scale(v,v,n),ae.add(v,v,m),l.push(v)}}let f=[];return f.push(...o,...a,...i.reverse(),...l),gt.fromPoints(f)},AM=(e,t)=>{e=Object.assign({},{delta:1,corners:"edge",segments:16},e);let{delta:n,corners:s,segments:o}=e;if(n<=0)throw new Error("the given delta must be positive for paths");if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=t.isClosed,c=_t.toPoints(t);if(c.length===0)throw new Error("the given geometry cannot be empty");let a={points:c,external:J5({delta:n,corners:s,segments:o,closed:i},c),internal:J5({delta:-n,corners:s,segments:o,closed:i},c)};return t.isClosed?EM(a):PM(a,o,s,n)};j5.exports=AM});var jr=u((oB,tg)=>{var bM=B(),MM=z(),SM=C(),TM=$(),kM=$5(),OM=Q5(),VM=eg(),FM=(e,...t)=>{if(t=bM(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>TM.isA(n)?VM(e,n):MM.isA(n)?kM(e,n):SM.isA(n)?OM(e,n):n);return r.length===1?r[0]:r};tg.exports=FM});var sg=u((iB,ng)=>{var en=z(),rg=dr(),NM=Ht(),RM=(e,t)=>{let r={delta:1,corners:"edge",segments:0},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=en.toOutlines(t),a=i.map(l=>(e={delta:i.reduce((p,d)=>p+rg.arePointsInside(l,rg.create(d)),0)%2===0?n:-n,corners:s,closed:!0,segments:o},NM(e,l))).reduce((l,f)=>l.concat(en.toSides(en.fromPoints(f))),[]);return en.create(a)};ng.exports=RM});var cg=u((cB,ig)=>{var og=$(),BM=Ht(),zM=(e,t)=>{let r={delta:1,corners:"edge",closed:t.isClosed,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');e={delta:n,corners:s,closed:o,segments:i};let c=BM(e,og.toPoints(t));return og.fromPoints({closed:o},c)};ig.exports=zM});var lg=u((aB,ag)=>{var CM=B(),DM=z(),ZM=$(),GM=sg(),IM=cg(),XM=(e,...t)=>{if(t=CM(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>ZM.isA(n)?IM(e,n):DM.isA(n)?GM(e,n):n);return r.length===1?r[0]:r};ag.exports=XM});var fg=u((lB,ug)=>{ug.exports={expand:jr(),offset:lg()}});var Qt=u((uB,hg)=>{var Kt=Y(),fo=F(),$M=z(),ho=Xe(),YM=It(),LM=(e,t)=>{let r={offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0},{offset:n,twistAngle:s,twistSteps:o,repair:i}=Object.assign({},r,e);if(o<1)throw new Error("twistSteps must be 1 or more");s===0&&(o=1);let c=fo.clone(n),a=$M.toSides(t);if(a.length===0)throw new Error("the given geometry cannot be empty");let l=ho.fromSides(a);c[2]<0&&ho.reverse(l,l);let f=Kt.create(),h=(p,d,m)=>{let g=d/o*s,q=fo.scale(fo.create(),c,d/o);return Kt.multiply(f,Kt.fromZRotation(f,g),Kt.fromTranslation(Kt.create(),q)),ho.transform(f,m)};return e={numberOfSlices:o+1,capStart:!0,capEnd:!0,repair:i,callback:h},YM(e,l)};hg.exports=LM});var dg=u((fB,pg)=>{var UM=z(),HM=$(),WM=Qt(),_M=(e,t)=>{if(!t.isClosed)throw new Error("extruded path must be closed");let r=HM.toPoints(t),n=UM.fromPoints(r);return WM(e,n)};pg.exports=_M});var mg=u((hB,gg)=>{var KM=B(),QM=z(),JM=$(),jM=Qt(),eS=dg(),tS=(e,...t)=>{let r={height:1,twistAngle:0,twistSteps:1,repair:!0},{height:n,twistAngle:s,twistSteps:o,repair:i}=Object.assign({},r,e);if(t=KM(t),t.length===0)throw new Error("wrong number of arguments");e={offset:[0,0,n],twistAngle:s,twistSteps:o,repair:i};let c=t.map(a=>JM.isA(a)?eS(e,a):QM.isA(a)?jM(e,a):a);return c.length===1?c[0]:c};gg.exports=tS});var xg=u((pB,qg)=>{var rS=$(),nS=jr(),sS=Qt(),oS=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(e.delta=n,e.offset=[0,0,s],rS.toPoints(t).length===0)throw new Error("the given geometry cannot be empty");let i=nS(e,t);return sS(e,i)};qg.exports=oS});var vg=u((dB,wg)=>{var{area:iS}=_e(),po=z(),cS=$(),aS=jr(),lS=Qt(),uS=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);e.delta=n,e.offset=[0,0,s];let o=po.toOutlines(t);if(o.length===0)throw new Error("the given geometry cannot be empty");let c=o.map(l=>(iS(l)<0&&l.reverse(),aS(e,cS.fromPoints({closed:!0},l)))).reduce((l,f)=>l.concat(po.toSides(f)),[]),a=po.create(c);return lS(e,a)};wg.exports=uS});var Eg=u((gB,yg)=>{var fS=B(),hS=z(),pS=$(),dS=xg(),gS=vg(),mS=(e,...t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(t=fS(t),t.length===0)throw new Error("wrong number of arguments");if(n<=0)throw new Error("size must be positive");if(s<=0)throw new Error("height must be positive");let o=t.map(i=>pS.isA(i)?dS(e,i):hS.isA(i)?gS(e,i):i);return o.length===1?o[0]:o};yg.exports=mS});var Ag=u((mB,Pg)=>{var{TAU:Jt}=I(),go=Xe(),me=Y(),qS=It(),xS=z(),wS=(e,t)=>{let r={angle:Jt,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:n,endOffset:s,segmentsPerRotation:o,startAngle:i}=Object.assign({},r,e),c;if(!e.pitch&&e.height?c=e.height/(n/Jt):c=e.pitch?e.pitch:r.pitch,o<3)throw new Error("The number of segments per rotation needs to be at least 3.");let l=xS.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let f=l.filter(w=>w[0][0]>=0),h=go.fromSides(l);f.length===0&&(h=go.reverse(h));let p=Math.round(o/Jt*Math.abs(n)),d=p>=2?p:2,m=me.create(),g,q=(w,v,E)=>{let x=i+n/d*v,P=s/d*v,y=(x-i)/Jt*c;return me.multiply(m,me.fromTranslation(me.create(),[P,0,y*Math.sign(n)]),me.fromXRotation(me.create(),-Jt/4*Math.sign(n))),g=me.create(),me.multiply(g,me.fromZRotation(me.create(),x),m),go.transform(g,E)};return qS({numberOfSlices:d+1,callback:q},h)};Pg.exports=wS});var Og=u((qB,kg)=>{var vS=B(),bg=xr(),mo=fe(),Mg=Y(),Sg=z(),Tg=C(),mt=X(),yS=we(),ES=io(),PS=(e,t)=>{let r=mo.fromNormalAndPoint(mo.create(),e.axis,e.origin);if(Number.isNaN(r[0])||Number.isNaN(r[1])||Number.isNaN(r[2])||Number.isNaN(r[3]))throw new Error("project: invalid axis or origin");let n=yS(t),s=n*n*Math.sqrt(3)/4;if(n===0)return Sg.create();let o=Tg.toPolygons(t),i=[];for(let a=0;a<o.length;a++){let l=o[a].vertices.map(p=>mo.projectionOfPoint(r,p)),f=mt.create(l),h=mt.plane(f);bg(r,h)&&(mt.measureArea(f)<s||i.push(f))}if(!bg(r,[0,0,1])){let a=Mg.fromVectorRotation(Mg.create(),r,[0,0,1]);i=i.map(l=>mt.transform(a,l))}i=i.sort((a,l)=>mt.measureArea(l)-mt.measureArea(a));let c=i.map(a=>Sg.fromPoints(a.vertices));return ES(c)},AS=(e,...t)=>{let r={axis:[0,0,1],origin:[0,0,0]},{axis:n,origin:s}=Object.assign({},r,e);if(t=vS(t),t.length===0)throw new Error("wrong number of arguments");e={axis:n,origin:s};let o=t.map(i=>Tg.isA(i)?PS(e,i):i);return o.length===1?o[0]:o};kg.exports=AS});var Fg=u((xB,Vg)=>{Vg.exports={extrudeFromSlices:It(),extrudeLinear:mg(),extrudeRectangular:Eg(),extrudeRotate:Ls(),extrudeHelical:Ag(),project:Og(),slice:Xe()}});var qo=u((wB,Rg)=>{var Ng=Z(),bS=e=>{let t=Ng.fromValues(1/0,1/0);e.forEach(s=>{(s[1]<t[1]||s[1]===t[1]&&s[0]<t[0])&&(t=s)});let r=[];e.forEach(s=>{let o=SS(s[1]-t[1],s[0]-t[0]),i=Ng.squaredDistance(s,t);r.push({point:s,angle:o,distSq:i})}),r.sort((s,o)=>s.angle!==o.angle?s.angle-o.angle:s.distSq-o.distSq);let n=[];return r.forEach(s=>{let o=n.length;for(;o>1&&MS(n[o-2],n[o-1],s.point)<=Number.EPSILON;)n.pop(),o=n.length;n.push(s.point)}),n},MS=(e,t,r)=>(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0]),SS=(e,t)=>e===0&&t===0?-1/0:-t/e;Rg.exports=bS});var tn=u((vB,Dg)=>{var Bg=z(),zg=C(),Cg=$(),TS=e=>{let t=new Set,r=[],n=s=>{let o=s.toString();t.has(o)||(r.push(s),t.add(o))};return e.forEach(s=>{Bg.isA(s)?Bg.toPoints(s).forEach(n):zg.isA(s)?zg.toPoints(s).forEach(o=>o.forEach(n)):Cg.isA(s)&&Cg.toPoints(s).forEach(n)}),r};Dg.exports=TS});var Gg=u((yB,Zg)=>{var kS=B(),OS=$(),VS=qo(),FS=tn(),NS=(...e)=>{e=kS(e);let t=FS(e),r=VS(t);return OS.fromPoints({closed:!0},r)};Zg.exports=NS});var $g=u((EB,Xg)=>{var RS=B(),Ig=z(),BS=qo(),zS=tn(),CS=(...e)=>{e=RS(e);let t=zS(e),r=BS(t);return r.length<3?Ig.create():Ig.fromPoints(r)};Xg.exports=CS});var Hg=u((PB,Ug)=>{var DS=He(),Yg=Et(),Lg=bn(),ZS=(e,t,r)=>{let n=[],s=[],o=[];Yg(n,r,t),Yg(s,e,t);let i=Lg(DS(o,s,n)),c=Lg(n);if(c===0)throw Error("a and b are the same point");return i/c},GS=(e,t,r)=>Math.sqrt(ZS(e,t,r));Ug.exports=GS});var Kg=u((AB,_g)=>{var IS=He(),XS=ir(),Wg=Et(),$S=(e,t,r,n)=>{let s=[0,0,0];return Wg(e,t,r),Wg(s,r,n),IS(e,e,s),XS(e,e)};_g.exports=$S});var Jg=u((bB,Qg)=>{var xo=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(t,r){r.prev=t.prev,r.next=t,r.prev?r.prev.next=r:this.head=r,t.prev=r}insertAfter(t,r){r.prev=t,r.next=t.next,r.next?r.next.prev=r:this.tail=r,t.next=r}add(t){this.head?this.tail.next=t:this.head=t,t.prev=this.tail,t.next=null,this.tail=t}addAll(t){for(this.head?this.tail.next=t:this.head=t,t.prev=this.tail;t.next;)t=t.next;this.tail=t}remove(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeChain(t,r){t.prev?t.prev.next=r.next:this.head=r.next,r.next?r.next.prev=t.prev:this.tail=t.prev}first(){return this.head}isEmpty(){return!this.head}};Qg.exports=xo});var em=u((MB,jg)=>{var wo=class{constructor(t,r){this.point=t,this.index=r,this.next=null,this.prev=null,this.face=null}};jg.exports=wo});var rm=u((SB,tm)=>{var YS=wn(),LS=An(),vo=class{constructor(t,r){this.vertex=t,this.face=r,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?YS(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?LS(this.tail().point,this.head().point):-1}setOpposite(t){this.opposite=t,t.opposite=this}};tm.exports=vo});var om=u((TB,sm)=>{var yo=qn(),US=xn(),HS=He(),Eo=vt(),WS=vn(),_S=ir(),rn=Pn(),Po=Et(),Ao=rm(),nm=0,KS=1,bo=2,jt=class{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=nm,this.edge=null,this.nVertices=0}getEdge(t){if(typeof t!="number")throw Error("requires a number");let r=this.edge;for(;t>0;)r=r.next,t-=1;for(;t<0;)r=r.prev,t+=1;return r}computeNormal(){let t=this.edge,r=t.next,n=r.next,s=Po([],r.head().point,t.head().point),o=[],i=[];for(this.nVertices=2,this.normal=[0,0,0];n!==t;)US(i,s),Po(s,n.head().point,t.head().point),yo(this.normal,this.normal,HS(o,i,s)),n=n.next,this.nVertices+=1;this.area=WS(this.normal),this.normal=rn(this.normal,this.normal,1/this.area)}computeNormalMinArea(t){if(this.computeNormal(),this.area<t){let r,n=0,s=this.edge;do{let f=s.lengthSquared();f>n&&(r=s,n=f),s=s.next}while(s!==this.edge);let o=r.tail().point,i=r.head().point,c=Po([],i,o),a=Math.sqrt(n);rn(c,c,1/a);let l=Eo(this.normal,c);rn(c,c,-l),yo(this.normal,this.normal,c),_S(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let t=this.edge;do yo(this.centroid,this.centroid,t.head().point),t=t.next;while(t!==this.edge);rn(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(t){typeof t<"u"?this.computeNormalMinArea(t):this.computeNormal(),this.computeCentroid(),this.offset=Eo(this.normal,this.centroid)}distanceToPlane(t){return Eo(this.normal,t)-this.offset}connectHalfEdges(t,r){let n;if(t.opposite.face===r.opposite.face){let s=r.opposite.face,o;t===this.edge&&(this.edge=r),s.nVertices===3?(o=r.opposite.prev.opposite,s.mark=bo,n=s):(o=r.opposite.next,s.edge===o.prev&&(s.edge=o),o.prev=o.prev.prev,o.prev.next=o),r.prev=t.prev,r.prev.next=r,r.setOpposite(o),s.computeNormalAndCentroid()}else t.next=r,r.prev=t;return n}mergeAdjacentFaces(t,r){let n=t.opposite,s=n.face;r.push(s),s.mark=bo;let o=t.prev,i=t.next,c=n.prev,a=n.next;for(;o.opposite.face===s;)o=o.prev,a=a.next;for(;i.opposite.face===s;)i=i.next,c=c.prev;let l;for(l=a;l!==c.next;l=l.next)l.face=this;this.edge=i;let f;return f=this.connectHalfEdges(c,i),f&&r.push(f),f=this.connectHalfEdges(o,a),f&&r.push(f),this.computeNormalAndCentroid(),r}collectIndices(){let t=[],r=this.edge;do t.push(r.head().index),r=r.next;while(r!==this.edge);return t}static createTriangle(t,r,n,s=0){let o=new jt,i=new Ao(t,o),c=new Ao(r,o),a=new Ao(n,o);return i.next=a.prev=c,c.next=i.prev=a,a.next=c.prev=i,o.edge=i,o.computeNormalAndCentroid(s),o}};sm.exports={VISIBLE:nm,NON_CONVEX:KS,DELETED:bo,Face:jt}});var um=u((kB,lm)=>{var Mo=vt(),QS=Hg(),JS=Kg(),im=Jg(),jS=em(),{Face:Ee,VISIBLE:qt,NON_CONVEX:cm,DELETED:e9}=om(),t9=1,am=2,So=class{constructor(t){if(!Array.isArray(t))throw TypeError("input is not a valid array");if(t.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=t.length,this.faces=[],this.newFaces=[],this.claimed=new im,this.unclaimed=new im,this.vertices=[];for(let r=0;r<t.length;r+=1)this.vertices.push(new jS(t[r],r));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(t,r){t.face=r,r.outside?this.claimed.insertBefore(r.outside,t):this.claimed.add(t),r.outside=t}removeVertexFromFace(t,r){t===r.outside&&(t.next&&t.next.face===r?r.outside=t.next:r.outside=null),this.claimed.remove(t)}removeAllVerticesFromFace(t){if(t.outside){let r=t.outside;for(;r.next&&r.next.face===t;)r=r.next;return this.claimed.removeChain(t.outside,r),r.next=null,t.outside}}deleteFaceVertices(t,r){let n=this.removeAllVerticesFromFace(t);if(n)if(!r)this.unclaimed.addAll(n);else{let s;for(let o=n;o;o=s)s=o.next,r.distanceToPlane(o.point)>this.tolerance?this.addVertexToFace(o,r):this.unclaimed.add(o)}}resolveUnclaimedPoints(t){let r=this.unclaimed.first();for(let n=r;n;n=r){r=n.next;let s=this.tolerance,o;for(let i=0;i<t.length;i+=1){let c=t[i];if(c.mark===qt){let a=c.distanceToPlane(n.point);if(a>s&&(s=a,o=c),s>1e3*this.tolerance)break}}o&&this.addVertexToFace(n,o)}}computeExtremes(){let t=[],r=[],n=[],s=[],o,i;for(o=0;o<3;o+=1)n[o]=s[o]=this.vertices[0];for(o=0;o<3;o+=1)t[o]=r[o]=this.vertices[0].point[o];for(o=1;o<this.vertices.length;o+=1){let c=this.vertices[o],a=c.point;for(i=0;i<3;i+=1)a[i]<t[i]&&(t[i]=a[i],n[i]=c);for(i=0;i<3;i+=1)a[i]>r[i]&&(r[i]=a[i],s[i]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(t[0]),Math.abs(r[0]))+Math.max(Math.abs(t[1]),Math.abs(r[1]))+Math.max(Math.abs(t[2]),Math.abs(r[2]))),[n,s]}createInitialSimplex(){let t=this.vertices,[r,n]=this.computeExtremes(),s,o,i,c,a=0,l=0;for(i=0;i<3;i+=1){let g=n[i].point[i]-r[i].point[i];g>a&&(a=g,l=i)}let f=r[l],h=n[l];for(a=0,i=0;i<this.vertices.length;i+=1){let g=this.vertices[i];if(g!==f&&g!==h){let q=QS(g.point,f.point,h.point);q>a&&(a=q,s=g)}}let p=JS([],f.point,h.point,s.point),d=Mo(f.point,p);for(a=-1,i=0;i<this.vertices.length;i+=1){let g=this.vertices[i];if(g!==f&&g!==h&&g!==s){let q=Math.abs(Mo(p,g.point)-d);q>a&&(a=q,o=g)}}let m=[];if(Mo(o.point,p)-d<0)for(m.push(Ee.createTriangle(f,h,s),Ee.createTriangle(o,h,f),Ee.createTriangle(o,s,h),Ee.createTriangle(o,f,s)),i=0;i<3;i+=1){let g=(i+1)%3;m[i+1].getEdge(2).setOpposite(m[0].getEdge(g)),m[i+1].getEdge(1).setOpposite(m[g+1].getEdge(0))}else for(m.push(Ee.createTriangle(f,s,h),Ee.createTriangle(o,f,h),Ee.createTriangle(o,h,s),Ee.createTriangle(o,s,f)),i=0;i<3;i+=1){let g=(i+1)%3;m[i+1].getEdge(2).setOpposite(m[0].getEdge((3-i)%3)),m[i+1].getEdge(0).setOpposite(m[g+1].getEdge(1))}for(i=0;i<4;i+=1)this.faces.push(m[i]);for(i=0;i<t.length;i+=1){let g=t[i];if(g!==f&&g!==h&&g!==s&&g!==o){a=this.tolerance;let q;for(c=0;c<4;c+=1){let w=m[c].distanceToPlane(g.point);w>a&&(a=w,q=m[c])}q&&this.addVertexToFace(g,q)}}}reindexFaceAndVertices(){let t=[];for(let r=0;r<this.faces.length;r+=1){let n=this.faces[r];n.mark===qt&&t.push(n)}this.faces=t}collectFaces(t){let r=[];for(let n=0;n<this.faces.length;n+=1){if(this.faces[n].mark!==qt)throw Error("attempt to include a destroyed face in the hull");let s=this.faces[n].collectIndices();if(t)r.push(s);else for(let o=0;o<s.length-2;o+=1)r.push([s[0],s[o+1],s[o+2]])}return r}nextVertexToAdd(){if(!this.claimed.isEmpty()){let t,r,n=0,s=this.claimed.first().face;for(r=s.outside;r&&r.face===s;r=r.next){let o=s.distanceToPlane(r.point);o>n&&(n=o,t=r)}return t}}computeHorizon(t,r,n,s){this.deleteFaceVertices(n),n.mark=e9;let o;r?o=r.next:o=r=n.getEdge(0);do{let i=o.opposite,c=i.face;c.mark===qt&&(c.distanceToPlane(t)>this.tolerance?this.computeHorizon(t,i,c,s):s.push(o)),o=o.next}while(o!==r)}addAdjoiningFace(t,r){let n=Ee.createTriangle(t,r.tail(),r.head());return this.faces.push(n),n.getEdge(-1).setOpposite(r.opposite),n.getEdge(0)}addNewFaces(t,r){this.newFaces=[];let n,s;for(let o=0;o<r.length;o+=1){let i=r[o],c=this.addAdjoiningFace(t,i);n?c.next.setOpposite(s):n=c,this.newFaces.push(c.face),s=c}n.next.setOpposite(s)}oppositeFaceDistance(t){return t.face.distanceToPlane(t.opposite.face.centroid)}doAdjacentMerge(t,r){let n=t.edge,s=!0,o=0;do{if(o>=t.nVertices)throw Error("merge recursion limit exceeded");let i=n.opposite.face,c=!1;if(r===am?(this.oppositeFaceDistance(n)>-this.tolerance||this.oppositeFaceDistance(n.opposite)>-this.tolerance)&&(c=!0):t.area>i.area?this.oppositeFaceDistance(n)>-this.tolerance?c=!0:this.oppositeFaceDistance(n.opposite)>-this.tolerance&&(s=!1):this.oppositeFaceDistance(n.opposite)>-this.tolerance?c=!0:this.oppositeFaceDistance(n)>-this.tolerance&&(s=!1),c){let a=t.mergeAdjacentFaces(n,[]);for(let l=0;l<a.length;l+=1)this.deleteFaceVertices(a[l],t);return!0}n=n.next,o+=1}while(n!==t.edge);return s||(t.mark=cm),!1}addVertexToHull(t){let r=[];this.unclaimed.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,r),this.addNewFaces(t,r);for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===qt)for(;this.doAdjacentMerge(s,t9););}for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===cm)for(s.mark=qt;this.doAdjacentMerge(s,am););}this.resolveUnclaimedPoints(this.newFaces)}build(){let t;for(this.createInitialSimplex();t=this.nextVertexToAdd();)this.addVertexToHull(t);this.reindexFaceAndVertices()}};lm.exports=So});var hm=u((OB,fm)=>{var r9=um(),n9=(e,t={})=>{let r=new r9(e);return r.build(),r.collectFaces(t.skipTriangulation)};fm.exports=n9});var dm=u((VB,pm)=>{var s9=B(),o9=C(),i9=X(),c9=hm(),a9=tn(),l9=(...e)=>{if(e=s9(e),e.length===1)return e[0];let t=a9(e),n=c9(t,{skipTriangulation:!0}).map(s=>{let o=s.map(i=>t[i]);return i9.create(o)});return o9.create(n)};pm.exports=l9});var To=u((FB,gm)=>{var u9=B(),f9=at(),h9=z(),p9=C(),d9=$(),g9=Gg(),m9=$g(),q9=dm(),x9=(...e)=>{if(e=u9(e),e.length===0)throw new Error("wrong number of arguments");if(!f9(e))throw new Error("only hulls of the same type are supported");let t=e[0];return d9.isA(t)?g9(e):h9.isA(t)?m9(e):p9.isA(t)?q9(e):t};gm.exports=x9});var qm=u((NB,mm)=>{var w9=B(),v9=Qr(),y9=To(),E9=(...e)=>{if(e=w9(e),e.length<2)throw new Error("wrong number of arguments");let t=[];for(let r=1;r<e.length;r++)t.push(y9(e[r-1],e[r]));return v9(t)};mm.exports=E9});var wm=u((RB,xm)=>{xm.exports={hull:To(),hullChain:qm()}});var Oo=u((BB,ym)=>{var ko=F(),vm=X(),P9=(e,t)=>{let r=Math.abs(vm.measureArea(t));return Number.isFinite(r)&&r>e},A9=(e,t)=>{let r=t.map(s=>{let o=s.vertices.map(a=>ko.snap(ko.create(),a,e)),i=[];for(let a=0;a<o.length;a++){let l=(a+1)%o.length;ko.equals(o[a],o[l])||i.push(o[a])}let c=vm.create(i);return s.color&&(c.color=s.color),c}),n=e*e*Math.sqrt(3)/4;return r=r.filter(s=>P9(n,s)),r};ym.exports=A9});var Am=u((zB,Pm)=>{var b9=xr(),xt=F(),nn=X(),M9=e=>{let t=nn.toPoints(e),r=[];for(let n=0;n<t.length;n++){let s=(n+1)%t.length,o={v1:t[n],v2:t[s]};r.push(o)}for(let n=0;n<r.length;n++){let s=(n+1)%t.length;r[n].next=r[s],r[s].prev=r[n]}return r},S9=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.set(r,t)},Vo=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.delete(r)},T9=(e,t)=>{let r=`${t.v2}:${t.v1}`;return e.get(r)},k9=(e,t,r)=>{let n=e.prev.v1,s=e.prev.v2,o=t.next.v2,i=Em(n,s,o,r);n=t.prev.v1,s=t.prev.v2,o=e.next.v2;let c=Em(n,s,o,r);return[i,c]},O9=xt.create(),V9=xt.create(),Em=(e,t,r,n)=>{let s=xt.subtract(O9,t,e),o=xt.subtract(V9,r,t);return xt.cross(s,s,o),xt.dot(s,n)},F9=e=>{let t,r=[];for(;e.next;){let n=e.next;r.push(e.v1),e.v1=null,e.v2=null,e.next=null,e.prev=null,e=n}return r.length>0&&(t=nn.create(r)),t},N9=e=>{if(e.length<2)return e;let t=e[0].plane,r=e.slice(),n=new Map;for(;r.length>0;){let o=r.shift(),i=M9(o);for(let c=0;c<i.length;c++){let a=i[c],l=T9(n,a);if(l){let f=k9(a,l,t);if(f[0]>=0&&f[1]>=0){let h=l.next,p=a.next;a.prev.next=l.next,a.next.prev=l.prev,l.prev.next=a.next,l.next.prev=a.prev,a.v1=null,a.v2=null,a.next=null,a.prev=null,Vo(n,l),l.v1=null,l.v2=null,l.next=null,l.prev=null;let d=(m,g,q)=>{let w={v1:q.v1,v2:g.v2,next:g.next,prev:q.prev};q.prev.next=w,g.next.prev=w,Vo(m,g),g.v1=null,g.v2=null,g.next=null,g.prev=null,Vo(m,q),q.v1=null,q.v2=null,q.next=null,q.prev=null};f[0]===0&&d(n,h,h.prev),f[1]===0&&d(n,p,p.prev)}}else a.next&&S9(n,a)}}let s=[];return n.forEach(o=>{let i=F9(o);i&&s.push(i)}),n.clear(),s},R9=(e,t)=>Math.abs(e[3]-t[3])<15e-8?b9(e,t):!1,B9=(e,t)=>{let r=[];t.forEach(s=>{let o=r.find(i=>R9(i[0],nn.plane(s)));o?o[1].push(s):r.push([nn.plane(s),[s]])});let n=[];return r.forEach(s=>{let o=s[1],i=N9(o);n=n.concat(i)}),n};Pm.exports=B9});var Tm=u((CB,Sm)=>{var bm=I(),qe=F(),z9=X(),Re=!1,re=e=>`${e}`,Mm=(e,t,r,n,s,o)=>{let i=re(n),c=re(s);if(Re&&i===c)throw new Error("assert failed");let a=`${i}/${c}`,l=`${c}/${i}`;if(e.has(l))return sn(e,t,r,s,n,null),null;let f={vertex0:n,vertex1:s,polygonindex:o};return e.has(a)?e.get(a).push(f):e.set(a,[f]),t.has(i)?t.get(i).push(a):t.set(i,[a]),r.has(c)?r.get(c).push(a):r.set(c,[a]),a},sn=(e,t,r,n,s,o)=>{let i=re(n),c=re(s),a=`${i}/${c}`;if(Re&&!e.has(a))throw new Error("assert failed");let l=-1,f=e.get(a);for(let h=0;h<f.length;h++){let p=f[h],d=re(p.vertex0);if(d===i&&(d=re(p.vertex1),d===c&&!(o!==null&&p.polygonindex!==o))){l=h;break}}if(Re&&l<0)throw new Error("assert failed");if(f.splice(l,1),f.length===0&&e.delete(a),l=t.get(i).indexOf(a),Re&&l<0)throw new Error("assert failed");if(t.get(i).splice(l,1),t.get(i).length===0&&t.delete(i),l=r.get(c).indexOf(a),Re&&l<0)throw new Error("assert failed");r.get(c).splice(l,1),r.get(c).length===0&&r.delete(c)},C9=e=>{let t=new Map;for(let r=0;r<e.length;r++){let n=e[r],s=n.vertices.length;if(s>=3){let o=n.vertices[0],i=re(o);for(let c=0;c<s;c++){let a=c+1;a===s&&(a=0);let l=n.vertices[a],f=re(l),h=`${i}/${f}`,p=`${f}/${i}`;if(t.has(p)){let d=t.get(p);d.splice(-1,1),d.length===0&&t.delete(p)}else{let d={vertex0:o,vertex1:l,polygonindex:r};t.has(h)?t.get(h).push(d):t.set(h,[d])}o=l,i=f}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(t.size>0){let r=new Map,n=new Map,s=new Map;for(let[i,c]of t)s.set(i,!0),c.forEach(a=>{let l=re(a.vertex0),f=re(a.vertex1);r.has(l)?r.get(l).push(i):r.set(l,[i]),n.has(f)?n.get(f).push(i):n.set(f,[i])});let o=e.slice(0);for(;t.size!==0;){for(let c of t.keys())s.set(c,!0);let i=!1;for(;;){let c=Array.from(s.keys());if(c.length===0)break;let a=c[0],l=!0;if(t.has(a)){let f=t.get(a);if(Re&&f.length===0)throw new Error("assert failed");let h=f[0];for(let p=0;p<2;p++){let d=p===0?h.vertex0:h.vertex1,m=p===0?h.vertex1:h.vertex0,g=re(d),q=re(m),w=[];p===0?n.has(g)&&(w=n.get(g)):r.has(g)&&(w=r.get(g));for(let v=0;v<w.length;v++){let E=w[v],x=t.get(E)[0],P=p===0?x.vertex0:x.vertex1,y=p===0?x.vertex1:x.vertex0,A=re(P),b=re(y);if(Re&&b!==g)throw new Error("assert failed");if(A===q){sn(t,r,n,d,m,null),sn(t,r,n,m,d,null),l=!1,p=2,i=!0;break}else{let M=d,T=m,S=P,O=qe.subtract(qe.create(),S,M),G=qe.dot(qe.subtract(qe.create(),T,M),O)/qe.dot(O,O);if(G>0&&G<1){let R=qe.scale(qe.create(),O,G);if(qe.add(R,R,M),qe.squaredDistance(R,T)<bm.EPS*bm.EPS){let V=x.polygonindex,ee=o[V],ne=re(x.vertex1),Pe=-1;for(let nr=0;nr<ee.vertices.length;nr++)if(re(ee.vertices[nr])===ne){Pe=nr;break}if(Re&&Pe<0)throw new Error("assert failed");let wt=ee.vertices.slice(0);wt.splice(Pe,0,m);let rr=z9.create(wt);o[V]=rr,sn(t,r,n,x.vertex0,x.vertex1,V);let Ue=Mm(t,r,n,x.vertex0,m,V),Zo=Mm(t,r,n,m,x.vertex1,V);Ue!==null&&s.set(Ue,!0),Zo!==null&&s.set(Zo,!0),l=!1,p=2,i=!0;break}}}}}}l&&s.delete(a)}if(!i)break}e=o}return t.clear(),e};Sm.exports=C9});var Om=u((DB,km)=>{var Fo=F(),No=X(),D9=(e,t,r)=>{let n=t.vertices.length;if(n>3){if(n>4){let i=[0,0,0];t.vertices.forEach(c=>Fo.add(i,i,c)),Fo.snap(i,Fo.divide(i,i,[n,n,n]),e);for(let c=0;c<n;c++){let a=No.create([i,t.vertices[c],t.vertices[(c+1)%n]]);t.color&&(a.color=t.color),r.push(a)}return}let s=No.create([t.vertices[0],t.vertices[1],t.vertices[2]]),o=No.create([t.vertices[0],t.vertices[2],t.vertices[3]]);t.color&&(s.color=t.color,o.color=t.color),r.push(s,o);return}r.push(t)},Z9=(e,t)=>{let r=[];return t.forEach(n=>{D9(e,n,r)}),r};km.exports=Z9});var Nm=u((ZB,Fm)=>{var G9=B(),I9=we(),X9=z(),Vm=C(),$9=$(),Y9=Oo(),L9=Am(),U9=Tm(),H9=Om(),W9=(e,t)=>t,_9=(e,t)=>t,K9=(e,t)=>{let r={snap:!1,simplify:!1,triangulate:!1},{snap:n,simplify:s,triangulate:o}=Object.assign({},r,e),i=I9(t),c=Vm.toPolygons(t);n&&(c=Y9(i,c)),s&&(c=L9(i,c)),o&&(c=U9(c),c=H9(i,c));let a=Object.assign({},t);return a.polygons=c,a},Q9=(e,...t)=>{if(t=G9(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>{if($9.isA(n))return W9(e,n);if(X9.isA(n))return _9(e,n);if(Vm.isA(n))return K9(e,n);throw new Error("invalid geometry")});return r.length===1?r[0]:r};Fm.exports=Q9});var Bm=u((GB,Rm)=>{var J9=B(),Le=Z(),Ro=z(),Bo=C(),zo=$(),Co=we(),j9=Oo(),eT=e=>{let t=Co(e),n=zo.toPoints(e).map(s=>Le.snap(Le.create(),s,t));return zo.create(n)},tT=e=>{let t=Co(e),n=Ro.toSides(e).map(s=>[Le.snap(Le.create(),s[0],t),Le.snap(Le.create(),s[1],t)]);return n=n.filter(s=>!Le.equals(s[0],s[1])),Ro.create(n)},rT=e=>{let t=Co(e),r=Bo.toPolygons(e),n=j9(t,r);return Bo.create(n)},nT=(...e)=>{if(e=J9(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>zo.isA(r)?eT(r):Ro.isA(r)?tT(r):Bo.isA(r)?rT(r):r);return t.length===1?t[0]:t};Rm.exports=nT});var Cm=u((IB,zm)=>{zm.exports={generalize:Nm(),snap:Bm(),retessellate:ut()}});var Zm=u((XB,Dm)=>{var sT=(e,t,r)=>{for(e=e.slice();e.length<r;)e.push(t);return e};Dm.exports=sT});var Ym=u(($B,$m)=>{var oT=B(),Gm=Zm(),Xm=Er(),{translate:iT}=Ve(),cT=e=>{if(!Array.isArray(e.modes)||e.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(e.modes=Gm(e.modes,"none",3),e.modes.filter(t=>["center","max","min","none"].includes(t)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(e.relativeTo)||e.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(e.relativeTo=Gm(e.relativeTo,0,3),e.relativeTo.filter(t=>Number.isFinite(t)||t==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof e.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return e},aT=(e,t,r)=>{for(let n=0;n<3;n++)e[n]==null&&(t[n]==="center"?e[n]=(r[0][n]+r[1][n])/2:t[n]==="max"?e[n]=r[1][n]:t[n]==="min"&&(e[n]=r[0][n]));return e},Im=(e,t,r)=>{let n=Xm(e),s=[0,0,0];for(let o=0;o<3;o++)t[o]==="center"?s[o]=r[o]-(n[0][o]+n[1][o])/2:t[o]==="max"?s[o]=r[o]-n[1][o]:t[o]==="min"&&(s[o]=r[o]-n[0][o]);return iT(s,e)},lT=(e,...t)=>{e=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},e),e=cT(e);let{modes:n,relativeTo:s,grouped:o}=e;if(t=oT(t),t.length===0)throw new Error("align(): No geometries were provided to act upon");if(s.filter(i=>i==null).length){let i=Xm(t);s=aT(s,n,i)}return o?t=Im(t,n,s):t=t.map(i=>Im(i,n,s)),t.length===1?t[0]:t};$m.exports=lT});var er=u((YB,Lm)=>{var uT=B(),fT=z(),hT=C(),pT=$(),dT=be(),{translate:gT}=Ve(),Do=(e,t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e),o=dT(t),i=[0,0,0];return n[0]&&(i[0]=s[0]-(o[0][0]+(o[1][0]-o[0][0])/2)),n[1]&&(i[1]=s[1]-(o[0][1]+(o[1][1]-o[0][1])/2)),n[2]&&(i[2]=s[2]-(o[0][2]+(o[1][2]-o[0][2])/2)),gT(i,t)},on=(e,...t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e);if(t=uT(t),t.length===0)throw new Error("wrong number of arguments");if(s.length!==3)throw new Error("relativeTo must be an array of length 3");e={axes:n,relativeTo:s};let o=t.map(i=>pT.isA(i)||fT.isA(i)||hT.isA(i)?Do(e,i):i);return o.length===1?o[0]:o},mT=(...e)=>on({axes:[!0,!1,!1]},e),qT=(...e)=>on({axes:[!1,!0,!1]},e),xT=(...e)=>on({axes:[!1,!1,!0]},e);Lm.exports={center:on,centerX:mT,centerY:qT,centerZ:xT}});var tr=u((LB,Km)=>{var wT=B(),Um=Y(),Hm=z(),Wm=C(),_m=$(),cn=(e,...t)=>{if(!Array.isArray(e))throw new Error("factors must be an array");if(t=wT(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(1);if(e[0]<=0||e[1]<=0||e[2]<=0)throw new Error("factors must be positive");let r=Um.fromScaling(Um.create(),e),n=t.map(s=>_m.isA(s)?_m.transform(r,s):Hm.isA(s)?Hm.transform(r,s):Wm.isA(s)?Wm.transform(r,s):s);return n.length===1?n[0]:n},vT=(e,...t)=>cn([e,1,1],t),yT=(e,...t)=>cn([1,e,1],t),ET=(e,...t)=>cn([1,1,e],t);Km.exports={scale:cn,scaleX:vT,scaleY:yT,scaleZ:ET}});var tq=u((UB,eq)=>{var PT=B(),Qm=z(),Jm=C(),jm=$(),AT=(e,...t)=>{if(t=PT(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>jm.isA(n)?jm.transform(e,n):Qm.isA(n)?Qm.transform(e,n):Jm.isA(n)?Jm.transform(e,n):n);return r.length===1?r[0]:r};eq.exports=AT});var nq=u((HB,rq)=>{rq.exports={align:Ym(),center:er().center,centerX:er().centerX,centerY:er().centerY,centerZ:er().centerZ,mirror:nt().mirror,mirrorX:nt().mirrorX,mirrorY:nt().mirrorY,mirrorZ:nt().mirrorZ,rotate:ot().rotate,rotateX:ot().rotateX,rotateY:ot().rotateY,rotateZ:ot().rotateZ,scale:tr().scale,scaleX:tr().scaleX,scaleY:tr().scaleY,scaleZ:tr().scaleZ,transform:tq(),translate:Ve().translate,translateX:Ve().translateX,translateY:Ve().translateY,translateZ:Ve().translateZ}});var oq=u((WB,sq)=>{sq.exports={colors:c0(),curves:b0(),geometries:gr(),maths:Kf(),measurements:Nh(),primitives:xd(),text:Sd(),utils:Js(),booleans:Z5(),expansions:fg(),extrusions:Fg(),hulls:wm(),modifiers:Cm(),transforms:nq()}});var an={};module.exports=hq(an);un(an,fq(oq(),1),module.exports);
//# sourceMappingURL=bundle.jscad_modeling.js.map
